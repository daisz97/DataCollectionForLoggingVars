AmqpSender sender subscriptionsByConsumerId get dispatch getConsumerId sender dispatch getMessage LOG trace dispatch getMessage getMessageId LOG trace dispatch getConsumerId sender onMessageDispatch dispatch dispatch getMessage LOG trace dispatch getMessage getMessageId command ConnectionError Throwable exception ConnectionError command getException handleException exception command ConsumerControl control ConsumerControl command AmqpSender sender subscriptionsByConsumerId get control getConsumerId
destination DestinationInfo info DestinationInfo info setConnectionId connectionId info setOperationType DestinationInfo REMOVE_OPERATION_TYPE info setDestination destination info response response Throwable exception ExceptionResponse response getException
protonReceiver org apache qpid proton amqp transport Target remoteTarget protonReceiver getRemoteTarget ProducerInfo producerInfo ProducerInfo getNextProducerId AmqpReceiver receiver AmqpReceiver protonReceiver producerInfo
protonSender org apache qpid proton amqp messaging Source source org apache qpid proton amqp messaging Source protonSender getRemoteSource ConsumerInfo consumerInfo ConsumerInfo getNextConsumerId AmqpSender sender AmqpSender protonSender consumerInfo
sasl getRemoteMechanisms SaslMechanism mechanism getSaslMechanism sasl getRemoteMechanisms mechanism
connectionInfo sasl getRemoteMechanisms SaslMechanism mechanism getSaslMechanism sasl getRemoteMechanisms mechanism LOG debug mechanism getMechanismName mechanism processSaslStep sasl mechanism connectionInfo setUserName mechanism getUsername connectionInfo setPassword mechanism getPassword connectionInfo sasl done Sasl SaslOutcome PN_SASL_OK sasl done Sasl SaslOutcome PN_SASL_AUTH LOG debug mechanism getMechanismName
messagesSent ActiveMQAdmin enableJMSFrameTracing assertTrue brokerService isPersistent Connection connection createAMQConnection Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue name getMethodName MessageProducer producer session createProducer queue TextMessage message i i messagesSent i message session createTextMessage String messageText i java util Date toString message setText messageText
ActiveMQAdmin enableJMSFrameTracing assertTrue brokerService isPersistent Connection connection JMSClientContext INSTANCE createConnection amqpURI connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue name getMethodName MessageProducer p session createProducer queue TextMessage message session createTextMessage String messageText java util Date toString message setText messageText p send message restartBroker connection session String selector message getJMSMessageID
ActiveMQAdmin enableJMSFrameTracing assertTrue brokerService isPersistent Connection connection createAMQConnection Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue name getMethodName MessageProducer p session createProducer destination TextMessage message session createTextMessage String messageText java util Date toString message setText messageText p send message restartBroker connection session String selector message getJMSMessageID
messagesSent ActiveMQAdmin enableJMSFrameTracing assertTrue brokerService isPersistent Connection connection JMSClientContext INSTANCE createConnection amqpURI connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue name getMethodName MessageProducer p session createProducer queue TextMessage message i i messagesSent i message session createTextMessage String messageText i java util Date toString message setText messageText
connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue queueName messagesReceived MessageConsumer consumer selector consumer session createConsumer queue consumer session createConsumer queue selector QueueViewMBean queueView getProxyToQueue queue getQueueName queueView
selector consumer session createConsumer queue consumer session createConsumer queue selector QueueViewMBean queueView getProxyToQueue queue getQueueName queueView e LOG debug e Message msg consumer receive msg assertNotNull msg assertTrue msg TextMessage TextMessage textMessage TextMessage msg
Connection connection createAmqpConnection Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getQueueName MessageProducer producer session createProducer queue TextMessage message session createTextMessage producer send message
Connection connection createStompConnection Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getQueueName MessageProducer producer session createProducer queue TextMessage message session createTextMessage producer send message
Connection connection createAmqpConnection Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getQueueName MessageConsumer consumer session createConsumer queue connection start Message received consumer receive assertNotNull received
Connection connection createStompConnection Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getQueueName MessageConsumer consumer session createConsumer queue connection start Message received consumer receive assertNotNull received
TransportConnector connector connector brokerService addConnector openwirePort openwirePort connector getConnectUri getPort openwireURI connector getPublishableConnectURI
TransportConnector connector connector brokerService addConnector openwirePort openwirePort connector getConnectUri getPort openwireURI connector getPublishableConnectURI LOG debug openwirePort connector brokerService addConnector amqpPort getAmqpTransformer getAdditionalConfig amqpPort connector getConnectUri getPort amqpURI connector getPublishableConnectURI LOG debug amqpPort connector brokerService addConnector amqpSslPort getAmqpTransformer getAdditionalConfig amqpSslPort connector getConnectUri getPort amqpSslURI connector getPublishableConnectURI
LOG debug openwirePort connector brokerService addConnector amqpPort getAmqpTransformer getAdditionalConfig amqpPort connector getConnectUri getPort amqpURI connector getPublishableConnectURI LOG debug amqpPort connector brokerService addConnector amqpSslPort getAmqpTransformer getAdditionalConfig amqpSslPort connector getConnectUri getPort amqpSslURI connector getPublishableConnectURI LOG debug amqpSslPort connector brokerService addConnector amqpNioPort getAmqpTransformer getAdditionalConfig amqpNioPort connector getConnectUri getPort amqpNioURI connector getPublishableConnectURI
amqpURI connector getPublishableConnectURI LOG debug amqpPort connector brokerService addConnector amqpSslPort getAmqpTransformer getAdditionalConfig amqpSslPort connector getConnectUri getPort amqpSslURI connector getPublishableConnectURI LOG debug amqpSslPort connector brokerService addConnector amqpNioPort getAmqpTransformer getAdditionalConfig amqpNioPort connector getConnectUri getPort amqpNioURI connector getPublishableConnectURI LOG debug amqpNioPort connector brokerService addConnector amqpNioPlusSslPort getAmqpTransformer getAdditionalConfig amqpNioPlusSslPort connector getConnectUri getPort
amqpSslPort connector getConnectUri getPort amqpSslURI connector getPublishableConnectURI LOG debug amqpSslPort connector brokerService addConnector amqpNioPort getAmqpTransformer getAdditionalConfig amqpNioPort connector getConnectUri getPort amqpNioURI connector getPublishableConnectURI LOG debug amqpNioPort connector brokerService addConnector amqpNioPlusSslPort getAmqpTransformer getAdditionalConfig amqpNioPlusSslPort connector getConnectUri getPort amqpNioPlusSslURI connector getPublishableConnectURI LOG debug amqpNioPlusSslPort connector brokerService addConnector autoPort getAdditionalConfig
p setPriority TextMessage amqpMessage amqpSession createTextMessage amqpMessage setText p send amqpMessage p close amqpSession close amqpConnection close ActiveMQConnectionFactory factory ActiveMQConnectionFactory openwireConnectionURI Connection openwireConn factory createConnection openwireConn start Session session openwireConn createSession Session AUTO_ACKNOWLEDGE Queue jmsDest session createQueue TEST_QUEUE MessageConsumer c session createConsumer jmsDest Message message c receive assertNotNull message
Connection createConnection remoteURI username password syncPublish ConnectionFactory factory createConnectionFactory remoteURI username password syncPublish Connection connection factory createConnection connection
TopicConnection createTopicConnection remoteURI username password syncPublish TopicConnectionFactory factory createTopicConnectionFactory remoteURI username password syncPublish TopicConnection connection factory createTopicConnection connection
QueueConnection createQueueConnection remoteURI username password syncPublish QueueConnectionFactory factory createQueueConnectionFactory remoteURI username password syncPublish QueueConnection connection factory createQueueConnection connection
MessageProducer requestProducer requestorSession createProducer requestDestination MessageConsumer replyConsumer requestorSession createConsumer replyDestination TextMessage requestMessage requestorSession createTextMessage requestMessage setJMSReplyTo replyDestination requestProducer send requestMessage
MessageProducer requestProducer requestorSession createProducer requestDestination MessageConsumer replyConsumer requestorSession createConsumer replyDestination TextMessage requestMessage requestorSession createTextMessage requestMessage setJMSReplyTo replyDestination requestProducer send requestMessage LOG info requestDestination toString Message msg replyConsumer receive msg TextMessage TextMessage replyMessage TextMessage msg LOG info
message TextMessage requestMessage TextMessage message LOG info
LOG info LOG info requestMessage toString Destination replyDestination requestMessage getJMSReplyTo replyDestination Topic LOG info Topic replyDestination getTopicName LOG info Queue replyDestination getQueueName TextMessage replyMessage responderSession createTextMessage requestMessage getText replyMessage setJMSCorrelationID requestMessage getJMSMessageID responseProducer responderSession createProducer replyDestination responseProducer send replyMessage responseProducer send replyDestination replyMessage LOG info
ActiveMQAdmin enableJMSFrameTracing msgCount connection createConnection Session session connection createSession Session SESSION_TRANSACTED Queue queue session createQueue getDestinationName sendMessages connection queue msgCount QueueViewMBean queueView getProxyToQueue getDestinationName
ActiveMQAdmin enableJMSFrameTracing msgCount connection createConnection Session session connection createSession Session SESSION_TRANSACTED Queue queue session createQueue getDestinationName sendMessages connection queue msgCount QueueViewMBean queueView getProxyToQueue getDestinationName LOG info queueView getQueueSize assertEquals msgCount queueView getQueueSize MessageConsumer consumer session createConsumer queue Message msg consumer receive TestConfig TIMEOUT assertNotNull msg assertTrue msg TextMessage
msgCount connection createConnection Session session connection createSession Session SESSION_TRANSACTED Queue queue session createQueue getDestinationName sendMessages connection queue msgCount QueueViewMBean queueView getProxyToQueue getDestinationName LOG info queueView getQueueSize assertEquals msgCount queueView getQueueSize MessageConsumer consumer session createConsumer queue Message msg consumer receive TestConfig TIMEOUT assertNotNull msg assertTrue msg TextMessage LOG info queueView getQueueSize assertEquals msgCount queueView getQueueSize session commit
ActiveMQAdmin enableJMSFrameTracing msgCount connection createConnection Session session connection createSession Session SESSION_TRANSACTED Queue queue session createQueue getDestinationName sendMessages connection queue msgCount QueueViewMBean queueView getProxyToQueue getDestinationName
ActiveMQAdmin enableJMSFrameTracing msgCount connection createConnection Session session connection createSession Session SESSION_TRANSACTED Queue queue session createQueue getDestinationName sendMessages connection queue msgCount QueueViewMBean queueView getProxyToQueue getDestinationName LOG info queueView getQueueSize assertEquals msgCount queueView getQueueSize MessageConsumer consumer session createConsumer queue Message msg consumer receive TestConfig TIMEOUT
sendMessages connection queue msgCount QueueViewMBean queueView getProxyToQueue getDestinationName LOG info queueView getQueueSize assertEquals msgCount queueView getQueueSize MessageConsumer consumer session createConsumer queue Message msg consumer receive TestConfig TIMEOUT LOG info msg assertNotNull msg assertTrue msg TextMessage assertEquals msg getJMSRedelivered session rollback msg consumer receive TestConfig TIMEOUT assertNotNull msg assertTrue msg TextMessage assertEquals msg getJMSRedelivered
assertEquals msgCount queueView getQueueSize MessageConsumer consumer session createConsumer queue Message msg consumer receive TestConfig TIMEOUT LOG info msg assertNotNull msg assertTrue msg TextMessage assertEquals msg getJMSRedelivered session rollback msg consumer receive TestConfig TIMEOUT assertNotNull msg assertTrue msg TextMessage assertEquals msg getJMSRedelivered LOG info queueView getQueueSize assertEquals msgCount queueView getQueueSize session commit
ActiveMQAdmin enableJMSFrameTracing msgCount connection createConnection Session session connection createSession Session SESSION_TRANSACTED Queue queue session createQueue getDestinationName sendMessages connection queue msgCount QueueViewMBean queueView getProxyToQueue getDestinationName
Queue queue session createQueue getDestinationName connection start MessageProducer producer session createProducer queue producer setDeliveryMode DeliveryMode PERSISTENT Message m session createTextMessage producer send m producer producer notifyAll TimeUnit MILLISECONDS sleep msg
Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getDestinationName connection start MessageProducer producer session createProducer queue session session notifyAll producer msg TimeUnit SECONDS sleep msg
connection createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getDestinationName connection start MessageConsumer consumer session createConsumer queue i i i consumer receiveNoWait consumer consumer notifyAll TimeUnit MILLISECONDS sleep i msg
connection createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getDestinationName connection start MessageConsumer consumer session createConsumer queue i i i consumer receive i consumer consumer notifyAll msg
connection start MessageConsumer consumer session createConsumer queue Message m consumer receive consumer consumer notifyAll m msg m consumer receive m msg
ActiveMQAdmin enableJMSFrameTracing ConnectorViewMBean connector getProxyToConnectionView getTargetConnectorName
ActiveMQAdmin enableJMSFrameTracing connection createConnection Session s connection createSession Session AUTO_ACKNOWLEDGE connection start CountDownLatch called CountDownLatch connection
connection createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE String queueName getDestinationName Queue queue session createQueue queueName MessageProducer producer session createProducer queue messageSize String messageText createLargeString messageSize Message m session createTextMessage messageText
String durableClientId getDestinationName String durableSubscriberName getDestinationName BrokerView adminView brokerService getAdminView durableSubscribersAtStart adminView getDurableTopicSubscribers length inactiveSubscribersAtStart adminView getInactiveDurableTopicSubscribers length
String durableClientId getDestinationName String durableSubscriberName getDestinationName BrokerView adminView brokerService getAdminView durableSubscribersAtStart adminView getDurableTopicSubscribers length inactiveSubscribersAtStart adminView getInactiveDurableTopicSubscribers length LOG debug durableSubscribersAtStart inactiveSubscribersAtStart TopicConnection subscriberConnection JMSClientContext INSTANCE createTopicConnection getBrokerURI subscriberConnection setClientID durableClientId TopicSession subscriberSession subscriberConnection createTopicSession Session AUTO_ACKNOWLEDGE Topic topic subscriberSession createTopic getDestinationName TopicSubscriber messageConsumer subscriberSession createDurableSubscriber topic durableSubscriberName assertNotNull messageConsumer durableSubscribers adminView getDurableTopicSubscribers length inactiveSubscribers adminView getInactiveDurableTopicSubscribers length
LOG debug durableSubscribersAtStart inactiveSubscribersAtStart TopicConnection subscriberConnection JMSClientContext INSTANCE createTopicConnection getBrokerURI subscriberConnection setClientID durableClientId TopicSession subscriberSession subscriberConnection createTopicSession Session AUTO_ACKNOWLEDGE Topic topic subscriberSession createTopic getDestinationName TopicSubscriber messageConsumer subscriberSession createDurableSubscriber topic durableSubscriberName assertNotNull messageConsumer durableSubscribers adminView getDurableTopicSubscribers length inactiveSubscribers adminView getInactiveDurableTopicSubscribers length LOG debug durableSubscribers inactiveSubscribers assertEquals durableSubscribers durableSubscribersAtStart assertEquals inactiveSubscribers inactiveSubscribersAtStart subscriberConnection close durableSubscribers adminView getDurableTopicSubscribers length inactiveSubscribers adminView getInactiveDurableTopicSubscribers length
connection factory createConnection connection start Session session connection createSession ackMode Destination destination destination session createTopic getDestinationName destination session createQueue getDestinationName MessageConsumer consumer session createConsumer destination consumer message message acknowledge done countDown
MessageProducer messageProducer session createProducer queue i i i TextMessage message session createTextMessage message setText i messageProducer send message DeliveryMode PERSISTENT javax jms Message DEFAULT_PRIORITY javax jms Message DEFAULT_TIME_TO_LIVE session close QueueViewMBean queueView getProxyToQueue getTestName assertEquals queueView getQueueSize counter session connection createSession Session SESSION_TRANSACTED MessageConsumer messageConsumer session createConsumer queue TextMessage message TextMessage messageConsumer receive message counter
MessageProducer messageProducer session createProducer queue i i i TextMessage message session createTextMessage message setText i messageProducer send message DeliveryMode PERSISTENT javax jms Message DEFAULT_PRIORITY javax jms Message DEFAULT_TIME_TO_LIVE session close QueueViewMBean queueView getProxyToQueue getTestName assertEquals queueView getQueueSize counter session connection createSession Session SESSION_TRANSACTED MessageConsumer messageConsumer session createConsumer queue TextMessage message TextMessage messageConsumer receive message counter
MSG_COUNT connection createConnection connection start Session session connection createSession Session SESSION_TRANSACTED Queue destination session createQueue getDestinationName MessageProducer producer session createProducer destination MessageConsumer consumer session createConsumer destination MSG_COUNT
MSG_COUNT connection createConnection connection start Session session connection createSession Session SESSION_TRANSACTED Queue destination session createQueue getDestinationName MessageProducer producer session createProducer destination MessageConsumer consumer session createConsumer destination i i MSG_COUNT i LOG info i TextMessage message session createTextMessage i message setIntProperty i producer send message session rollback assertEquals getProxyToQueue getDestinationName getQueueSize i i MSG_COUNT i
TextMessage message session createTextMessage i message setIntProperty i producer send message session rollback assertEquals getProxyToQueue getDestinationName getQueueSize i i MSG_COUNT i LOG info i TextMessage message session createTextMessage i message setIntProperty i producer send message session commit assertEquals MSG_COUNT getProxyToQueue getDestinationName getQueueSize SubscriptionViewMBean subscription getProxyToQueueSubscriber getDestinationName assertNotNull subscription i i MSG_COUNT i
MSG_COUNT AtomicInteger counter AtomicInteger connection createConnection connection start Session session connection createSession Session SESSION_TRANSACTED Queue destination session createQueue getDestinationName MessageProducer producer session createProducer destination MessageConsumer consumer session createConsumer destination consumer
connection createConnection connection start Session session connection createSession Session SESSION_TRANSACTED Queue destination session createQueue getDestinationName MessageProducer producer session createProducer destination MessageConsumer consumer session createConsumer destination consumer message LOG info message getJMSMessageID counter incrementAndGet msgIndex
LOG info message getJMSMessageID counter incrementAndGet msgIndex LOG info msgIndex TextMessage message session createTextMessage msgIndex message setIntProperty msgIndex producer send message LOG info session rollback assertEquals getProxyToQueue getDestinationName getQueueSize
LOG info session rollback assertEquals getProxyToQueue getDestinationName getQueueSize MSG_COUNT LOG info msgIndex TextMessage message session createTextMessage msgIndex message setIntProperty msgIndex producer send message LOG info session commit assertEquals MSG_COUNT getProxyToQueue getDestinationName getQueueSize SubscriptionViewMBean subscription getProxyToQueueSubscriber getDestinationName assertNotNull subscription MSG_COUNT
LOG info session commit assertEquals MSG_COUNT getProxyToQueue getDestinationName getQueueSize SubscriptionViewMBean subscription getProxyToQueueSubscriber getDestinationName assertNotNull subscription MSG_COUNT counter get MSG_COUNT LOG info session commit MSG_COUNT LOG info msgIndex TextMessage message session createTextMessage msgIndex message setIntProperty msgIndex
Connection connection connection createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getDestinationName i i i MessageProducer messageProducer session createProducer queue TextMessage message session createTextMessage i message setIntProperty i messageProducer send message
Connection connection JMSClientContext INSTANCE createConnection remoteURI Session session connection createSession Session AUTO_ACKNOWLEDGE String destinationName System currentTimeMillis Destination destination session createTopic destinationName connection start ExecutorService executor Executors newCachedThreadPool i i i ConsumerTask consumerTask ConsumerTask initLatch destinationName remoteURI i latch ITERATIONS executor submit consumerTask connection start initLatch await LOG debug latch getCount sendMessages connection destination ITERATIONS LOG debug latch getCount latch await TimeUnit SECONDS
outbound setIntProperty nInt outbound setFloatProperty nFloat outbound setDoubleProperty nDouble outbound setStringProperty outbound setLongProperty nLong outbound setObjectProperty Boolean valueOf bool openwireProducer send outbound Message inbound amqpConsumer receive propertyNames inbound getPropertyNames propertyCount String propertyName propertyNames nextElement propertyName propertyCount propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName
outbound setStringProperty outbound setLongProperty nLong outbound setObjectProperty Boolean valueOf bool openwireProducer send outbound Message inbound amqpConsumer receive propertyNames inbound getPropertyNames propertyCount String propertyName propertyNames nextElement propertyName propertyCount propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName LOG debug propertyName inbound propertyExists propertyName assertTrue inbound propertyExists propertyName
outbound setObjectProperty Boolean valueOf bool openwireProducer send outbound Message inbound amqpConsumer receive propertyNames inbound getPropertyNames propertyCount String propertyName propertyNames nextElement propertyName propertyCount propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName LOG debug propertyName inbound propertyExists propertyName assertTrue inbound propertyExists propertyName LOG debug propertyName inbound propertyExists propertyName
propertyNames inbound getPropertyNames propertyCount String propertyName propertyNames nextElement propertyName propertyCount propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName LOG debug propertyName inbound propertyExists propertyName assertTrue inbound propertyExists propertyName LOG debug propertyName inbound propertyExists propertyName LOG debug propertyName fail propertyName
String propertyName propertyNames nextElement propertyName propertyCount propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName LOG debug propertyName inbound propertyExists propertyName assertTrue inbound propertyExists propertyName LOG debug propertyName inbound propertyExists propertyName LOG debug propertyName fail propertyName LOG debug propertyName fail propertyName
outbound setIntProperty nInt outbound setFloatProperty nFloat outbound setDoubleProperty nDouble outbound setStringProperty outbound setLongProperty nLong outbound setObjectProperty Boolean valueOf bool amqpProducer send outbound Message inbound openwireConsumer receive propertyNames inbound getPropertyNames propertyCount String propertyName propertyNames nextElement propertyName propertyCount propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName
outbound setStringProperty outbound setLongProperty nLong outbound setObjectProperty Boolean valueOf bool amqpProducer send outbound Message inbound openwireConsumer receive propertyNames inbound getPropertyNames propertyCount String propertyName propertyNames nextElement propertyName propertyCount propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName LOG debug propertyName inbound propertyExists propertyName assertTrue inbound propertyExists propertyName
outbound setObjectProperty Boolean valueOf bool amqpProducer send outbound Message inbound openwireConsumer receive propertyNames inbound getPropertyNames propertyCount String propertyName propertyNames nextElement propertyName propertyCount propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName LOG debug propertyName inbound propertyExists propertyName assertTrue inbound propertyExists propertyName LOG debug propertyName inbound propertyExists propertyName
propertyNames inbound getPropertyNames propertyCount String propertyName propertyNames nextElement propertyName propertyCount propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName LOG debug propertyName inbound propertyExists propertyName assertTrue inbound propertyExists propertyName LOG debug propertyName inbound propertyExists propertyName LOG debug propertyName fail propertyName
String propertyName propertyNames nextElement propertyName propertyCount propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName propertyName LOG debug propertyName inbound propertyExists propertyName assertTrue inbound propertyExists propertyName LOG debug propertyName inbound propertyExists propertyName LOG debug propertyName fail propertyName LOG debug propertyName fail propertyName
assumeFalse transformer equals Connection openwire createJMSConnection Connection amqp createConnection openwire start amqp start Session openwireSession openwire createSession Session AUTO_ACKNOWLEDGE Session amqpSession amqp createSession Session AUTO_ACKNOWLEDGE Destination queue openwireSession createQueue getDestinationName MessageProducer amqpProducer amqpSession createProducer queue MessageConsumer openwireConsumer openwireSession createConsumer queue ObjectMessage outgoing amqpSession createObjectMessage outgoing setObject UUID randomUUID amqpProducer send outgoing Message received openwireConsumer receive assertNotNull received
assumeFalse transformer equals Connection openwire createJMSConnection Connection amqp createConnection openwire start amqp start Session openwireSession openwire createSession Session AUTO_ACKNOWLEDGE Session amqpSession amqp createSession Session AUTO_ACKNOWLEDGE Destination queue openwireSession createQueue getDestinationName MessageProducer openwireProducer openwireSession createProducer queue MessageConsumer amqpConsumer amqpSession createConsumer queue ObjectMessage outgoing amqpSession createObjectMessage outgoing setObject UUID randomUUID openwireProducer send outgoing Message received amqpConsumer receive assertNotNull received
Connection openwire createJMSConnection ActiveMQConnection openwire setUseCompression Connection amqp createConnection openwire start amqp start Session openwireSession openwire createSession Session AUTO_ACKNOWLEDGE Session amqpSession amqp createSession Session AUTO_ACKNOWLEDGE Destination queue openwireSession createQueue getDestinationName MessageProducer openwireProducer openwireSession createProducer queue MessageConsumer amqpConsumer amqpSession createConsumer queue ObjectMessage outgoing amqpSession createObjectMessage outgoing setObject UUID randomUUID openwireProducer send outgoing Message received amqpConsumer receive assertNotNull received
expectedSize LOG info expectedSize String payload createLargeString expectedSize assertEquals expectedSize payload getBytes length Connection connection JMSClientContext INSTANCE createConnection getBrokerAmqpConnectionURI startTime System currentTimeMillis Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue testName getMethodName MessageProducer producer session createProducer queue TextMessage message session createTextMessage message setText payload producer send message endTime System currentTimeMillis
TextMessage message session createTextMessage message setText payload producer send message endTime System currentTimeMillis LOG info endTime startTime startTime System currentTimeMillis MessageConsumer consumer session createConsumer queue connection start LOG info Message receivedMessage consumer receive assertNotNull receivedMessage assertTrue receivedMessage TextMessage TextMessage receivedTextMessage TextMessage receivedMessage assertNotNull receivedMessage endTime System currentTimeMillis
expectedSize LOG info expectedSize payload createLargeByteArray expectedSize assertEquals expectedSize payload length Connection connection JMSClientContext INSTANCE createConnection getBrokerAmqpConnectionURI startTime System currentTimeMillis Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue testName getMethodName MessageProducer producer session createProducer queue BytesMessage message session createBytesMessage message writeBytes payload producer send message endTime System currentTimeMillis
BytesMessage message session createBytesMessage message writeBytes payload producer send message endTime System currentTimeMillis LOG info endTime startTime startTime System currentTimeMillis MessageConsumer consumer session createConsumer queue connection start LOG info Message receivedMessage consumer receive assertNotNull receivedMessage assertTrue receivedMessage BytesMessage BytesMessage receivedBytesMessage BytesMessage receivedMessage assertNotNull receivedMessage endTime System currentTimeMillis
Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getDestinationName MessageConsumer consumer session createConsumer queue Message message consumer receive RECEIVE_TIMEOUT assertNotNull message
Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getDestinationName MessageConsumer consumer session createConsumer queue i i i Message message consumer receive RECEIVE_TIMEOUT assertNotNull message LOG debug i message getClass getSimpleName String gid message getStringProperty String seq message getStringProperty
Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getDestinationName MessageConsumer consumer session createConsumer queue i i i Message message consumer receive RECEIVE_TIMEOUT assertNotNull message LOG debug i message getClass getSimpleName String gid message getStringProperty String seq message getStringProperty LOG debug gid
connection cf createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE assertNotNull session Queue queue session createQueue getDestinationName sendMessages name getMethodName MSG_COUNT QueueViewMBean proxy getProxyToQueue getDestinationName assertEquals MSG_COUNT proxy getQueueSize QueueBrowser browser session createBrowser queue assertNotNull browser Enumeration enumeration browser getEnumeration count count MSG_COUNT enumeration Message msg Message enumeration nextElement assertNotNull msg
JmsConnectionFactory cf JmsConnectionFactory getAmqpURI connection cf createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getDestinationName MessageProducer producer session createProducer queue producer send session createTextMessage producer close QueueBrowser browser session createBrowser queue Enumeration enumeration browser getEnumeration enumeration Message m Message enumeration nextElement assertTrue m TextMessage
connection cf createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE assertNotNull session Queue queue session createQueue getDestinationName sendMessages name getMethodName QueueViewMBean proxy getProxyToQueue getDestinationName assertEquals proxy getQueueSize QueueBrowser browser session createBrowser queue assertNotNull browser Enumeration enumeration browser getEnumeration count enumeration Message msg Message enumeration nextElement assertNotNull msg
connection cf createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE assertNotNull session Queue queue session createQueue getDestinationName sendMessages name getMethodName QueueViewMBean proxy getProxyToQueue getDestinationName assertEquals proxy getQueueSize QueueBrowser browser session createBrowser queue assertNotNull browser Enumeration enumeration browser getEnumeration count enumeration Message msg Message enumeration nextElement assertNotNull msg
connection cf createConnection connection start Session session connection createSession Session SESSION_TRANSACTED assertNotNull session Queue queue session createQueue getDestinationName sendMessages name getMethodName QueueViewMBean proxy getProxyToQueue getDestinationName assertEquals proxy getQueueSize QueueBrowser browser session createBrowser queue assertNotNull browser Enumeration enumeration browser getEnumeration count enumeration Message msg Message enumeration nextElement assertNotNull msg
Queue queue session createQueue getDestinationName sendMessages name getMethodName QueueViewMBean proxy getProxyToQueue getDestinationName assertEquals proxy getQueueSize MessageProducer txProducer session createProducer queue txProducer send session createMessage assertEquals proxy getQueueSize QueueBrowser browser session createBrowser queue assertNotNull browser Enumeration enumeration browser getEnumeration count enumeration Message msg Message enumeration nextElement assertNotNull msg
connection start MSG_COUNT Session session connection createSession Session AUTO_ACKNOWLEDGE assertNotNull session Queue queue session createQueue getDestinationName sendMessages name getMethodName MSG_COUNT QueueViewMBean proxy getProxyToQueue getDestinationName assertEquals MSG_COUNT proxy getQueueSize QueueBrowser browser session createBrowser queue assertNotNull browser Enumeration enumeration browser getEnumeration count enumeration Message msg Message enumeration nextElement assertNotNull msg
Connection connection connection createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getDestinationName i i i MessageProducer messageProducer session createProducer queue TextMessage message session createTextMessage i message setIntProperty i messageProducer send message
request onSuccess pumpToProtonTransport request e LOG debug closeTimeout request sync request sync closeTimeout TimeUnit MILLISECONDS e LOG warn e getMessage
AmqpTransactionId txId session getConnection getNextTransactionId transactionId txId transactionId LOG info txId session coordinator coordinator LOG info txId coordinator AmqpTransactionCoordinator session coordinator
session coordinator coordinator LOG info txId coordinator AmqpTransactionCoordinator session coordinator LOG info txId coordinator declare txId request e request onFailure e onFailure result request onFailure result
transactionId IllegalStateException preCommit transactionId postCommit transactionId postCommit LOG debug transactionId
transactionId IllegalStateException preRollback transactionId postRollback transactionId postRollback LOG debug transactionId
deliveries Delivery pendingDelivery deliveries next pendingDelivery DeliveryState state pendingDelivery getRemoteState AmqpTransactionId txId AmqpTransactionId pendingDelivery getContext AsyncResult pendingRequest pendingRequests get txId pendingRequest IllegalStateException state Declared LOG debug txId getTxId Declared declared Declared state txId setRemoteTxId declared getTxnId pendingRequest onSuccess state
state Declared LOG debug txId getTxId Declared declared Declared state txId setRemoteTxId declared getTxnId pendingRequest onSuccess state Rejected LOG debug txId getTxId Rejected rejected Rejected state Exception cause AmqpSupport convertToException rejected getError JMSException failureCause txId failureCause TransactionRolledBackException cause getMessage failureCause JMSException cause getMessage pendingRequest onFailure failureCause
Mechanism Mechanism match List Mechanism found ArrayList Mechanism
Mechanism Mechanism match List Mechanism found ArrayList Mechanism remoteMechanism mechanismRestriction mechanismRestriction remoteMechanism LOG debug remoteMechanism mechanismRestriction Mechanism mechanism remoteMechanism mechanism PlainMechanism remoteMechanism mechanism AnonymousMechanism remoteMechanism mechanism CramMD5Mechanism
Mechanism mechanism remoteMechanism mechanism PlainMechanism remoteMechanism mechanism AnonymousMechanism remoteMechanism mechanism CramMD5Mechanism LOG debug remoteMechanism mechanism found add mechanism found Collections sort found match found get found size
markAsInvalid markAsInvalid Map Symbol Object properties connection getRemoteProperties properties markAsInvalid properties markAsInvalid properties markAsInvalid properties markAsInvalid properties markAsInvalid
MSG_COUNT AmqpClient client createAmqpClient AmqpConnection connection trackConnection client connect AmqpSession session connection createSession AmqpReceiver receiver session createReceiver getTestName AmqpSender sender session createSender getTestName i i MSG_COUNT i AmqpMessage message AmqpMessage message setText i sender send message i
AmqpClient client createAmqpClient assertNotNull client AtomicBoolean closed AtomicBoolean client
AmqpClient client createAmqpClient client
AmqpClient client createAmqpClient client
AmqpClient client createAmqpClient client
assertNull receiver receive TimeUnit SECONDS fail AmqpMessage delivered delivered receiver receive TimeUnit SECONDS fail receivedTime System currentTimeMillis assertNotNull delivered Long msgDeliveryTime Long delivered getMessageAnnotation assertNotNull msgDeliveryTime assertEquals DELAY msgDeliveryTime longValue totalDelay receivedTime sendTime
AmqpMessage message3 receiver1 receive TimeUnit SECONDS receiver2 flow AmqpMessage message4 receiver2 receive TimeUnit SECONDS assertNotNull message3 assertNotNull message4 assertEquals message3 getMessageId assertEquals message4 getMessageId message3 accept message4 accept LOG info splitCredit MSG_COUNT LOG info splitCredit receiver1 flow splitCredit splitCredit AmqpMessage message receiver1 receive TimeUnit SECONDS
assertNotNull message3 assertNotNull message4 assertEquals message3 getMessageId assertEquals message4 getMessageId message3 accept message4 accept LOG info splitCredit MSG_COUNT LOG info splitCredit receiver1 flow splitCredit splitCredit AmqpMessage message receiver1 receive TimeUnit SECONDS assertNotNull message LOG info message getMessageId message accept
message3 accept message4 accept LOG info splitCredit MSG_COUNT LOG info splitCredit receiver1 flow splitCredit splitCredit AmqpMessage message receiver1 receive TimeUnit SECONDS assertNotNull message LOG info message getMessageId message accept LOG info splitCredit receiver2 flow splitCredit splitCredit AmqpMessage message receiver2 receive TimeUnit SECONDS
assertNotNull message4 assertEquals message3 getMessageId assertEquals message4 getMessageId message3 accept message4 accept destinationView getInFlightCount destinationView getInFlightCount LOG info splitCredit MSG_COUNT LOG info splitCredit receiver1 flow splitCredit splitCredit AmqpMessage message receiver1 receive TimeUnit SECONDS
message3 accept message4 accept destinationView getInFlightCount destinationView getInFlightCount LOG info splitCredit MSG_COUNT LOG info splitCredit receiver1 flow splitCredit splitCredit AmqpMessage message receiver1 receive TimeUnit SECONDS assertNotNull message LOG info message getMessageId message accept
destinationView getInFlightCount LOG info splitCredit MSG_COUNT LOG info splitCredit receiver1 flow splitCredit splitCredit AmqpMessage message receiver1 receive TimeUnit SECONDS assertNotNull message LOG info message getMessageId message accept LOG info splitCredit receiver2 flow splitCredit splitCredit AmqpMessage message receiver2 receive TimeUnit SECONDS
AmqpClient client createAmqpClient AmqpConnection connection trackConnection client connect connection sender LOG trace sender getName settled countDown AmqpSession session connection createSession AmqpSender sender session createSender getTestName i i i AmqpMessage message AmqpMessage message setText i sender send message i
MSG_COUNT AmqpClient client createAmqpClient AmqpConnection connection trackConnection client connect AmqpSession session connection createSession AmqpSender sender session createSender getTestName i i MSG_COUNT i AmqpMessage message AmqpMessage message setText i sender send message i
AmqpClient client createAmqpClient assertNotNull client client
AmqpConnection connection trackConnection client connect AmqpSession session connection createSession AmqpReceiver receiver session createReceiver getTestName receiver flow sendMessages getTestName AmqpMessage message receiver receive TimeUnit SECONDS assertNotNull message message accept QueueViewMBean queue getProxyToQueue getTestName ObjectName slowConsumerPolicyMBeanName queue getSlowConsumerStrategy assertNotNull slowConsumerPolicyMBeanName AbortSlowConsumerStrategyViewMBean abortPolicy AbortSlowConsumerStrategyViewMBean brokerService getManagementContext newProxyInstance slowConsumerPolicyMBeanName AbortSlowConsumerStrategyViewMBean TimeUnit SECONDS sleep TabularData slowOnes abortPolicy getSlowConsumers assertEquals slowOnes size
AmqpReceiver receiver session createReceiver getTestName receiver flow sendMessages getTestName AmqpMessage message receiver receive TimeUnit SECONDS assertNotNull message message accept QueueViewMBean queue getProxyToQueue getTestName ObjectName slowConsumerPolicyMBeanName queue getSlowConsumerStrategy assertNotNull slowConsumerPolicyMBeanName AbortSlowConsumerStrategyViewMBean abortPolicy AbortSlowConsumerStrategyViewMBean brokerService getManagementContext newProxyInstance slowConsumerPolicyMBeanName AbortSlowConsumerStrategyViewMBean TimeUnit SECONDS sleep TabularData slowOnes abortPolicy getSlowConsumers assertEquals slowOnes size LOG info slowOnes CompositeData slowOne CompositeData slowOnes values iterator next
sslContext setKeyStore keystore getCanonicalPath sslContext setKeyStorePassword sslContext setTrustStore keystore getCanonicalPath sslContext setTrustStorePassword sslContext afterPropertiesSet broker stopServer System File file File System setProperty file getAbsolutePath broker createBroker broker setSslContext sslContext String connectorURI getConnectorURI TransportConnector connector broker addConnector connectorURI port connector getConnectUri getPort
sslContext setKeyStore keystore getCanonicalPath sslContext setKeyStorePassword sslContext setTrustStore keystore getCanonicalPath sslContext setTrustStorePassword sslContext afterPropertiesSet broker stopServer System File file File System setProperty file getAbsolutePath broker createBroker broker setSslContext sslContext String connectorURI getConnectorURI TransportConnector connector broker addConnector connectorURI port connector getConnectUri getPort
message setBody AmqpValue EncodedMessage encoded encode message InboundTransformer inboundTransformer getInboundTransformer OutboundTransformer outboundTransformer getOutboundTransformer ActiveMQMessage intermediate inboundTransformer transform encoded intermediate onSend outboundTransformer transform intermediate totalDuration startTime System nanoTime ActiveMQMessage intermediate inboundTransformer transform encoded intermediate onSend outboundTransformer transform intermediate totalDuration System nanoTime startTime
message setBody AmqpValue EncodedMessage encoded encode message InboundTransformer inboundTransformer getInboundTransformer OutboundTransformer outboundTransformer getOutboundTransformer ActiveMQMessage intermediate inboundTransformer transform encoded intermediate onSend outboundTransformer transform intermediate totalDuration startTime System nanoTime ActiveMQMessage intermediate inboundTransformer transform encoded intermediate onSend outboundTransformer transform intermediate totalDuration System nanoTime startTime
EncodedMessage encoded encode createTypicalQpidJMSMessage InboundTransformer inboundTransformer getInboundTransformer OutboundTransformer outboundTransformer getOutboundTransformer ActiveMQMessage intermediate inboundTransformer transform encoded intermediate onSend outboundTransformer transform intermediate totalDuration startTime System nanoTime ActiveMQMessage intermediate inboundTransformer transform encoded intermediate onSend outboundTransformer transform intermediate totalDuration System nanoTime startTime
EncodedMessage encoded encode createComplexQpidJMSMessage InboundTransformer inboundTransformer getInboundTransformer OutboundTransformer outboundTransformer getOutboundTransformer ActiveMQMessage intermediate inboundTransformer transform encoded intermediate onSend outboundTransformer transform intermediate totalDuration startTime System nanoTime ActiveMQMessage intermediate inboundTransformer transform encoded intermediate onSend outboundTransformer transform intermediate totalDuration System nanoTime startTime
JmsConnection connection JmsConnection factory createConnection connection start Session session connection createSession ActiveMQSession AUTO_ACKNOWLEDGE Queue queue session createQueue getDestinationName MessageConsumer consumer session createConsumer queue v v
JmsConnection connection JmsConnection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getDestinationName MessageProducer producer session createProducer queue producer setDeliveryMode DeliveryMode NON_PERSISTENT BytesMessage message session createBytesMessage message writeBytes payload producer send message
connection createConnection Session session connection createSession Session SESSION_TRANSACTED Queue queue session createQueue getDestinationName session close session connection createSession Session AUTO_ACKNOWLEDGE QueueBrowser browser session createBrowser queue j Enumeration enums browser getEnumeration enums
session connection createSession Session AUTO_ACKNOWLEDGE QueueBrowser browser session createBrowser queue j Enumeration enums browser getEnumeration enums LOG debug queue getQueueName Message message Message enums nextElement message LOG debug Object j message queue getQueueName LOG debug queue getQueueName browser close
QueueBrowser browser session createBrowser queue j Enumeration enums browser getEnumeration enums LOG debug queue getQueueName Message message Message enums nextElement message LOG debug Object j message queue getQueueName LOG debug queue getQueueName browser close e LOG error e browser
LOG debug queue getQueueName Message message Message enums nextElement message LOG debug Object j message queue getQueueName LOG debug queue getQueueName browser close e LOG error e browser LOG debug queue getQueueName session close e
amqpWireFormat setMaxFrameSize MESSAGE_SIZE AmqpHeader inputHeader AmqpHeader DataByteArrayOutputStream output DataByteArrayOutputStream CONTENTS MESSAGE_SIZE i i MESSAGE_SIZE i CONTENTS i output write inputHeader getBuffer output writeInt MESSAGE_SIZE output write CONTENTS output close codec parse output toBuffer toByteBuffer fail
port AmqpHeader header ssl ClientConnection connection createClientConnection ssl connection open port connection send header AmqpHeader response connection readAmqpHeader assertNotNull response
removeDestination context destination timeout removeDestination context destination timeout DestinationInfo info destinations remove destination info ConsumerInfo consumerInfo virtualDestinationConsumers VirtualDestination virtualDestination virtualDestinationConsumers get consumerInfo virtualDestination destination VirtualConsumerPair key VirtualConsumerPair virtualDestination destination ConsumerInfo i brokerConsumerDests get key consumerInfo i brokerConsumerDests remove key
virtualDestinationAdded context virtualDestination virtualDestinationAdded context virtualDestination virtualDestination
ConsumerInfo info activeMQDest virtualDestination info VirtualConsumerPair pair VirtualConsumerPair virtualDestination activeMQDest pair ConnectionId connectionId ConnectionId connectionIdGenerator generateId SessionId sessionId SessionId connectionId sessionIdGenerator getNextSequenceId ConsumerId consumerId ConsumerId sessionId consumerIdGenerator getNextSequenceId info ConsumerInfo consumerId pair info
ConsumerInfo info activeMQDest virtualDestination info VirtualConsumerPair pair VirtualConsumerPair virtualDestination activeMQDest pair ConnectionId connectionId ConnectionId connectionIdGenerator generateId SessionId sessionId SessionId connectionId sessionIdGenerator getNextSequenceId ConsumerId consumerId ConsumerId sessionId consumerIdGenerator getNextSequenceId info ConsumerInfo consumerId pair info LOG debug pair info setConsumerInfoVirtualDest info virtualDestination activeMQDest ActiveMQTopic topic AdvisorySupport getVirtualDestinationConsumerAdvisoryTopic info getDestination info virtualDestination
SessionId sessionId SessionId connectionId sessionIdGenerator getNextSequenceId ConsumerId consumerId ConsumerId sessionId consumerIdGenerator getNextSequenceId info ConsumerInfo consumerId pair info LOG debug pair info setConsumerInfoVirtualDest info virtualDestination activeMQDest ActiveMQTopic topic AdvisorySupport getVirtualDestinationConsumerAdvisoryTopic info getDestination info virtualDestination LOG debug info virtualDestination fireConsumerAdvisory context info getDestination topic info info info copy setConsumerInfoVirtualDest info virtualDestination activeMQDest ActiveMQTopic topic AdvisorySupport getVirtualDestinationConsumerAdvisoryTopic info getDestination info virtualDestination
virtualDestinationRemoved context virtualDestination virtualDestinationRemoved context virtualDestination virtualDestination
virtualDestinationRemoved context virtualDestination virtualDestinationRemoved context virtualDestination virtualDestination LOG debug virtualDestination consumersLock readLock lock virtualDestination ConsumerInfo info get info virtualDestination fireVirtualDestinationRemoveAdvisory context info activeMQDest brokerConsumerDests ConsumerInfo i brokerConsumerDests get activeMQDest info i brokerConsumerDests activeMQDest
info VirtualDestination virtualDestination virtualDestinationConsumers remove info virtualDestination
message cause LOG warn message cause
persistenceAdapterToStart checkStartException ConfigurationException persistenceAdapterToStart setUsageManager getProducerSystemUsage persistenceAdapterToStart setBrokerName getBrokerName LOG info persistenceAdapterToStart deleteAllMessages persistenceAdapterToStart start getTempDataStore tempDataStore tempDataStore start e RuntimeException exception RuntimeException tempDataStore e
deleteAllMessages persistenceAdapterToStart start getTempDataStore tempDataStore tempDataStore start e RuntimeException exception RuntimeException tempDataStore e LOG error exception getLocalizedMessage e exception getJobSchedulerStore jobSchedulerStore jobSchedulerStore start e
count queueSize Map ActiveMQDestination Destination destinationMap regionBroker getDestinationMap Map ActiveMQDestination Destination entry destinationMap entry entry getValue queueSize entry getValue getDestinationStatistics getMessages getCount count queueSize queueSize
dir storeUsage dir dir StoreUtil findParentDirectory dir String storeName storeUsage StoreUsage storeLimit storeUsage getLimit storeCurrent storeUsage getUsage totalSpace storeUsage getTotal storeUsage getTotal dir getTotalSpace totalUsableSpace storeUsage getTotal storeUsage getTotal dir getUsableSpace storeCurrent totalUsableSpace totalSpace String message dir
dir StoreUtil findParentDirectory dir String storeName storeUsage StoreUsage storeLimit storeUsage getLimit storeCurrent storeUsage getUsage totalSpace storeUsage getTotal storeUsage getTotal dir getTotalSpace totalUsableSpace storeUsage getTotal storeUsage getTotal dir getUsableSpace storeCurrent totalUsableSpace totalSpace String message dir LOG error message ConfigurationException message bytePercentLimit totalSpace percentLimit oneMeg percentLimit storeUsage getTotal storeLimit bytePercentLimit storeLimit totalUsableSpace newLimit bytePercentLimit totalUsableSpace totalUsableSpace bytePercentLimit newLimit storeLimit
totalUsableSpace totalSpace String message dir LOG error message ConfigurationException message bytePercentLimit totalSpace percentLimit oneMeg percentLimit storeUsage storeLimit bytePercentLimit storeLimit totalUsableSpace newLimit bytePercentLimit totalUsableSpace totalUsableSpace bytePercentLimit newLimit storeLimit LOG info storeName percentLimit storeUsage setLimit newLimit LOG info storeName newLimit totalSpace newLimit oneMeg storeLimit totalUsableSpace String message storeName storeLimit oneMeg storeCurrent oneMeg dir getAbsolutePath totalUsableSpace oneMeg
connector setDurableDestinations durableDestinations String defaultSocketURI getDefaultSocketURIString defaultSocketURI connector setBrokerURL defaultSocketURI ObjectName networkMbean createNetworkConnectorObjectName connector getManagementContext getObjectInstance networkMbean LOG debug networkMbean registerNetworkConnectorMBean connector
defaultSocketURI connector setBrokerURL defaultSocketURI ObjectName networkMbean createNetworkConnectorObjectName connector getManagementContext getObjectInstance networkMbean LOG debug networkMbean registerNetworkConnectorMBean connector LOG info connector connector start
i Thread runnable i Thread thread Thread runnable i thread setDaemon thread Thread Thread
producerExchange setConnectionContext context producerExchange setProducerState ProducerState ProducerInfo ConsumerBrokerExchange consumerExchange ConsumerBrokerExchange consumerExchange setConnectionContext context xid addedMessages aks beginTransaction context xid XATransaction transaction XATransaction getTransaction context xid i i addedMessages i forceDestinationWakeupOnCompletion context transaction addedMessages i getDestination addedMessages i i i aks i forceDestinationWakeupOnCompletion context transaction aks i getDestination aks i transaction setState Transaction PREPARED_STATE registerMBean transaction
TransactionId List TransactionId txs ArrayList TransactionId iter iter Transaction tx iter next tx
e transportException set e
e SERVICELOG debug ConnectionError ce ConnectionError ce setException e dispatchSync ce transportException set e Thread sleep Thread currentThread interrupt stopAsync inServiceException inServiceException
command command Transaction transaction getActiveTransaction command transaction transaction
broker preProcessDispatch messageDispatch convertToIO IOException convertToIO dispatch command IOException e messageDispatch TransmitCallback sub messageDispatch getTransmitCallback broker postProcessDispatch messageDispatch sub sub onFailure messageDispatch e
taskRunner transport start active BrokerInfo info connector getBrokerInfo copy connector info setPeerBrokerInfos broker getPeerBrokerInfos info setPeerBrokerInfos dispatchAsync info connector onStarted e status set PENDING_STOP e
waitTime cause waitTime status compareAndSet STARTING PENDING_STOP transportException set cause Thread sleep waitTime stopAsync
LOG debug List TransportConnectionState connectionStates listConnectionStates TransportConnectionState cs connectionStates ConnectionContext connectionContext cs getContext connectionContext connectionContext getStopping set serviceLock writeLock lock doStop
TransportConnection c iter next c duplexNetworkConnectorId c LOG warn c duplexNetworkConnectorId c stopAsync c getStopped await TimeUnit SECONDS setDuplexNetworkConnectorId duplexNetworkConnectorId Transport localTransport NetworkBridgeFactory createLocalTransport config broker getVmConnectorURI Transport remoteBridgeTransport transport remoteBridgeTransport ResponseCorrelator remoteBridgeTransport ResponseCorrelator remoteBridgeTransport String duplexName localTransport toString duplexName duplexName duplexName substring duplexName lastIndexOf MBeanNetworkListener listener MBeanNetworkListener brokerService config brokerService createDuplexNetworkConnectorObjectName duplexName listener setCreatedByDuplex
setDuplexNetworkConnectorId duplexNetworkConnectorId Transport localTransport NetworkBridgeFactory createLocalTransport config broker getVmConnectorURI Transport remoteBridgeTransport transport remoteBridgeTransport ResponseCorrelator remoteBridgeTransport ResponseCorrelator remoteBridgeTransport String duplexName localTransport toString duplexName duplexName duplexName substring duplexName lastIndexOf MBeanNetworkListener listener MBeanNetworkListener brokerService config brokerService createDuplexNetworkConnectorObjectName duplexName listener setCreatedByDuplex duplexBridge config getBridgeFactory createNetworkBridge config localTransport remoteBridgeTransport listener duplexBridge setBrokerService brokerService duplexBridge setDurableDestinations NetworkConnector getDurableTopicDestinations broker getDurableDestinations info setDuplexConnection duplexBridge setCreatedByDuplex
Connection connection createConnection transport connection start BrokerStoppedException brokerService e ServiceSupport dispose transport onAcceptError e remoteHost e ServiceSupport dispose transport onAcceptError e remoteHost onAcceptError error onAcceptError error onAcceptError error remoteHost brokerService brokerService
BrokerStoppedException brokerService e ServiceSupport dispose transport onAcceptError e remoteHost e ServiceSupport dispose transport onAcceptError e remoteHost onAcceptError error onAcceptError error onAcceptError error remoteHost brokerService brokerService LOG info remoteHost remoteHost error getLocalizedMessage getRootCause error getMessage
String getPublishableConnectString String publishableConnectString publishedAddressPolicy getPublishableConnectString
DestinationView DestinationView Method getter findGetterMethod DestinationView getSortColumn DestinationView left DestinationView right getter Object leftValue getter invoke left getValue Object rightValue getter invoke right getValue leftValue Comparable rightValue Comparable Comparable rightValue compareTo leftValue Comparable leftValue compareTo rightValue
String level ClassLoader cl getClassLoader cl Class loggerClass getLoggerClass cl Class levelClass getLevelClass cl levelClass loggerClass String targetLevel level toUpperCase Locale US Method getRootLogger loggerClass getMethod Class Method setLevel loggerClass getMethod levelClass Object rootLogger getRootLogger invoke Object Method toLevel levelClass getMethod String Object newLevel toLevel invoke targetLevel newLevel newLevel targetLevel
IllegalArgumentException ClassLoader cl getClassLoader cl Class loggerClass getLoggerClass cl Class levelClass getLevelClass cl loggerClass levelClass String targetLevel level toUpperCase Locale US Method getLogger loggerClass getMethod String Method setLevel loggerClass getMethod levelClass Method toLevel levelClass getMethod String Object logger getLogger invoke loggerName logger Object newLevel toLevel invoke targetLevel
info setSelector sub getSelector addInactiveSubscription key info sub String userName brokerService isPopulateUserNameInMBeans context getUserName sub getConsumerInfo view DurableSubscriptionView brokerService context getClientId userName sub sub TopicSubscription view TopicSubscriptionView context getClientId userName TopicSubscription sub view SubscriptionView context getClientId userName sub registerSubscription objectName sub getConsumerInfo key view subscriptionMap put sub objectName objectName
temporaryQueues put key view queues put key view temporaryTopics put key view topics put key view view key registeredMBeans add key LOG warn key
view removeAndRemember temporaryQueues key view view removeAndRemember temporaryTopics key view key managementContext unregisterMBean key e LOG warn key LOG debug e view key view getSlowConsumerStrategy key key managementContext unregisterMBean key e LOG warn key
temporaryQueueProducers put key view queueProducers put key view temporaryTopicProducers put key view topicProducers put key view dynamicDestinationProducers put key view view key registeredMBeans add key LOG warn key
queueSubscribers put key view temporaryTopicSubscribers put key view durableTopicSubscribers put key view ObjectName inactiveName subscriptionKeys get subscriptionKey inactiveName inactiveDurableTopicSubscribers remove inactiveName registeredMBeans remove inactiveName managementContext unregisterMBean inactiveName
durableTopicSubscribers put key view ObjectName inactiveName subscriptionKeys get subscriptionKey inactiveName inactiveDurableTopicSubscribers remove inactiveName registeredMBeans remove inactiveName managementContext unregisterMBean inactiveName e LOG error subscriptionKey e topicSubscribers put key view managementContext view key
Map SubscriptionKey SubscriptionInfo subscriptions HashMap SubscriptionKey SubscriptionInfo Set ActiveMQDestination destinations destinationFactory getDestinations destinations ActiveMQDestination dest destinations dest SubscriptionInfo infos destinationFactory getAllDurableSubscriptions ActiveMQTopic dest infos i i infos i SubscriptionInfo info infos i SubscriptionKey key SubscriptionKey info key
ignore LOG debug namingServiceObjectName ignore brokerName MDC put brokerName server LOG debug MDC remove connectorServer start serverStub server toStub brokerName
MBeanServer mbeanServer getMBeanServer mbeanServer ObjectName ObjectName entry ObjectName actualName entry getValue actualName actualName
actualName actualName LOG debug actualName mbeanServer unregisterMBean actualName registeredMBeanNames clear JMXConnectorServer server connectorServer connectorServer server LOG debug server stop e LOG warn e getMessage
mbeanServer unregisterMBean actualName registeredMBeanNames clear JMXConnectorServer server connectorServer connectorServer server LOG debug server stop e LOG warn e getMessage namingServiceObjectName getMBeanServer namingServiceObjectName LOG debug namingServiceObjectName getMBeanServer invoke namingServiceObjectName
ObjectName name ObjectName actualName registeredMBeanNames get name actualName actualName registeredMBeanNames name
MBeanServer findMBeanServer MBeanServer result result findTigerMBeanServer result List MBeanServer list MBeanServerFactory findMBeanServer list list result list get result createMBeanServer result createMBeanServer e LOG error e e
purge originalMessageCount destination getDestinationStatistics getMessages getCount Queue destination purge
Destination destination destinationsLock writeLock lock Destination dest destinations get destination dest destination validateMaxDestinations destination
LOG debug broker getBrokerName destination destinationsLock writeLock lock Destination dest destinations remove destination dest updateRegionDestCounts destination Subscription iter iter Subscription sub iter next sub destination dest removeSubscription context sub destinationMap unsynchronizedRemove destination dest dest Queue Queue dest purge dispose context dest DestinationInterceptor destinationInterceptor broker getDestinationInterceptor
o DestinationFilter parseFilter info getDestination Subscription sub createSubscription context info List Destination addList ArrayList Destination destinationsLock readLock lock Destination dest Destination info getDestination addList add dest subscriptions put info getConsumerId sub destinationsLock readLock unlock List Destination removeList ArrayList Destination Destination dest addList dest addSubscription context sub
Destination dest Destination info addList add dest subscriptions put info getConsumerId sub destinationsLock readLock unlock List Destination removeList ArrayList Destination Destination dest addList dest addSubscription context sub removeList add dest e sub LOG debug sub dest getActiveMQDestination e getMessage
context info context context info info
inAckRange inAckRange ack destination Destination node getRegionDestination callDispatchMatched callDispatchMatched JMSException ack ack ack JMSException ack index inAckRange List MessageReference removeList ArrayList MessageReference MessageReference node
dispatchSelector setExclusiveConsumer exclusiveConsumer Subscription exclusiveConsumer Subscription s exclusiveConsumer s getConsumerInfo exclusiveConsumer getConsumerInfo exclusiveConsumer s dispatchSelector setExclusiveConsumer exclusiveConsumer ConsumerId consumerId sub getConsumerInfo getConsumerId getMessageGroupOwners removeConsumer consumerId markAsRedelivered MessageReference lastDeliveredRef List MessageReference unAckedMessages sub remove context MessageReference unAckedMessages
ProducerInfo producerInfo producerExchange getProducerState getInfo sendProducerAck message isResponseRequired producerInfo getWindowSize context isInRecoveryMode message broker getRoot messageExpired context message sendProducerAck ProducerAck ack ProducerAck producerInfo getProducerId message getSize context getConnection dispatchAsync ack memoryUsage isFull isFull context memoryUsage fastProducer context producerInfo context LOG warn memoryUsage getLimit getActiveMQDestination getQualifiedName destinationStatistics getMessages getCount
message message context context JMSException message LOG error broker messageExpired context message destinationStatistics getExpired increment doMessageSend producerExchangeCopy message ProducerAck ack ProducerAck producerInfo getProducerId message getSize context getConnection dispatchAsync ack
ProducerAck ack ProducerAck producerInfo getProducerId message getSize context getConnection dispatchAsync ack Response response Response response setCorrelationId message getCommandId context getConnection dispatchAsync response e context ExceptionResponse response ExceptionResponse e response setCorrelationId message getCommandId context getConnection dispatchAsync response LOG debug message e
ConnectionContext connectionContext createConnectionContext maxPageInAttempts max messagesLock readLock lock maxPageInAttempts messages size max messagesLock readLock unlock max maxPageInAttempts pageInMessages memoryUsage isFull max doBrowseList browseList max dispatchPendingList pagedInPendingDispatchLock connectionContext doBrowseList browseList max pagedInMessages pagedInMessagesLock connectionContext
it remove op run registerCallbackForNotFullNotification firstConsumer firstConsumer timeout timeBeforeDispatchStarts timeout timeBeforeDispatchStarts timeout LOG debug consumers size
registerCallbackForNotFullNotification firstConsumer firstConsumer timeout timeBeforeDispatchStarts timeout timeBeforeDispatchStarts timeout LOG debug consumers size LOG debug timeout consumers size timeBeforeDispatchStarts
LOG debug timeout consumers size timeBeforeDispatchStarts iteratingMutex wait timeBeforeDispatchStarts LOG debug timeBeforeDispatchStarts e LOG error e toString messagesLock readLock lock pageInMoreMessages messages isEmpty messagesLock readLock unlock pagedInPendingDispatchLock readLock lock pageInMoreMessages dispatchPendingList isEmpty
result add ref count messages release messagesLock writeLock unlock count pagedInMessagesLock writeLock lock resultList PrioritizedPendingList resultList OrderedPendingList ref result ref
context clientIdSet put clientId context InvalidClientIDException getBrokerName clientId oldContext getConnection getRemoteAddress clientIdSet put clientId context oldContext oldContext getConnection Connection connection oldContext getConnection LOG warn clientId oldContext getConnection connection TransportConnection TransportConnection transportConnection TransportConnection connection transportConnection stopAsync IOException clientId oldContext getConnection getConnectionId connection stop
node subscription node Message message node getMessage message node getRegionDestination DeadLetterStrategy deadLetterStrategy Destination node getRegionDestination getDeadLetterStrategy deadLetterStrategy deadLetterStrategy message ActiveMQDestination deadLetterDestination deadLetterStrategy getDeadLetterQueueFor message subscription deadLetterDestination message
dlqExpiration System currentTimeMillis stampAsExpired message message setExpiration dlqExpiration message message setPersistent message setProperty poisonCause message setProperty ActiveMQMessage DLQ_DELIVERY_FAILURE_CAUSE_PROPERTY poisonCause toString ConnectionContext adminContext context context context adminContext BrokerSupport getConnectionContext addDestination adminContext deadLetterDestination getActiveMQDestination setDLQ BrokerSupport resendNoCopy adminContext message deadLetterDestination
maxPurgedDests brokerService getMaxPurgedDestinationsPerSweep timeStamp System currentTimeMillis d d markForGC timeStamp d list add d maxPurgedDests list maxPurgedDests list ConnectionContext context BrokerSupport getConnectionContext context setBroker dest list Logger log LOG dest BaseDestination log BaseDestination dest getLog
d markForGC timeStamp d list add d list list ConnectionContext context BrokerSupport getConnectionContext context setBroker dest list Logger log LOG dest BaseDestination log BaseDestination dest getLog log info dest getName dest getInactiveTimeoutBeforeGC getRoot removeDestination context dest getActiveMQDestination isAllowTempAutoCreationOnSend
sub tempDest getConnectionId sub getConsumerInfo getConsumerId getConnectionId tempDest setConnectionId sub getConsumerInfo getConsumerId getConnectionId
sub tempDest getConnectionId sub getConsumerInfo getConsumerId getConnectionId tempDest setConnectionId sub getConsumerInfo getConsumerId getConnectionId
e context ExceptionResponse response ExceptionResponse e response setCorrelationId message getCommandId context getConnection dispatchAsync response registerCallbackForNotFullNotification context setDontSendReponse context count context
now System currentTimeMillis DurableTopicSubscription entry DurableTopicSubscription sub entry getValue sub offline sub getOfflineTimestamp offline now offline
DurableTopicSubscription entry DurableTopicSubscription sub entry getValue sub offline sub getOfflineTimestamp offline offline broker LOG info sub RemoveSubscriptionInfo info RemoveSubscriptionInfo info setClientId entry getKey getClientId info setSubscriptionName entry getKey getSubscriptionName ConnectionContext context ConnectionContext context setBroker broker context setClientId entry getKey getClientId removeSubscription context info
List Subscription addSubscriptionsForDestination context dest List Subscription rc addSubscriptionsForDestination context dest Set Subscription dupChecker HashSet Subscription rc TopicMessageStore store TopicMessageStore dest getMessageStore store SubscriptionInfo infos store getAllSubscriptions i i infos i SubscriptionInfo info infos i
isDuplicate node duplicate audit duplicate audit isDuplicate node duplicate
pruneLastCached MessageId it it MessageId lastPending it previous Object futureOrLong lastPending getFutureOrSequenceLong futureOrLong Future Future future Future futureOrLong future future get TimeUnit SECONDS setLastCachedId ASYNC_ADD lastPending
MessageId it it MessageId lastPending it previous Object futureOrLong lastPending getFutureOrSequenceLong futureOrLong Future Future future Future futureOrLong future future get TimeUnit SECONDS setLastCachedId ASYNC_ADD lastPending potentialDeadlock LOG debug potentialDeadlock
MessageId it it MessageId candidate it next Object futureOrLong candidate getFutureOrSequenceLong futureOrLong Future Future future Future futureOrLong future future it remove future get TimeUnit SECONDS it remove
expireOldMessages memoryList addMessageLast node node incrementReferenceCount flushToDisk ByteSequence bs getByteSequence node getMessage getDiskList addLast node getMessageId toString bs
expireOldMessages memoryList addMessageFirst node node incrementReferenceCount flushToDisk systemUsage getTempUsage waitForSpace node decrementReferenceCount ByteSequence bs getByteSequence node getMessage Object locator getDiskList addFirst node getMessageId toString bs node getMessageId setPlistLocator locator
Map Connection List Subscription abortMap HashMap Connection List Subscription Subscription entry ConnectionContext connectionContext entry getValue context connectionContext Connection connection connectionContext getConnection connection LOG debug connectionContext abortMap connection abortMap put connection ArrayList Subscription abortMap get connection add entry getKey Connection List Subscription entry abortMap Connection connection entry getKey List Subscription subscriptions entry getValue
abortMap connection abortMap put connection ArrayList Subscription abortMap get connection add entry getKey Connection List Subscription entry abortMap Connection connection entry getKey List Subscription subscriptions entry getValue LOG info connection getConnectionId subscriptions size LOG Subscription subscription subscriptions LOG trace Object connection getConnectionId subscription getConsumerInfo getConsumerId subscription getActiveMQDestination connection serviceException InactivityIOException subscriptions size maxSlowCount maxSlowDuration
Subscription subscription subscriptions LOG trace Object connection getConnectionId subscription getConsumerInfo getConsumerId subscription getActiveMQDestination connection serviceException InactivityIOException subscriptions size maxSlowCount maxSlowDuration LOG info connection getConnectionId subscriptions size Subscription subscription subscriptions Subscription subToClose subscription LOG info subscription getConsumerInfo getConsumerId subscription getActiveMQDestination ConsumerControl stopConsumer ConsumerControl
e LOG info connection getConnectionId subscriptions size Subscription subscription subscriptions Subscription subToClose subscription LOG info subscription getConsumerInfo getConsumerId subscription getActiveMQDestination ConsumerControl stopConsumer ConsumerControl stopConsumer setConsumerId subscription getConsumerInfo getConsumerId stopConsumer setClose connection dispatchAsync stopConsumer e LOG info subscription getConsumerInfo getConsumerId e
Subscription subscription Subscription subToClose subscription LOG info subscription getConsumerInfo getConsumerId subscription getActiveMQDestination ConsumerControl stopConsumer ConsumerControl stopConsumer setConsumerId subscription getConsumerInfo getConsumerId stopConsumer setClose connection dispatchAsync stopConsumer e LOG info subscription getConsumerInfo getConsumerId e
result result result
result
destination getActiveMQDestination Destination mirrorDestination getMirrorDestination destination mirrorDestination destination send context message message setDestination mirrorDestination getActiveMQDestination mirrorDestination send context message message message copy message setDestination destination getActiveMQDestination message setMemoryUsage send context message
msg setDestination replyTo msg setResponseRequired msg setProducerId producerId msg setProperty job getJobId originalFlowControl context isProducerFlowControl ProducerBrokerExchange producerExchange ProducerBrokerExchange producerExchange setConnectionContext context producerExchange setMutable producerExchange setProducerState ProducerState ProducerInfo context setProducerFlowControl next send producerExchange msg context setProducerFlowControl originalFlowControl
name lock lock InMemoryJobScheduler result schedulers get name result
name result lock lock InMemoryJobScheduler scheduler schedulers remove name result scheduler result
message String msg msg message getMessage toString
messageReference String msg msg messageReference getMessage toString
messageReference String msg msg messageReference getMessage toString
messageReference String msg msg messageReference getMessage toString
messageReference String msg msg messageReference getMessage toString
destination subs LOG info destination getName StringBuffer buf StringBuffer buf append subs getConsumerInfo getConsumerId getConnectionId buf append buf append subs getConsumerInfo getConsumerId getSessionId buf append
Destination regionDestination Destination messageReference getRegionDestination RedeliveryPolicy redeliveryPolicy redeliveryPolicyMap getEntryFor regionDestination getActiveMQDestination redeliveryPolicy maximumRedeliveries redeliveryPolicy getMaximumRedeliveries redeliveryCount messageReference getRedeliveryCounter RedeliveryPolicy maximumRedeliveries redeliveryCount maximumRedeliveries delay redeliveryPolicy getInitialRedeliveryDelay redeliveryCount delay redeliveryPolicy getNextRedeliveryDelay delay scheduleRedelivery context messageReference delay redeliveryCount sendToDeadLetterQueue context messageReference subscription poisonCause
RedeliveryPolicy redeliveryPolicy redeliveryPolicyMap getEntryFor regionDestination getActiveMQDestination redeliveryPolicy maximumRedeliveries redeliveryPolicy getMaximumRedeliveries redeliveryCount messageReference getRedeliveryCounter RedeliveryPolicy maximumRedeliveries redeliveryCount maximumRedeliveries delay redeliveryPolicy getInitialRedeliveryDelay redeliveryCount delay redeliveryPolicy getNextRedeliveryDelay delay scheduleRedelivery context messageReference delay redeliveryCount sendToDeadLetterQueue context messageReference subscription poisonCause LOG debug maximumRedeliveries messageReference getMessageId sendToDeadLetterQueue context messageReference subscription poisonCause
maximumRedeliveries redeliveryCount maximumRedeliveries delay redeliveryPolicy getInitialRedeliveryDelay redeliveryCount delay redeliveryPolicy getNextRedeliveryDelay delay scheduleRedelivery context messageReference delay redeliveryCount sendToDeadLetterQueue context messageReference subscription poisonCause LOG debug maximumRedeliveries messageReference getMessageId sendToDeadLetterQueue context messageReference subscription poisonCause LOG debug messageReference getMessageId regionDestination getActiveMQDestination
duplexInboundLocalBroker NetworkBridgeFactory createLocalAsyncTransport brokerService getBroker getVmConnectorURI duplexInboundLocalBroker o Command command Command o serviceLocalCommand command error serviceLocalException error duplexInboundLocalBroker start o Command command Command o serviceLocalCommand command error
duplexInboundLocalBroker NetworkBridgeFactory createLocalAsyncTransport brokerService getBroker getVmConnectorURI duplexInboundLocalBroker o Command command Command o serviceLocalCommand command error serviceLocalException error duplexInboundLocalBroker start o Command command Command o serviceLocalCommand command error
duplexInboundLocalBroker start localBroker o Command command Command o serviceLocalCommand command error futureLocalBrokerInfo LOG info localBroker error getMessage LOG debug error futureLocalBrokerInfo cancel serviceLocalException error o
localBroker o Command command Command o serviceLocalCommand command error futureLocalBrokerInfo LOG info localBroker error getMessage LOG debug error futureLocalBrokerInfo cancel serviceLocalException error o Command command Command o
l l onStop LOG trace Object configuration getBrokerName remoteBrokerName brokerService getBroker removeBroker remoteBrokerInfo brokerService getBroker networkBridgeStopped remoteBrokerInfo remoteBridgeStarted set CountDownLatch sendShutdown CountDownLatch brokerService Runnable serialExecutor shutdown serialExecutor List Runnable pendingTasks serialExecutor shutdownNow
LOG trace Object configuration getBrokerName remoteBrokerName brokerService getBroker removeBroker remoteBrokerInfo brokerService getBroker networkBridgeStopped remoteBrokerInfo remoteBridgeStarted set CountDownLatch sendShutdown CountDownLatch brokerService Runnable serialExecutor shutdown serialExecutor List Runnable pendingTasks serialExecutor shutdownNow LOG info pendingTasks staticDestinationsLatch countDown syncExecutor shutdown syncExecutor
Properties props props MarshallingSupport stringToProperties remoteBrokerInfo getNetworkProperties IntrospectionSupport getProperties configuration props configuration getExcludedDestinations excludedDestinations configuration getExcludedDestinations toArray ActiveMQDestination configuration getExcludedDestinations size configuration getStaticallyIncludedDestinations staticallyIncludedDestinations configuration getStaticallyIncludedDestinations toArray ActiveMQDestination configuration getStaticallyIncludedDestinations size configuration getDynamicallyIncludedDestinations dynamicallyIncludedDestinations configuration getDynamicallyIncludedDestinations toArray ActiveMQDestination configuration getDynamicallyIncludedDestinations size
sub String clientId String subName clientId sub subName String newClientId getProxyBridgeClientId clientId SubscriptionInfo newSubInfo SubscriptionInfo newClientId subName sub getDurableRemoteSubs add newSubInfo
command safeWaitUntilStarted MessageDispatch md MessageDispatch command serviceRemoteConsumerAdvisory md getMessage getDataStructure ackAdvisory md getMessage command futureRemoteBrokerInfo set BrokerInfo command command BrokerSubscriptionInfo BrokerSubscriptionInfo brokerSubscriptionInfo BrokerSubscriptionInfo command staticDestinationsLatch await BrokerSubscriptionInfo subInfo brokerSubscriptionInfo
command ConnectionError ConnectionError ce ConnectionError command serviceRemoteException ce getException LOG trace configuration getBrokerName command getDataStructureType command ActiveMQMessage message ActiveMQMessage command message serviceRemoteConsumerAdvisory message getDataStructure ackAdvisory message message
reply setCorrelationId message getCommandId remoteBroker oneway reply command ConnectionInfo duplexInitiatingConnection duplexInitiatingConnection processAddConnection ConnectionInfo command localBroker oneway command localBroker oneway command ack command DemandSubscription localSub subscriptionMapByRemoteId get ack getConsumerId localSub
data networkTTL configuration getConsumerTTL data ConsumerInfo ConsumerInfo info ConsumerInfo data BrokerId path info getBrokerPath info
LOG debug Object configuration getBrokerName remoteBrokerName info info getDestination LOG debug Object configuration getBrokerName remoteBrokerName info getDestination info info addConsumerInfo info addConsumerInfo info data DestinationInfo DestinationInfo destInfo DestinationInfo data BrokerId path destInfo getBrokerPath path networkTTL path networkTTL LOG debug Object configuration getBrokerName destInfo networkTTL
error error messageDispatch LOG warn messageDispatch getMessage getMessageId error MessageAck poisonAck MessageAck messageDispatch MessageAck POSION_ACK_TYPE poisonAck setPoisonCause error localBroker oneway poisonAck ioe LOG error ioe fireFailedForwardAdvisory messageDispatch error LOG warn error LOG info Object localBroker remoteBroker error
Response response future getResult response ExceptionResponse er ExceptionResponse response serviceLocalException md er getException localBroker oneway MessageAck md MessageAck INDIVIDUAL_ACK_TYPE networkBridgeStatistics getDequeues increment e serviceLocalException md e sub decrementOutstandingResponses remoteBroker oneway message
ActiveMQDestination dests staticallyIncludedDestinations dests ActiveMQDestination dest dests dest DemandSubscription sub createDemandSubscription dest sub sub setStaticallyIncluded addSubscription sub e LOG error dest e LOG trace configuration getBrokerName dest LOG info configuration getBrokerName dest
addRemoteBrokerToBrokerPath info DemandSubscription sub createDemandSubscription info sub sub undoMapRegistration sub consumerInfo sub getRemoteInfo info getSubscriptionName info getSubscriptionName BrokerId path info getBrokerPath addProxyNetworkSubscriptionBrokerPath sub path consumerInfo getSubscriptionName sub getRemoteInfo getClientId info getClientId info getSubscriptionName addProxyNetworkSubscriptionClientId sub sub getRemoteInfo getClientId consumerInfo getSubscriptionName sub getDurableRemoteSubs add SubscriptionInfo sub getRemoteInfo getClientId consumerInfo getSubscriptionName addSubscription sub
event String url event getServiceName url URI uri uri URI url e LOG warn url e uri LOG debug uri uri
String url event getServiceName url URI uri uri URI url e LOG warn url e uri LOG debug uri uri LOG debug uri uri event
LOG warn url e uri LOG debug uri uri LOG debug uri uri LOG debug uri URI connectUri uri connectUri URISupport applyParameters connectUri parameters DISCOVERED_OPTION_PREFIX e
uri LOG debug uri URI connectUri uri connectUri URISupport applyParameters connectUri parameters DISCOVERED_OPTION_PREFIX e LOG warn Object parameters connectUri e LOG info localURI connectUri Transport remoteTransport Transport localTransport getSslContext SslContext setCurrentSslContext getSslContext
LOG info localURI connectUri Transport remoteTransport Transport localTransport getSslContext SslContext setCurrentSslContext getSslContext SslContext setCurrentSslContext getBrokerService getSslContext remoteTransport TransportFactory connect connectUri e LOG warn connectUri e getMessage LOG debug e discoveryAgent serviceFailed event
getSslContext SslContext setCurrentSslContext getSslContext SslContext setCurrentSslContext getBrokerService getSslContext remoteTransport TransportFactory connect connectUri e LOG warn connectUri e getMessage LOG debug e discoveryAgent serviceFailed event e1 LOG debug e1 getMessage e1
discoveryAgent serviceFailed event e1 LOG debug e1 getMessage e1 localTransport createLocalTransport e ServiceSupport dispose remoteTransport LOG warn localURI e getMessage LOG debug e discoveryAgent serviceFailed event e1 LOG debug e1 getMessage e1
localTransport createLocalTransport e ServiceSupport dispose remoteTransport LOG warn localURI e getMessage LOG debug e discoveryAgent serviceFailed event e1 LOG debug e1 getMessage e1 SslContext setCurrentSslContext NetworkBridge bridge createBridge localTransport remoteTransport event
dest RegionBroker regionBroker RegionBroker brokerService getRegionBroker TopicRegion topicRegion TopicRegion regionBroker getTopicRegion String candidateSubName getSubscriberName dest subscription topicRegion String subName subscription getConsumerInfo getSubscriptionName String clientId subscription getContext getClientId subName subName candidateSubName clientId DemandSubscription sub createDemandSubscription dest subName sub sub getLocalInfo setSubscriptionName getSubscriberName dest sub setStaticallyIncluded addSubscription sub
e LOG error dest e LOG trace dest dest dest RegionBroker regionBroker RegionBroker brokerService getRegionBroker TopicRegion topicRegion TopicRegion regionBroker getTopicRegion String candidateSubName getSubscriberName dest subscription topicRegion String subName subscription getConsumerInfo getSubscriptionName subName subName candidateSubName subscription DurableTopicSubscription DurableTopicSubscription durableSub DurableTopicSubscription subscription durableSub RemoveSubscriptionInfo sending RemoveSubscriptionInfo
error LOG info error getMessage
error LOG info error getMessage
dequeueCounter incrementAndGet localBroker oneway MessageAck md MessageAck STANDARD_ACK_TYPE e serviceLocalException e remoteBroker asyncRequest message callback command localBrokerInfo BrokerInfo command localBrokerId localBrokerInfo getBrokerId localBrokerId LOG info ServiceSupport dispose
user user env put Context SECURITY_PRINCIPAL user Exception password password env put Context SECURITY_CREDENTIALS password Exception isConnected isConnected context InitialDirContext env isConnected
NetworkConnector connector getBrokerService addNetworkConnector connectorURI connector setDynamicOnly isDynamicOnly connector setDecreaseNetworkConsumerPriority isDecreaseNetworkConsumerPriority connector setNetworkTTL getNetworkTTL connector setConsumerTTL getConsumerTTL connector setMessageTTL getMessageTTL connector setConduitSubscriptions isConduitSubscriptions connector setExcludedDestinations getExcludedDestinations connector setDynamicallyIncludedDestinations getDynamicallyIncludedDestinations connector setDuplex isDuplex connector setLocalUri getBrokerService getVmConnectorURI connector setBrokerName getBrokerService getBrokerName connector setDurableDestinations getBrokerService getBroker getDurableDestinations connectorMap put connectorURI connector referenceMap put connectorURI
uuidMap uuid LOG warn uuid URI connectorURI uuidMap get uuid connectorMap connectorURI LOG warn connectorURI referenceCount referenceMap get connectorURI referenceMap put connectorURI referenceCount uuidMap remove uuid LOG debug Object connectorURI uuid referenceCount referenceCount NetworkConnector connector connectorMap remove connectorURI connector stop
URI result Attributes attributes result getAttributes String address String attributes get get String port String attributes get get String protocol String attributes get get URI connectorURI URI protocol address port
String result String uuid result getNameInNamespace
Destination DestinationBridge Destination DestinationBridge serialVersionUID Map Entry Destination DestinationBridge Iterator Map Entry Destination DestinationBridge iter entrySet iterator Map Entry Destination DestinationBridge lru iter next remove lru getKey DestinationBridge bridge lru getValue bridge stop
connection connection LOG info connection toString replyToBridges clear connection bridge bridge stop doInitializeConnection
doInitializeConnection e LOG error e bridge bridge stop e
initializeLocalConnection localSideInitialized set initializeForeignConnection foreignSideInitialized set bridge bridge start bridge bridge start
QueueSession replyToConsumerSession QueueConnection replyToConsumerConnection createQueueSession Session AUTO_ACKNOWLEDGE Queue replyToConsumerQueue replyToConsumerSession createTemporaryQueue replyToConsumerSession close bridge setConsumerQueue replyToConsumerQueue bridge setProducerQueue replyToProducerQueue bridge setProducerConnection QueueConnection replyToProducerConnection bridge setConsumerConnection QueueConnection replyToConsumerConnection bridge setDoHandleReplyTo bridge bridge setJmsMessageConvertor getInboundMessageConvertor bridge setJmsConnector bridge start
QueueSession replyToConsumerSession QueueConnection replyToConsumerConnection createQueueSession Session AUTO_ACKNOWLEDGE Queue replyToConsumerQueue replyToConsumerSession createTemporaryQueue replyToConsumerSession close bridge setConsumerQueue replyToConsumerQueue bridge setProducerQueue replyToProducerQueue bridge setProducerConnection QueueConnection replyToProducerConnection bridge setConsumerConnection QueueConnection replyToConsumerConnection bridge setDoHandleReplyTo bridge bridge setJmsMessageConvertor getInboundMessageConvertor bridge setJmsConnector bridge start LOG info replyToProducerQueue
bridge getConsumerQueue OutboundQueueBridge bridge OutboundQueueBridge replyToBridges get replyToProducerQueue bridge bridge OutboundQueueBridge QueueSession replyToConsumerSession QueueConnection replyToConsumerConnection createQueueSession Session AUTO_ACKNOWLEDGE Queue replyToConsumerQueue replyToConsumerSession createTemporaryQueue replyToConsumerSession close bridge setConsumerQueue replyToConsumerQueue bridge setProducerQueue replyToProducerQueue bridge setProducerConnection QueueConnection replyToProducerConnection
OutboundQueueBridge bridge OutboundQueueBridge replyToBridges get replyToProducerQueue bridge bridge OutboundQueueBridge QueueSession replyToConsumerSession QueueConnection replyToConsumerConnection createQueueSession Session AUTO_ACKNOWLEDGE Queue replyToConsumerQueue replyToConsumerSession createTemporaryQueue replyToConsumerSession close bridge setConsumerQueue replyToConsumerQueue bridge setProducerQueue replyToProducerQueue bridge setProducerConnection QueueConnection replyToProducerConnection bridge setConsumerConnection QueueConnection replyToConsumerConnection
result session createQueue queueName JMSException e1 String errStr queueName LOG error errStr e JMSException jmsEx JMSException errStr jmsEx setLinkedException e1 jmsEx result session createQueue queueName JMSException e result jndiOutboundTemplate lookup queueName Queue e1
TopicSession replyToConsumerSession TopicConnection replyToConsumerConnection createTopicSession Session AUTO_ACKNOWLEDGE Topic replyToConsumerTopic replyToConsumerSession createTemporaryTopic replyToConsumerSession close bridge setConsumerTopic replyToConsumerTopic bridge setProducerTopic replyToProducerTopic bridge setProducerConnection TopicConnection replyToProducerConnection bridge setConsumerConnection TopicConnection replyToConsumerConnection bridge setDoHandleReplyTo bridge bridge setJmsMessageConvertor getInboundMessageConvertor bridge setJmsConnector bridge start
TopicSession replyToConsumerSession TopicConnection replyToConsumerConnection createTopicSession Session AUTO_ACKNOWLEDGE Topic replyToConsumerTopic replyToConsumerSession createTemporaryTopic replyToConsumerSession close bridge setConsumerTopic replyToConsumerTopic bridge setProducerTopic replyToProducerTopic bridge setProducerConnection TopicConnection replyToProducerConnection bridge setConsumerConnection TopicConnection replyToConsumerConnection bridge setDoHandleReplyTo bridge bridge setJmsMessageConvertor getInboundMessageConvertor bridge setJmsConnector bridge start LOG info replyToProducerTopic
bridge getConsumerTopic OutboundTopicBridge bridge OutboundTopicBridge replyToBridges get replyToProducerTopic bridge bridge OutboundTopicBridge TopicSession replyToConsumerSession TopicConnection replyToConsumerConnection createTopicSession Session AUTO_ACKNOWLEDGE Topic replyToConsumerTopic replyToConsumerSession createTemporaryTopic replyToConsumerSession close bridge setConsumerTopic replyToConsumerTopic bridge setProducerTopic replyToProducerTopic bridge setProducerConnection TopicConnection replyToProducerConnection
OutboundTopicBridge bridge OutboundTopicBridge replyToBridges get replyToProducerTopic bridge bridge OutboundTopicBridge TopicSession replyToConsumerSession TopicConnection replyToConsumerConnection createTopicSession Session AUTO_ACKNOWLEDGE Topic replyToConsumerTopic replyToConsumerSession createTemporaryTopic replyToConsumerSession close bridge setConsumerTopic replyToConsumerTopic bridge setProducerTopic replyToProducerTopic bridge setProducerConnection TopicConnection replyToProducerConnection bridge setConsumerConnection TopicConnection replyToConsumerConnection
result session createTopic topicName JMSException e1 String errStr topicName LOG error errStr e JMSException jmsEx JMSException errStr jmsEx setLinkedException e1 jmsEx result session createTopic topicName JMSException e result jndiOutboundTemplate lookup topicName Topic e1
skipMessage msgRef skipMessage msgRef skipMessage msgRef skipMessage msgRef skipMessage msgRef dropped next sendToDeadLetterQueue ctx msgRef subscription poisonCause dropped
broker ForcePersistencyModeBroker pB ForcePersistencyModeBroker broker pB setPersistenceFlag isPersistenceForced
info info getDestination info getDestination info String destinationName info getDestination getQualifiedName
info getDestination info getDestination info String destinationName info getDestination getQualifiedName LOG debug info getSelector destinationName String selector info getSelector MATCH_EVERYTHING info getSelector selector Set String selectors subSelectorCache get destinationName selectors selectors Collections synchronizedSet HashSet String MATCH_EVERYTHING selector containsMatchEverything selectors contains MATCH_EVERYTHING selectors clear containsMatchEverything selectors add MATCH_EVERYTHING LOG debug selector selectors add selector
info info getDestination info getDestination String destinationName info getDestination getQualifiedName Set String selectors subSelectorCache get destinationName info selectors removed selectors remove MATCH_EVERYTHING
persistFile persistFile fis persistFile ObjectInputStream in SubSelectorClassObjectInputStream fis LOG debug subSelectorCache ConcurrentHashMap String Set String in readObject LOG StringBuilder sb StringBuilder sb append append persistFile getAbsolutePath append sb append subSelectorCache k v sb append append k append append v append
fis persistFile ObjectInputStream in SubSelectorClassObjectInputStream fis LOG debug subSelectorCache ConcurrentHashMap String Set String in readObject LOG StringBuilder sb StringBuilder sb append append persistFile getAbsolutePath append sb append subSelectorCache k v sb append append k append append v append LOG debug sb toString
LOG debug subSelectorCache ConcurrentHashMap String Set String in readObject LOG StringBuilder sb StringBuilder sb append append persistFile getAbsolutePath append sb append subSelectorCache k v sb append append k append append v append LOG debug sb toString ex LOG error ex in close ex
LOG debug FileOutputStream fos FileOutputStream persistFile ObjectOutputStream out ObjectOutputStream fos out writeObject subSelectorCache out flush out close ex LOG error ex fos close ex
start Transport localTransport ProxyConnection connection Transport remoteTransport createRemoteTransport localTransport connection ProxyConnection localTransport remoteTransport connection start connections add connection e onAcceptError e connection connection stop
Transport localTransport ProxyConnection connection Transport remoteTransport createRemoteTransport localTransport connection ProxyConnection localTransport remoteTransport connection start connections add connection e onAcceptError e connection connection stop eoc LOG error eoc onAcceptError error
NamingEnumeration results context search destinationBase roleBase constraints results SearchResult result SearchResult results next Attributes attrs result getAttributes attrs acls addAttributeValues roleAttribute attrs acls String iter acls iter String roleName iter next LdapName ldapname LdapName roleName Rdn rdn ldapname getRdn ldapname size LOG debug rdn getValue toString roles add GroupPrincipal rdn getValue toString roles
DirContext currentContext open entries clear SearchControls constraints SearchControls constraints setSearchScope SearchControls SUBTREE_SCOPE DefaultAuthorizationMap newMap DefaultAuthorizationMap permissionType processQueryResults newMap currentContext search queueSearchBase getFilterForPermissionType permissionType constraints DestinationType QUEUE permissionType e LOG error Object queueSearchBase getFilterForPermissionType permissionType e permissionType processQueryResults newMap currentContext search topicSearchBase getFilterForPermissionType permissionType constraints DestinationType TOPIC permissionType e
DefaultAuthorizationMap newMap DefaultAuthorizationMap permissionType processQueryResults newMap currentContext search queueSearchBase getFilterForPermissionType permissionType constraints DestinationType QUEUE permissionType e LOG error Object queueSearchBase getFilterForPermissionType permissionType e permissionType processQueryResults newMap currentContext search topicSearchBase getFilterForPermissionType permissionType constraints DestinationType TOPIC permissionType e LOG error Object topicSearchBase getFilterForPermissionType permissionType e permissionType processQueryResults newMap currentContext search tempSearchBase getFilterForPermissionType permissionType constraints DestinationType TEMP permissionType e
group Attribute name memberAttributes get groupNameAttribute name LOG error Object memberDn groupNameAttribute result getNameInNamespace principalName String name get user Attribute name memberAttributes get userNameAttribute name LOG error Object memberDn userNameAttribute result getNameInNamespace principalName String name get group
principalName String name get group principalName memberDn replaceAll group group LOG error memberDn result getNameInNamespace principalName DefaultAuthorizationMap map map get group members add DefaultAuthorizationMap createGroupPrincipal principalName map getGroupClass e NamingException ne NamingException principalName map getGroupClass ne initCause e ne
LOG error e context context context context createContext LOG debug query
namingEvent Binding oldBinding namingEvent getOldBinding Binding newBinding namingEvent getNewBinding
ActiveMQDestination oldDest formatDestination oldName destinationType LdapName newName LdapName newBinding getName ActiveMQDestination newDest formatDestination newName destinationType permissionType objectRemoved namingEvent destinationType permissionType SearchControls controls SearchControls controls setSearchScope SearchControls OBJECT_SCOPE matchedToType newPermissionType NamingEnumeration SearchResult results context search newName getFilterForPermissionType newPermissionType controls results objectAdded namingEvent destinationType newPermissionType matchedToType matchedToType
LOG error oldBinding getName newBinding getName oldDest newDest AuthorizationEntry entry entries remove oldDest entry entry setDestination newDest DefaultAuthorizationMap map map get map put newDest entry map remove oldDest entry entries put newDest entry LOG warn oldDest
LOG error oldBinding getName newBinding getName oldDest newDest AuthorizationEntry entry entries remove oldDest entry entry setDestination newDest DefaultAuthorizationMap map map get map put newDest entry map remove oldDest entry entries put newDest entry LOG warn oldDest e LOG error Object oldBinding getName newBinding getName e
context
warned locked lockFile lock warned TimeUnit MILLISECONDS sleep lockable lockable getLockKeepAlivePeriod locked keepAlive warned LOG info lockFileName warned
TcpTransportFactory detectedTransportFactory transportFactory WireFormatFactory detectedWireFormatFactory wireFormatFactory found
BrokerService registry brokerName waitForStart BrokerService broker registry broker registry lookup brokerName broker waitForStart expiry System currentTimeMillis waitForStart broker broker System currentTimeMillis expiry timeout Math max expiry System currentTimeMillis broker
BrokerService registry brokerName waitForStart BrokerService broker registry getRegistryMutext broker registry lookup brokerName broker waitForStart expiry System currentTimeMillis waitForStart broker broker System currentTimeMillis expiry timeout Math max expiry System currentTimeMillis broker LOG debug brokerName registry getRegistryMutext wait timeout broker registry lookup brokerName broker broker
location String host extractHost location
host SERVERS remove host TransportConnector connector CONNECTORS remove host connector
allowIOResumption
Throwable cause exception cause cause String message cause getMessage message message LOG info exception exception allowIOResumption cause cause getCause Throwable cause exception cause cause String message cause getMessage message message
allowIOResumption cause cause getCause Throwable cause exception cause cause String message cause getMessage message message message LOG info exception cause cause cause getCause
Throwable cause exception cause cause String message cause getMessage message message message LOG info exception cause cause cause getCause LOG info broker exception exception
ServiceStopper stopper ServiceStopper broker stopAllConnectors stopper LOG info broker e LOG warn e allowIOResumption LOG info
modified File localFile File file getAbsolutePath localFile localFile
String logWriterName String uri path logWriterName ClassLoader classLoader Thread currentThread getContextClassLoader classLoader classLoader getClass getClassLoader InputStream in classLoader getResourceAsStream uri in in LogWriterFinder getClassLoader getResourceAsStream uri in
sub sub getConsumerInfo ConsumerInfo ci sub getConsumerInfo copy ci setClientId key getClientId subscriptionInfos add ci sub sub sub getConsumerInfo subscriptionInfos add sub getConsumerInfo copy AdvisoryBroker ab AdvisoryBroker brokerService getBroker getAdaptor AdvisoryBroker ab brokerService ConsumerInfo info ab info subscriptionInfos add info copy LOG warn
t LOG info t getKey t getValue size t getValue
task execute t throwable t t t throwable t t t throwable t IOExceptionSupport create t t throwable persistenceAdapter commitTransaction context
session close session LOG info connection close connection LOG info broker stop broker waitUntilStopped broker
TextMessage message session createTextMessage
Message outbound Message session createTextMessage session createTextMessage beginTx producer send outbound commitTx beginTx producer send session createTextMessage rollbackTx beginTx producer send outbound commitTx beginTx ArrayList Message messages ArrayList Message LOG info Message message consumer receive messages add message
beginTx producer send session createTextMessage rollbackTx beginTx producer send outbound commitTx beginTx ArrayList Message messages ArrayList Message LOG info Message message consumer receive messages add message LOG info message LOG info message consumer receive messages add message
Message outbound Message session createTextMessage beginTx producer send outbound outbound acknowledge commitTx outbound acknowledge beginTx ArrayList Message messages ArrayList Message LOG info Message message consumer receive messages add message
Message outbound Message session createTextMessage session createTextMessage beginTx producer send outbound commitTx beginTx producer send session createTextMessage consumer close reconnectSession producer send outbound commitTx ArrayList Message messages ArrayList Message LOG info beginTx Message message consumer receive messages add message
beginTx producer send session createTextMessage consumer close reconnectSession producer send outbound commitTx ArrayList Message messages ArrayList Message LOG info beginTx Message message consumer receive messages add message LOG info message LOG info message consumer receive messages add message
producer send outbound commitTx beginTx producer send session createTextMessage consumer close session close reconnect beginTx producer send outbound commitTx ArrayList Message messages ArrayList Message LOG info beginTx Message message consumer receive messages add message
consumer close session close reconnect beginTx producer send outbound commitTx ArrayList Message messages ArrayList Message LOG info beginTx Message message consumer receive messages add message LOG info message LOG info message consumer receive messages add message
beginTx consumer commitTx beginTx producer send outbound producer send outbound commitTx LOG info outbound LOG info outbound beginTx TextMessage message TextMessage consumer receive assertEquals outbound getText message getText consumer close commitTx consumer resourceProvider createConsumer session destination
ArrayList String list ArrayList String list add Message outbound session createObjectMessage list outbound setStringProperty beginTx producer send outbound commitTx LOG info beginTx Message message consumer receive List String body assertReceivedObjectMessageWithListBody message message setStringProperty fail
List String message assertNotNull message assertEquals message getStringProperty assertTrue message message ObjectMessage ObjectMessage objectMessage ObjectMessage message List String body List String objectMessage getObject
brokerService BrokerService brokerService setPersistent brokerService
String clientID ActiveMQConnectionFactory factory ActiveMQConnectionFactory stealableConnectionURI Connection connection1 factory createConnection connection1 setClientID clientID connection1 start Connection connection2 factory createConnection connection2 setClientID clientID connection2 start e LOG info e getMessage LOG info e fail
lists i store getPList String valueOf i Thread currentThread setName threadName executor Executors newFixedThreadPool String threadName Thread currentThread getName i i i PList candidate lists i numLists Thread currentThread setName candidate getName candidate Object last candidate addLast String valueOf i payload getFirst candidate assertTrue candidate remove last
String vmUri
String vmUri
Destination destination getMandatoryBean Destination ConnectionFactory factoryCON getMandatoryBean ConnectionFactory Connection consumerConnection factoryCON createConnection consumerConnection start Session consumerSession consumerConnection createSession Session AUTO_ACKNOWLEDGE
MockEndpoint result resolveMandatoryEndpoint MockEndpoint result expectedBodiesReceived expectedBody result message header isEqualTo Destination destination getMandatoryBean Destination ConnectionFactory factory getMandatoryBean ConnectionFactory Connection connection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination ObjectMessage message session createObjectMessage expectedBody message setStringProperty producer send message result assertIsSatisfied
Destination destination getMandatoryBean Destination ConnectionFactory factory getMandatoryBean ConnectionFactory ProducerTemplate template getMandatoryBean ProducerTemplate assertNotNull template Connection connection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE
Destination destination getMandatoryBean Destination ConnectionFactory factory getMandatoryBean ConnectionFactory ProducerTemplate template getMandatoryBean ProducerTemplate assertNotNull template Connection connection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE LOG info destination MessageConsumer consumer session createConsumer destination template sendBody expectedBody Message message consumer receive assertNotNull destination message TextMessage textMessage assertIsInstanceOf TextMessage message assertEquals expectedBody textMessage getText
jdbcConn count ResultSet resultSet jdbcConn createStatement executeQuery resultSet count
qName ActiveMQConnectionFactory factory ActiveMQConnectionFactory factory setWatchTopicAdvisories Connection connection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createConsumer ActiveMQQueue qName Message message consumer receive
jdbcConn count ResultSet resultSet jdbcConn createStatement executeQuery resultSet count
expectedEndpoint expectedMessageCount expectedEndpoint message header isEqualTo MockEndpoint assertIsSatisfied camelContext List Exchange list expectedEndpoint getReceivedExchanges Exchange exchange list Object body exchange getIn getBody
MockEndpoint resultEndpoint resolveMandatoryEndpoint MockEndpoint resultEndpoint expectedBodiesReceived expectedBody AssertionClause firstMessageExpectations resultEndpoint message firstMessageExpectations header isEqualTo firstMessageExpectations header isEqualTo replyQueue firstMessageExpectations header isEqualTo correlationID firstMessageExpectations header isEqualTo messageType template sendBodyAndHeader expectedBody resultEndpoint assertIsSatisfied List Exchange list resultEndpoint getReceivedExchanges Exchange exchange list get Object replyTo exchange getIn getHeader
firstMessage header isEqualTo messageType firstMessage header isEqualTo groupID Map String Object headers HashMap String Object headers put headers put replyQueueName headers put correlationID headers put messageType headers put groupID template sendBodyAndHeaders expectedBody headers resultEndpoint assertIsSatisfied List Exchange list resultEndpoint getReceivedExchanges Exchange exchange list get Message in exchange getIn Object replyTo in getHeader
Thread sleep LOG debug broker getAdminView addQueue Thread sleep List BrowsableEndpoint endpoints getEndpoints camelContext BrowsableEndpoint BrowsableEndpoint endpoints
ProducerTemplate requester senderContext createProducerTemplate LOG info String response String requester requestBody fromEndpoint assertNotNull response
ProducerTemplate requester senderContext createProducerTemplate LOG info String response String requester requestBody fromEndpoint assertNotNull response LOG info response TimeUnit SECONDS sleep LOG info shutdownBrokerA createBrokerA LOG info response String requester requestBody fromEndpoint assertNotNull response
headers put replyQueueName headers put correlationID headers put groupID reply exchange exchange getIn setBody Map String Object headers HashMap String Object headers put headers put replyQueueName headers put correlationID headers put groupID exchange getIn setHeaders headers Message in reply getIn Object replyTo in getHeader
headers put correlationID headers put groupID reply exchange exchange getIn setBody Map String Object headers HashMap String Object headers put headers put replyQueueName headers put correlationID headers put groupID exchange getIn setHeaders headers Message in reply getIn Object replyTo in getHeader LOG info replyTo
headers put groupID reply exchange exchange getIn setBody Map String Object headers HashMap String Object headers put headers put replyQueueName headers put correlationID headers put groupID exchange getIn setHeaders headers Message in reply getIn Object replyTo in getHeader LOG info replyTo LOG info in getHeaders
headers put correlationID headers put groupID exchange getIn setHeaders headers Message in reply getIn Object replyTo in getHeader LOG info replyTo LOG info in getHeaders LOG info in getBody assertMessageHeader in correlationID Map String Object receivedHeaders myBean getHeaders assertThat receivedHeaders hasKey assertThat receivedHeaders hasEntry groupID assertThat receivedHeaders hasEntry correlationID replyTo receivedHeaders get
String expectedBody template sendBodyAndHeader startEndpointUri expectedBody listener assertMessagesArrived List Message list listener flushMessages assertTrue list isEmpty Message message list get
response resp getResult response ExceptionResponse er ExceptionResponse response exception er getException e exception e exception exception JMSException onComplete onException JMSException exception LOG debug JMSException jmsEx
ConnectionClosedException Response response Response timeout transport request command timeout transport request command response ExceptionResponse er ExceptionResponse response er getException JMSException JMSException er getException LOG debug JMSException jmsEx jmsEx JMSExceptionSupport create er getException
md waitForTransportInterruptionProcessingToComplete ActiveMQDispatcher dispatcher dispatchers get md getConsumerId dispatcher Message msg md getMessage msg msg msg copy msg setReadOnlyBody msg setReadOnlyProperties msg setRedeliveryCounter md getRedeliveryCounter msg setConnection ActiveMQConnection msg setMemoryUsage md setMessage msg dispatcher dispatch md
msg setJMSDestination destination msg setJMSDeliveryMode deliveryMode expiration timeStamp System currentTimeMillis msg setJMSTimestamp timeStamp timeToLive expiration timeToLive timeStamp msg setJMSExpiration expiration msg setJMSPriority priority msg setJMSRedelivered msg setMessageId messageId msg onSend msg setProducerId msg getMessageId getProducerId
FailoverTransport failoverTransport transport narrow FailoverTransport failoverTransport failoverTransport getStateTracker transportInterrupted getConnectionInfo getConnectionId
timeout deadline System currentTimeMillis timeout MessageDispatch md unconsumedMessages dequeue timeout md timeout unconsumedMessages timeout Math max deadline System currentTimeMillis failureError JMSExceptionSupport create failureError md md
timeout Math max deadline System currentTimeMillis failureError JMSExceptionSupport create failureError md md LOG debug getConsumerId md beforeMessageIsConsumed md afterMessageIsConsumed md timeout timeout Math max deadline System currentTimeMillis sendPullCommand timeout
ack pendingAck pendingAck pendingAck pendingAck ack pendingAck pendingAck ack MessageAck ackToSend ack executorService executorService Executors newSingleThreadExecutor executorService session sendAck ackToSend
registerSync deliveredCounter MessageAck oldPendingAck pendingAck pendingAck MessageAck md ackType deliveredCounter pendingAck setTransactionId session getTransactionContext getTransactionId oldPendingAck pendingAck setFirstMessageId pendingAck getLastMessageId oldPendingAck pendingAck pendingAck setFirstMessageId oldPendingAck getFirstMessageId oldPendingAck LOG debug oldPendingAck pendingAck session sendAck oldPendingAck
deliveredCounter MessageAck oldPendingAck pendingAck pendingAck MessageAck md ackType deliveredCounter pendingAck setTransactionId session getTransactionContext getTransactionId oldPendingAck pendingAck setFirstMessageId pendingAck getLastMessageId oldPendingAck pendingAck pendingAck setFirstMessageId oldPendingAck getFirstMessageId oldPendingAck LOG debug oldPendingAck pendingAck session sendAck oldPendingAck LOG debug oldPendingAck pendingAck
numberNotReplayed numberNotReplayed
md md listener md posionAck md md getRedeliveryCounter getConsumerId redeliveryPolicy ActiveMQMessage message createActiveMQMessage md beforeMessageIsConsumed md expired isConsumerExpiryCheckEnabled message isExpired expired listener onMessage message afterMessageIsConsumed md expired
afterMessageIsConsumed md md setDeliverySequenceId md unconsumedMessages enqueue md md unconsumedMessages enqueue md availableListener availableListener onMessageAvailable beforeMessageIsConsumed md afterMessageIsConsumed md
optimizedAckTask session connection getScheduler cancel optimizedAckTask e LOG debug e e optimizedAckTask optimizedAckTask LOG info info getConsumerId deliverAcks e
LOG debug e e optimizedAckTask optimizedAckScheduledAckInterval optimizedAckTask LOG info info getConsumerId deliverAcks e LOG debug e session connection getScheduler executePeriodically optimizedAckTask optimizedAckScheduledAckInterval
MessageDispatch messageDispatch messageDispatch MessageDispatch md messageDispatch ActiveMQMessage message ActiveMQMessage md getMessage copy message ActiveMQBlobMessage message setBlobDownloader BlobDownloader getBlobTransferPolicy message ActiveMQObjectMessage message setTrustAllPackages getConnection isTrustAllPackages ActiveMQObjectMessage message setTrustedPackages getConnection getTrustedPackages MessageAck earlyAck message earlyAck MessageAck md MessageAck EXPIRED_ACK_TYPE earlyAck setFirstMessageId message getMessageId message
message ActiveMQObjectMessage message setTrustAllPackages getConnection isTrustAllPackages ActiveMQObjectMessage message setTrustedPackages getConnection getTrustedPackages MessageAck earlyAck message earlyAck MessageAck md MessageAck EXPIRED_ACK_TYPE earlyAck setFirstMessageId message getMessageId message LOG debug message getMessageId earlyAck MessageAck md MessageAck POSION_ACK_TYPE earlyAck setFirstMessageId md getMessage getMessageId earlyAck setPoisonCause Throwable earlyAck asyncSendPacket earlyAck
message deliveryListener deliveryListener beforeDelivery message md setDeliverySequenceId getNextDeliveryId lastDeliveredSequenceId message getMessageId getBrokerSequenceId MessageAck ack MessageAck md MessageAck STANDARD_ACK_TYPE AtomicBoolean afterDeliveryError AtomicBoolean ack setFirstMessageId md getMessage getMessageId doStartTransaction
deliveryListener deliveryListener beforeDelivery message md setDeliverySequenceId getNextDeliveryId lastDeliveredSequenceId message getMessageId getBrokerSequenceId MessageAck ack MessageAck md MessageAck STANDARD_ACK_TYPE AtomicBoolean afterDeliveryError AtomicBoolean ack setFirstMessageId md getMessage getMessageId doStartTransaction ack setTransactionId getTransactionContext getTransactionId ack getTransactionId getTransactionContext clearRequestCount clearRequestsCounter get Integer MAX_VALUE clearRequestsCounter incrementAndGet clearRequestsCounter get
md setDeliverySequenceId getNextDeliveryId lastDeliveredSequenceId message getMessageId getBrokerSequenceId MessageAck ack MessageAck md MessageAck STANDARD_ACK_TYPE AtomicBoolean afterDeliveryError AtomicBoolean ack setFirstMessageId md getMessage getMessageId doStartTransaction ack setTransactionId getTransactionContext getTransactionId ack getTransactionId getTransactionContext clearRequestCount clearRequestsCounter get Integer MAX_VALUE clearRequestsCounter incrementAndGet clearRequestsCounter get ack getTransactionId connection ack LOG debug ack connection
TransactionInProgressException beforeEnd e rollback e transactionId String message transactionId rollback LOG warn message TransactionRolledBackException message transactionId
transactionId String message transactionId rollback LOG warn message TransactionRolledBackException message transactionId LOG debug transactionId synchronizations synchronizations size TransactionInfo info TransactionInfo getConnectionId transactionId TransactionInfo COMMIT_ONE_PHASE transactionId connection syncSendPacket info localTransactionEventListener localTransactionEventListener commitEvent
XAException XAException XAER_PROTO x XATransactionId xid LOG warn x XAException XAException XA_RBINTEGRITY TransactionInfo info TransactionInfo getConnectionId x TransactionInfo PREPARE IntegerResponse response IntegerResponse connection syncSendPacket info response List TransactionContext l ENDED_XA_TRANSACTION_CONTEXTS l ENDED_XA_TRANSACTION_CONTEXTS remove x l l
ENDED_XA_TRANSACTION_CONTEXTS l ENDED_XA_TRANSACTION_CONTEXTS remove x l l LOG debug xid TransactionContext ctx l ctx afterCommit response getResult e LOG warn x e e List TransactionContext l ENDED_XA_TRANSACTION_CONTEXTS l ENDED_XA_TRANSACTION_CONTEXTS remove x l TransactionContext ctx l
l ENDED_XA_TRANSACTION_CONTEXTS remove x l TransactionContext ctx l ctx afterCommit ignored LOG debug ignored ignored e LOG warn x e e List TransactionContext l ENDED_XA_TRANSACTION_CONTEXTS l ENDED_XA_TRANSACTION_CONTEXTS remove x l TransactionContext ctx l
toXAException e xid associatedXid xid transactionId XATransactionId xid TransactionInfo info TransactionInfo getConnectionId transactionId TransactionInfo BEGIN connection asyncSendPacket info LOG debug transactionId e disassociate toXAException e transactionId TransactionInfo info TransactionInfo getConnectionId transactionId TransactionInfo END
Object result object Reference Reference reference Reference object log log trace reference getClassName Class theClass loadClass reference getClassName JNDIStorableInterface theClass JNDIStorableInterface store JNDIStorableInterface theClass newInstance Properties properties Properties iter reference iter StringRefAddr addr StringRefAddr iter nextElement properties put addr getType addr getContent addr getContent store setProperties properties result store
Vector TransactionInfo toRollback Vector
Vector TransactionInfo toRollback Vector transactionState LOG LOG debug transactionState getId transactionState getCommands Command lastCommand transactionState getCommands get transactionState getCommands size lastCommand TransactionInfo TransactionInfo transactionInfo TransactionInfo lastCommand transactionInfo TransactionInfo LOG LOG debug transactionState getId toRollback add transactionInfo transactionState LOG
transactionState getCommands Command lastCommand transactionState getCommands get transactionState getCommands size lastCommand TransactionInfo TransactionInfo transactionInfo TransactionInfo lastCommand transactionInfo TransactionInfo LOG LOG debug transactionState getId toRollback add transactionInfo producerState transactionState LOG LOG debug producerState getInfo transport oneway producerState getInfo Command transactionState getCommands LOG
TransactionInfo transactionInfo TransactionInfo lastCommand transactionInfo TransactionInfo LOG LOG debug transactionState getId toRollback add transactionInfo producerState transactionState LOG LOG debug producerState getInfo transport oneway producerState getInfo command transactionState LOG LOG debug command transport oneway command producerState transactionState
sessionState ConnectionState connectionState connectionStates get sessionState getInfo getSessionId getParentId connectionInterruptionProcessingComplete connectionState isConnectionInterruptProcessingComplete consumerState sessionState ConsumerInfo infoToSend consumerState getInfo connectionInterruptionProcessingComplete infoToSend infoToSend consumerState getInfo copy connectionState getRecoveringPullConsumers put infoToSend getConsumerId consumerState getInfo infoToSend setPrefetchSize
transport iter2 iter2 DestinationInfo info DestinationInfo iter2 next transport oneway info
connectionId ConnectionState connectionState connectionStates get connectionId connectionState connectionState setConnectionInterruptProcessingComplete Map ConsumerId ConsumerInfo stalledConsumers connectionState getRecoveringPullConsumers ConsumerId ConsumerInfo entry stalledConsumers ConsumerControl control ConsumerControl control setConsumerId entry getKey control setPrefetch entry getValue getPrefetchSize control setDestination entry getValue getDestination
ConnectionState connectionState connectionStates get connectionId connectionState connectionState setConnectionInterruptProcessingComplete Map ConsumerId ConsumerInfo stalledConsumers connectionState getRecoveringPullConsumers ConsumerId ConsumerInfo entry stalledConsumers ConsumerControl control ConsumerControl control setConsumerId entry getKey control setPrefetch entry getValue getPrefetchSize control setDestination entry getValue getDestination LOG LOG debug control getConsumerId control getPrefetch transport oneway control LOG
task TimerTask existing timerTasks get task existing
sendLock writeLock KeepAliveInfo info KeepAliveInfo info setResponseRequired keepAliveResponseRequired doOnewaySend info e onException e sendLock writeLock sendLock writeLock unlock getRemoteAddress
LOG trace LOG debug LOG debug onException InactivityIOException readCheckTime next getRemoteAddress getRemoteAddress
configured configured localWireFormatInfo remoteWireFormatInfo LOG LOG debug localWireFormatInfo remoteWireFormatInfo readCheckTime Math min localWireFormatInfo getMaxInactivityDuration remoteWireFormatInfo getMaxInactivityDuration writeCheckTime writeCheckValueFromReadCheck readCheckTime setReadCheckTime readCheckTime setInitialDelayTime Math min localWireFormatInfo getMaxInactivityDurationInitalDelay remoteWireFormatInfo getMaxInactivityDurationInitalDelay setWriteCheckTime writeCheckTime LOG
o Command command o Command command Command o ClassCastException o command Response response Response command FutureResponse future requestMap future requestMap remove Integer valueOf response getCorrelationId future future set response
WireFormatInfo info wireFormat getPreferedWireFormatInfo
LOG LOG debug info wireInfoSentDownLatch await LOG LOG debug wireFormat info onException IOException info getVersion minimumVersion onException IOException info getVersion minimumVersion wireFormat renegotiateWireFormat info Socket socket next narrow Socket socket socket setTcpNoDelay wireFormat isTcpNoDelayEnabled LOG
filter result writers remove filter result String message filter getNext getRemoteAddress LOG warn message Socket sock filter getSocket sock
event String url event getServiceName url URI uri URI url
selfService String payload getType payload started get ALIVE DEAD payload DELIMITER DELIMITER payload selfService data payload getBytes DatagramPacket packet DatagramPacket data data length sockAddress mcast send packet e reportAdvertizeFailed reportAdvertizeFailed LOG error payload e e
devent SimpleDiscoveryEvent sevent SimpleDiscoveryEvent devent sevent listener onServiceRemove sevent SimpleDiscoveryEvent event SimpleDiscoveryEvent sevent event
newTransports newTransports trim newTransports List URI list ArrayList URI StringTokenizer tokenizer StringTokenizer newTransports tokenizer String str tokenizer nextToken URI uri URI str list add uri e LOG error str e list updateURIs rebalance list toArray URI list size e
command MessagePull MessagePull pullRequest MessagePull command pullRequest MessageDispatch dispatch MessageDispatch dispatch setConsumerId pullRequest getConsumerId dispatch setDestination pullRequest getDestination processCommand dispatch Transport transport connectedTransport get start System currentTimeMillis timedout transport LOG trace command
error IOException timeout error IOException maxReconnectAttempts error IOException Tracked tracked tracked stateTracker track command IOException ioe LOG debug command ioe requestMap tracked tracked requestMap put Integer valueOf command getCommandId tracked tracked command
error IOException Tracked tracked tracked stateTracker track command IOException ioe LOG debug command ioe requestMap tracked tracked requestMap put Integer valueOf command getCommandId tracked tracked command requestMap put Integer valueOf command getCommandId command transport oneway command
String fileURL getUpdateURIsURL fileURL BufferedReader in String newUris StringBuffer buffer StringBuffer in BufferedReader getURLStream fileURL String line in readLine line buffer append line newUris buffer toString
doUpdateURIsFromDisk reconnectMutex notifyAll doRebalance connectList getConnectList connectList failure IOException doRebalance connectList doRebalance
backups ArrayList BackupTransport l ArrayList BackupTransport backups Collections shuffle l BackupTransport bt l remove backups remove bt transport bt getTransport uri bt getUri processCommand bt getBrokerInfo priorityBackupAvailable Transport old connectedTransport getAndSet old disposeTransport old priorityBackupAvailable transport
Iterator URI iter connectList iterator transport iter SslContext setCurrentSslContext brokerSslContext transport uri addExtraQueryOptions iter next transport TransportFactory compositeConnect uri LOG debug connectFailures uri transport setTransportListener createTransportListener transport transport start restoreTransport transport LOG debug reconnectDelay initialReconnectDelay connectedTransportURI uri
SslContext setCurrentSslContext brokerSslContext transport uri addExtraQueryOptions iter next transport TransportFactory compositeConnect uri LOG debug connectFailures uri transport setTransportListener createTransportListener transport transport start restoreTransport transport LOG debug reconnectDelay initialReconnectDelay connectedTransportURI uri connectedTransport set transport connectedToPriority isPriority connectedTransportURI
transport TransportFactory compositeConnect uri LOG debug connectFailures uri transport setTransportListener createTransportListener transport transport start restoreTransport transport LOG debug reconnectDelay initialReconnectDelay connectedTransportURI uri connectedTransport set transport connectedToPriority isPriority connectedTransportURI reconnectMutex notifyAll connectFailures
restoreTransport transport LOG debug reconnectDelay initialReconnectDelay connectedTransportURI uri connectedTransport set transport connectedToPriority isPriority connectedTransportURI reconnectMutex notifyAll connectFailures listenerMutex transportListener listenerMutex wait transportListener transportListener transportResumed
connectedToPriority isPriority connectedTransportURI reconnectMutex notifyAll connectFailures listenerMutex transportListener listenerMutex wait transportListener transportListener transportResumed LOG debug firstConnection firstConnection LOG info uri
result first second result first second InetAddress firstAddr InetAddress secondAddr firstAddr InetAddress getByName first getHost secondAddr InetAddress getByName second getHost firstAddr secondAddr result e firstAddr LOG error first e
transports Iterator FanoutTransportHandler iter transports iterator iter now System currentTimeMillis FanoutTransportHandler fanoutHandler iter next fanoutHandler fanoutHandler reconnectDate fanoutHandler reconnectDate now closestReconnectDate fanoutHandler reconnectDate closestReconnectDate closestReconnectDate fanoutHandler reconnectDate URI uri fanoutHandler uri
closestReconnectDate fanoutHandler reconnectDate closestReconnectDate closestReconnectDate fanoutHandler reconnectDate URI uri fanoutHandler uri LOG debug LOG debug uri Transport t TransportFactory compositeConnect uri fanoutHandler transport t t setTransportListener fanoutHandler restoreTransport fanoutHandler LOG debug fanoutHandler reconnectDelay initialReconnectDelay fanoutHandler connectFailures
URI uri fanoutHandler uri LOG debug LOG debug uri Transport t TransportFactory compositeConnect uri fanoutHandler transport t t setTransportListener fanoutHandler restoreTransport fanoutHandler LOG debug fanoutHandler reconnectDelay initialReconnectDelay fanoutHandler connectFailures primary primary fanoutHandler connectedCount
e LOG debug uri e fanoutHandler transport ServiceSupport dispose fanoutHandler transport fanoutHandler transport fanoutHandler connectFailures LOG error fanoutHandler connectFailures connectionFailure e reconnectMutex notifyAll fanoutHandler reconnectDelay backOffMultiplier fanoutHandler reconnectDelay maxReconnectDelay fanoutHandler reconnectDelay maxReconnectDelay
o Command command Command o
command ReplayCommand replayCommands ReplayCommand command actualCounter command getCommandId valid expectedCounter actualCounter valid commands nextCounter actualCounter empty commands isEmpty empty Command nextAvailable commands first nextCounter nextAvailable getCommandId keep replayStrategy onDroppedPackets expectedCounter actualCounter nextCounter keep
LOG LOG debug socket CountDownLatch latch CountDownLatch TaskRunnerFactory taskRunnerFactory TaskRunnerFactory taskRunnerFactory LOG trace socket socket close LOG debug socket LOG
e LOG LOG debug socket e latch countDown latch await TimeUnit SECONDS e Thread currentThread interrupt taskRunnerFactory shutdownNow LOG trace socket
LOG debug socket e latch countDown latch await TimeUnit SECONDS e Thread currentThread interrupt taskRunnerFactory shutdownNow LOG trace socket socket close LOG debug socket
SocketAddress address channel receive readBuffer readBuffer flip readBuffer receiveCounter from headerMarshaller createEndpoint readBuffer address remaining readBuffer remaining data remaining readBuffer get data DataInputStream dataIn DataInputStream ByteArrayInputStream data answer Command wireFormat unmarshal dataIn answer answer setFrom from
Command Command answer Endpoint from DatagramPacket datagram createDatagramPacket channel receive datagram receiveCounter DataInputStream dataIn DataInputStream ByteArrayInputStream datagram getData datagram getLength from headerMarshaller createEndpoint datagram dataIn answer Command wireFormat unmarshal dataIn answer answer setFrom from
Command command commandChannel read doConsume command e stop e2 LOG warn e2 e2 e LOG debug e e stop e2 LOG warn e2 e2 e
LOG debug e e stop e2 LOG warn e2 e2 e LOG debug e e stop e2 LOG warn e2 e2 e stop e2
channel configureBlocking
command DatagramEndpoint endpoint DatagramEndpoint command getFrom
LOG debug endpoint command Transport transport transports transport transports get endpoint transport command LOG error command getFrom command LOG LOG debug transport createTransport command endpoint transport configureTransport transport transports put endpoint transport
running MessageConsumer consumer String threadName Thread currentThread getName
msg LOG info threadName msg TextMessage TextMessage msg getText msg getJMSMessageID msg BytesMessage length BytesMessage msg getBodyLength bytes length BytesMessage msg readBytes bytes LOG info String bytes received session received received LOG info threadName transactions session commit
session batchSize received received batchSize LOG info threadName transactions session commit session batchSize received received batchSize LOG info batchSize received msg acknowledge sleep Thread sleep sleep e e printStackTrace
batchSize received received batchSize LOG info threadName transactions session commit session batchSize received received batchSize LOG info batchSize received msg acknowledge sleep Thread sleep sleep e e printStackTrace finished finished countDown
target name value Class clazz target getClass target SSLServerSocket clazz SSLServerSocket Method setter findSetterMethod clazz name setter setter setAccessible value value getClass setter getParameterTypes setter invoke target value setter invoke target convert value setter getParameterTypes
startClass stopClass addFields target startClass getSuperclass stopClass map Field fields startClass getDeclaredFields Field field fields field field field field setAccessible Object o field get target o o o Arrays asList Object o map put field getName o
MessageProducer producer String threadName Thread currentThread getName producer session createProducer destination producer setDeliveryMode persistent DeliveryMode PERSISTENT DeliveryMode NON_PERSISTENT producer setTimeToLive msgTTL initPayLoad running
tStart System currentTimeMillis paused await sendMessage producer threadName sentCount incrementAndGet sentCount sentCount sentCount incrementAndGet paused await sendMessage producer threadName LOG info threadName getSentCount tEnd System currentTimeMillis elapsed tEnd tStart
paused await sendMessage producer threadName sentCount incrementAndGet sentCount sentCount sentCount incrementAndGet paused await sendMessage producer threadName LOG info threadName getSentCount tEnd System currentTimeMillis elapsed tEnd tStart LOG info threadName elapsed
producer Message message createMessage sentCount get producer send message
service Logger log LoggerFactory getLogger service getClass
List Runnable List Runnable answer
Calendar current Calendar getInstance current set Calendar NOVEMBER
Calendar current Calendar getInstance current set Calendar NOVEMBER LOG debug current getTime String test next CronParser getNextScheduledTime test current getTimeInMillis Calendar result Calendar getInstance result setTimeInMillis next
Calendar current Calendar getInstance current set Calendar MARCH
Calendar current Calendar getInstance current set Calendar MARCH LOG debug current getTime String test next CronParser getNextScheduledTime test current getTimeInMillis Calendar result Calendar getInstance result setTimeInMillis next
LOG debug current getTime String test next CronParser getNextScheduledTime test current getTimeInMillis Calendar result Calendar getInstance result setTimeInMillis next LOG debug result getTime assertEquals result get Calendar SECOND assertEquals result get Calendar MINUTE assertEquals result get Calendar HOUR_OF_DAY assertEquals result get Calendar DAY_OF_MONTH assertEquals Calendar FRIDAY result get Calendar DAY_OF_WEEK assertEquals Calendar MARCH result get Calendar MONTH assertEquals result get Calendar YEAR current Calendar getInstance current set Calendar MARCH
result setTimeInMillis next LOG debug result getTime assertEquals result get Calendar SECOND assertEquals result get Calendar MINUTE assertEquals result get Calendar HOUR_OF_DAY assertEquals result get Calendar DAY_OF_MONTH assertEquals Calendar FRIDAY result get Calendar DAY_OF_WEEK assertEquals Calendar MARCH result get Calendar MONTH assertEquals result get Calendar YEAR current Calendar getInstance current set Calendar MARCH LOG debug current getTime next CronParser getNextScheduledTime test current getTimeInMillis result Calendar getInstance result setTimeInMillis next
Calendar current Calendar getInstance current set Calendar MARCH
Calendar current Calendar getInstance current set Calendar MARCH LOG debug current getTime String test next CronParser getNextScheduledTime test current getTimeInMillis Calendar result Calendar getInstance result setTimeInMillis next
LOG debug current getTime String test next CronParser getNextScheduledTime test current getTimeInMillis Calendar result Calendar getInstance result setTimeInMillis next LOG debug result getTime assertEquals result get Calendar SECOND assertEquals result get Calendar MINUTE assertEquals result get Calendar HOUR_OF_DAY assertEquals Calendar APRIL result get Calendar MONTH assertEquals result get Calendar DAY_OF_MONTH assertEquals Calendar SUNDAY result get Calendar DAY_OF_WEEK assertEquals result get Calendar YEAR current Calendar getInstance current set Calendar APRIL
result setTimeInMillis next LOG debug result getTime assertEquals result get Calendar SECOND assertEquals result get Calendar MINUTE assertEquals result get Calendar HOUR_OF_DAY assertEquals Calendar APRIL result get Calendar MONTH assertEquals result get Calendar DAY_OF_MONTH assertEquals Calendar SUNDAY result get Calendar DAY_OF_WEEK assertEquals result get Calendar YEAR current Calendar getInstance current set Calendar APRIL LOG debug current getTime next CronParser getNextScheduledTime test current getTimeInMillis result Calendar getInstance result setTimeInMillis next
current set Calendar APRIL LOG debug current getTime next CronParser getNextScheduledTime test current getTimeInMillis result Calendar getInstance result setTimeInMillis next LOG debug result getTime assertEquals result get Calendar SECOND assertEquals result get Calendar MINUTE assertEquals result get Calendar HOUR_OF_DAY assertEquals result get Calendar DAY_OF_MONTH assertEquals Calendar SUNDAY result get Calendar DAY_OF_WEEK assertEquals Calendar MAY result get Calendar MONTH assertEquals result get Calendar YEAR current Calendar getInstance current set Calendar MAY
result setTimeInMillis next LOG debug result getTime assertEquals result get Calendar SECOND assertEquals result get Calendar MINUTE assertEquals result get Calendar HOUR_OF_DAY assertEquals result get Calendar DAY_OF_MONTH assertEquals Calendar SUNDAY result get Calendar DAY_OF_WEEK assertEquals Calendar MAY result get Calendar MONTH assertEquals result get Calendar YEAR current Calendar getInstance current set Calendar MAY LOG debug current getTime next CronParser getNextScheduledTime test current getTimeInMillis result Calendar getInstance result setTimeInMillis next
Calendar current Calendar getInstance current set Calendar NOVEMBER
Calendar current Calendar getInstance current set Calendar NOVEMBER LOG debug current getTime String test next CronParser getNextScheduledTime test current getTimeInMillis Calendar result Calendar getInstance result setTimeInMillis next
Calendar current Calendar getInstance current set Calendar DECEMBER
Calendar current Calendar getInstance current set Calendar DECEMBER LOG debug current getTime String test next CronParser getNextScheduledTime test current getTimeInMillis Calendar result Calendar getInstance result setTimeInMillis next
Calendar current Calendar getInstance current set Calendar DECEMBER
Calendar current Calendar getInstance current set Calendar DECEMBER LOG debug current getTime String test next CronParser getNextScheduledTime test current getTimeInMillis Calendar result Calendar getInstance result setTimeInMillis next
Calendar current Calendar getInstance current set Calendar NOVEMBER
Calendar current Calendar getInstance current set Calendar NOVEMBER LOG debug current getTime String test next CronParser getNextScheduledTime test current getTimeInMillis Calendar result Calendar getInstance result setTimeInMillis next
String test current Calendar calender Calendar getInstance calender setTimeInMillis current startHours calender get Calendar HOUR_OF_DAY startMinutes calender get Calendar MINUTE
String test current Calendar calender Calendar getInstance calender setTimeInMillis current startHours calender get Calendar HOUR_OF_DAY startMinutes calender get Calendar MINUTE LOG debug calender getTime next CronParser getNextScheduledTime test current calender setTimeInMillis next
e e printStackTrace startLatch await memUsage waitForSpace e e printStackTrace removeThread start addThread start
waitForSpaceThread startLatch await memUsage waitForSpace e e printStackTrace removeThread start addThread start waitForSpaceThread start Random r Random seed startLatch countDown
String result executeQuery
String result executeQuery LOG info result assertFalse result contains result executeQuery
String result executeQuery assertTrue result contains result executeQuery
String result executeQuery assertTrue result contains result executeQuery LOG info result assertTrue result contains assertTrue result contains result executeQuery assertTrue result contains result executeQuery
assertTrue result contains result executeQuery LOG info result assertTrue result contains assertTrue result contains result executeQuery assertTrue result contains result executeQuery LOG info result assertTrue result contains result executeQuery assertTrue result contains result executeQuery assertTrue result contains result executeQuery
LOG info
req String group req getPathInfo String service req getHeader
req String group req getPathInfo String service req getHeader
String service String url registryURL HttpPut method HttpPut url method addHeader service ResponseHandler String handler BasicResponseHandler String responseBody httpClient execute method handler
String service String url registryURL HttpDelete method HttpDelete url method addHeader service ResponseHandler String handler BasicResponseHandler String responseBody httpClient execute method handler
String freshness String url registryURL freshness HttpGet method HttpGet url ResponseHandler String handler BasicResponseHandler String response httpClient execute method handler
String url registryURL freshness HttpGet method HttpGet url ResponseHandler String handler BasicResponseHandler String response httpClient execute method handler LOG debug url response Set String rc HashSet String Scanner scanner Scanner response scanner String service scanner nextLine service rc add service scanner close rc
devent SimpleDiscoveryEvent event SimpleDiscoveryEvent devent event discoveryListener get onServiceRemove event event get event
devent SimpleDiscoveryEvent event SimpleDiscoveryEvent devent event discoveryListener get onServiceRemove event event get event LOG debug event event connectFailures event connectFailures
LOG debug Thread sleep onException InterruptedIOException Thread currentThread interrupt onException IOException remoteUrl answer receiveCounter DataInputStream stream createDataInputStream answer Object command getTextWireFormat unmarshal stream
brokerOne waitUntilStarted ActiveMQConnectionFactory secondProducerConnectionFactory createBrokerTwoHttpConnectionFactory ActiveMQConnectionFactory consumerConnectionFactory createBrokerOneHttpConnectionFactory MessageConsumer consumer createConsumer consumerConnectionFactory AtomicInteger counter createConsumerCounter consumerConnectionFactory waitForConsumerToArrive counter Connection connection secondProducerConnectionFactory createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode NON_PERSISTENT expectedMessagesReceived expectedMessagesReceived Message message session createMessage producer send message
Connection connection secondProducerConnectionFactory createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode NON_PERSISTENT expectedMessagesReceived i i expectedMessagesReceived i Message message session createMessage producer send message i LOG info i i i expectedMessagesReceived i Message message consumer receive message fail i
consumeMessage message messageList consumeMessage message messageList message TextMessage TextMessage textMessage TextMessage cast message
ActiveMQTextMessage tcpMessage ActiveMQTextMessage tcpConsumer receive TimeUnit SECONDS toMillis ActiveMQTextMessage httpMessage ActiveMQTextMessage httpConsumer receive TimeUnit SECONDS toMillis assertNotNull tcpMessage assertNotNull httpMessage ByteSequence tcpContent tcpMessage getContent ByteSequence httpContent httpMessage getContent assertNotNull tcpContent assertNotNull httpContent assertTrue tcpMessage isCompressed assertTrue httpMessage isCompressed tcpCompressedSize tcpContent getLength httpCompressedSize httpContent getLength assertEquals tcpContent getLength httpContent getLength assertEquals tcpMessage getText httpMessage getText
ActiveMQTextMessage tcpMessage ActiveMQTextMessage tcpConsumer receive TimeUnit SECONDS toMillis ActiveMQTextMessage httpMessage ActiveMQTextMessage httpConsumer receive TimeUnit SECONDS toMillis assertNotNull tcpMessage assertNotNull httpMessage ByteSequence tcpContent tcpMessage getContent ByteSequence httpContent httpMessage getContent assertNotNull tcpContent assertNotNull httpContent assertTrue tcpMessage isCompressed assertTrue httpMessage isCompressed tcpCompressedSize tcpContent getLength httpCompressedSize httpContent getLength assertEquals tcpContent getLength httpContent getLength assertEquals tcpMessage getText httpMessage getText LOG info tcpMessage toString
ActiveMQBytesMessage tcpMessage ActiveMQBytesMessage tcpConsumer receive TimeUnit SECONDS toMillis ActiveMQBytesMessage httpMessage ActiveMQBytesMessage httpConsumer receive TimeUnit SECONDS toMillis assertNotNull tcpMessage assertNotNull httpMessage ByteSequence tcpContent tcpMessage getContent ByteSequence httpContent httpMessage getContent assertNotNull tcpContent assertNotNull httpContent assertTrue tcpMessage isCompressed assertTrue httpMessage isCompressed tcpCompressedSize tcpContent getLength httpCompressedSize httpContent getLength assertEquals tcpContent getLength httpContent getLength assertEquals tcpMessage readUTF httpMessage readUTF
ActiveMQBytesMessage tcpMessage ActiveMQBytesMessage tcpConsumer receive TimeUnit SECONDS toMillis ActiveMQBytesMessage httpMessage ActiveMQBytesMessage httpConsumer receive TimeUnit SECONDS toMillis assertNotNull tcpMessage assertNotNull httpMessage ByteSequence tcpContent tcpMessage getContent ByteSequence httpContent httpMessage getContent assertNotNull tcpContent assertNotNull httpContent assertTrue tcpMessage isCompressed assertTrue httpMessage isCompressed tcpCompressedSize tcpContent getLength httpCompressedSize httpContent getLength assertEquals tcpContent getLength httpContent getLength assertEquals tcpMessage readUTF httpMessage readUTF LOG info tcpMessage toString
ActiveMQStreamMessage tcpMessage ActiveMQStreamMessage tcpConsumer receive TimeUnit SECONDS toMillis ActiveMQStreamMessage httpMessage ActiveMQStreamMessage httpConsumer receive TimeUnit SECONDS toMillis assertNotNull tcpMessage assertNotNull httpMessage ByteSequence tcpContent tcpMessage getContent ByteSequence httpContent httpMessage getContent assertNotNull tcpContent assertNotNull httpContent assertTrue tcpMessage isCompressed assertTrue httpMessage isCompressed tcpCompressedSize tcpContent getLength httpCompressedSize httpContent getLength assertEquals tcpContent getLength httpContent getLength assertEquals tcpMessage readString httpMessage readString
ActiveMQStreamMessage tcpMessage ActiveMQStreamMessage tcpConsumer receive TimeUnit SECONDS toMillis ActiveMQStreamMessage httpMessage ActiveMQStreamMessage httpConsumer receive TimeUnit SECONDS toMillis assertNotNull tcpMessage assertNotNull httpMessage ByteSequence tcpContent tcpMessage getContent ByteSequence httpContent httpMessage getContent assertNotNull tcpContent assertNotNull httpContent assertTrue tcpMessage isCompressed assertTrue httpMessage isCompressed tcpCompressedSize tcpContent getLength httpCompressedSize httpContent getLength assertEquals tcpContent getLength httpContent getLength assertEquals tcpMessage readString httpMessage readString LOG info tcpMessage toString
ActiveMQMapMessage tcpMessage ActiveMQMapMessage tcpConsumer receive TimeUnit SECONDS toMillis ActiveMQMapMessage httpMessage ActiveMQMapMessage httpConsumer receive TimeUnit SECONDS toMillis assertNotNull tcpMessage assertNotNull httpMessage ByteSequence tcpContent tcpMessage getContent ByteSequence httpContent httpMessage getContent assertNotNull tcpContent assertNotNull httpContent assertTrue tcpMessage isCompressed assertTrue httpMessage isCompressed tcpCompressedSize tcpContent getLength httpCompressedSize httpContent getLength assertEquals tcpContent getLength httpContent getLength assertEquals tcpMessage getString httpMessage getString
ActiveMQMapMessage tcpMessage ActiveMQMapMessage tcpConsumer receive TimeUnit SECONDS toMillis ActiveMQMapMessage httpMessage ActiveMQMapMessage httpConsumer receive TimeUnit SECONDS toMillis assertNotNull tcpMessage assertNotNull httpMessage ByteSequence tcpContent tcpMessage getContent ByteSequence httpContent httpMessage getContent assertNotNull tcpContent assertNotNull httpContent assertTrue tcpMessage isCompressed assertTrue httpMessage isCompressed tcpCompressedSize tcpContent getLength httpCompressedSize httpContent getLength assertEquals tcpContent getLength httpContent getLength assertEquals tcpMessage getString httpMessage getString LOG info tcpMessage toString
CountDownLatch failed CountDownLatch Connection connection factory createConnection connection start connection
MQTTFrame frame frame MQTTFrame wireFormat unmarshal ByteSequence data offset length e LOG error e getMessage connection close frame ping frame LOG info ping sendFrame PING_RESP_FRAME LOG info frame
LOG info wsStompConnection keepAlive TimeUnit SECONDS TimeUnit SECONDS sleep String frame getTestName Stomp NULL wsStompConnection sendRawFrame frame incoming wsStompConnection receive TimeUnit SECONDS assertTrue incoming startsWith service shutdownNow service awaitTermination TimeUnit SECONDS wsStompConnection sendFrame StompFrame Stomp Commands DISCONNECT
String connectFrame Stomp NULL wsStompConnection sendRawFrame connectFrame String incoming wsStompConnection receive TimeUnit SECONDS assertTrue incoming startsWith String message getTestName Stomp NULL wsStompConnection sendRawFrame message String frame getTestName Stomp NULL wsStompConnection sendRawFrame frame incoming wsStompConnection receive TimeUnit SECONDS assertTrue incoming startsWith assertTrue incoming indexOf wsStompConnection sendFrame StompFrame Stomp Commands DISCONNECT
assertBeanMarshalls original assertBeanMarshalls original String xml getXStreamWireFormat marshalText original LOG info original getClass getName
succeeded PasswordCallback passwordCallback PasswordCallback callbackHandler handle Callback passwordCallback passwordCallback debug LOG debug succeeded passwordCallback clearPassword debug
userSearchSubtreeBool Boolean valueOf getLDAPPropertyValue USER_SEARCH_SUBTREE booleanValue String filter userSearchMatchingFormat format String doRFC2254Encoding username SearchControls constraints SearchControls userSearchSubtreeBool constraints setSearchScope SearchControls SUBTREE_SCOPE constraints setSearchScope SearchControls ONELEVEL_SCOPE List String list ArrayList String USER_ROLE_NAME list add getLDAPPropertyValue USER_ROLE_NAME String attribs String list size list toArray attribs constraints setReturningAttributes attribs
log debug log debug log debug getLDAPPropertyValue USER_BASE log debug filter NamingEnumeration SearchResult results context search getLDAPPropertyValue USER_BASE filter constraints results results log warn username FailedLoginException username SearchResult result results next results String dn result log debug result getName NameParser parser context getNameParser Name contextName parser parse context getNameInNamespace
log debug result getName NameParser parser context getNameParser Name contextName parser parse context getNameInNamespace Name baseName parser parse getLDAPPropertyValue USER_BASE Name entryName parser parse result getName Name name contextName addAll baseName name name addAll entryName dn name toString log debug result getName URI uri URI result getName String path uri getPath path dn path substring
expandRolesBool Boolean valueOf getLDAPPropertyValue EXPAND_ROLES booleanValue list list ArrayList String list String filter roleSearchMatchingFormat format String doRFC2254Encoding dn doRFC2254Encoding username SearchControls constraints SearchControls constraints setSearchScope SearchControls SUBTREE_SCOPE constraints setSearchScope SearchControls ONELEVEL_SCOPE log log debug log debug log debug getLDAPPropertyValue ROLE_BASE
Hashtable String String env Hashtable String String env put Context INITIAL_CONTEXT_FACTORY getLDAPPropertyValue INITIAL_CONTEXT_FACTORY CONNECTION_USERNAME env put Context SECURITY_PRINCIPAL getLDAPPropertyValue CONNECTION_USERNAME NamingException CONNECTION_PASSWORD env put Context SECURITY_CREDENTIALS getLDAPPropertyValue CONNECTION_PASSWORD NamingException env put Context SECURITY_PROTOCOL getLDAPPropertyValue CONNECTION_PROTOCOL env put Context PROVIDER_URL getLDAPPropertyValue CONNECTION_URL env put Context SECURITY_AUTHENTICATION getLDAPPropertyValue AUTHENTICATION context InitialDirContext env NamingException
LoginException ioe getMessage uce LoginException uce getMessage user NameCallback callbacks getName tmpPassword PasswordCallback callbacks getPassword tmpPassword tmpPassword user FailedLoginException String password users getProperty user password FailedLoginException password String tmpPassword FailedLoginException succeeded
key props Properties load key file props invertedProps invertedValueProps regexpProps key
LOG info String sql getStatements getLockCreateStatement
connection dataSource getConnection connection setAutoCommit lockCreateStatement connection prepareStatement sql lockCreateStatement execute Exception e Exception e e exceptionHandler exceptionHandler handle e
connection dataSource getConnection connection setAutoCommit lockCreateStatement connection prepareStatement sql lockCreateStatement execute Exception e Exception e e exceptionHandler exceptionHandler handle e handlerException LOG error exceptionHandler getClass getCanonicalName handlerException e handlerException
exceptionHandler exceptionHandler handle e handlerException LOG error exceptionHandler getClass getCanonicalName handlerException e handlerException LOG debug e e connection connection rollback e1 LOG debug e1 e1 connection close
LOG debug e e connection connection rollback e1 LOG debug e1 e1 connection close e1 LOG debug e1 e1 connection
lockCreateStatement lockCreateStatement cancel e LOG warn dataSource e lockUpdateStatement lockUpdateStatement cancel e LOG warn dataSource e connection connection rollback
result lockUpdateStatement connection prepareStatement getStatements getLockUpdateStatement lockUpdateStatement setLong System currentTimeMillis setQueryTimeout lockUpdateStatement rows lockUpdateStatement executeUpdate rows result e LOG error e e lockUpdateStatement lockUpdateStatement close e
message MessageId messageId message getMessageId message
dataSource lockDataSource dataSource
JDBCAdapter adapter JDBCAdapter loadAdapter adapterFactoryFinder adapter adapter DefaultJDBCAdapter
Object finder String Object adapter TransactionContext c getTransactionContext String dirverName c getConnection getMetaData getDriverName dirverName dirverName replaceAll toLowerCase Locale ENGLISH adapter finder newInstance dirverName
Locker Locker locker Locker loadAdapter lockFactoryFinder locker locker DefaultDatabaseLocker
connection PreparedStatement statement statement connection prepareStatement getStatements getLeaseOwnerStatement ResultSet resultSet statement executeQuery resultSet
result String sql getStatements getLeaseUpdateStatement
connection dataSource getConnection networkTimeout connection setNetworkTimeout Executors newSingleThreadExecutor networkTimeout autoCommit inTx connection autoCommit LOG trace autoCommit connection connection setAutoCommit autoCommit connection UnlockOnCloseConnection connection toLock e JDBCPersistenceAdapter log e inTx toLock unlock
Statement statement
c PreparedStatement s LOG debug statements getDeleteOldMessagesStatementWithPriority s c getExclusiveConnection prepareStatement statements getDeleteOldMessagesStatementWithPriority priority priorityIterator s setInt priority s setInt priority i s executeUpdate
String sql getStatements getLockCreateStatement statement connection prepareStatement sql statement ResultSet rs statement executeQuery rs next statement execute Exception e Exception e e exceptionHandler exceptionHandler handle e
statement ResultSet rs statement executeQuery rs next statement execute Exception e Exception e e exceptionHandler exceptionHandler handle e handlerException LOG error exceptionHandler getClass getCanonicalName handlerException e handlerException
message MessageId id message getMessageId debug LOG isDebugEnabled message incrementReferenceCount RecordLocation location peristenceAdapter writeCommand message message isResponseRequired debug
message incrementReferenceCount RecordLocation location peristenceAdapter writeCommand message message isResponseRequired context debug LOG debug id location addMessage context message location debug LOG debug id location inFlightTxLocations add location transactionStore addMessage message location context debug
addMessage context message location debug LOG debug id location inFlightTxLocations add location transactionStore addMessage message location context debug LOG debug id location inFlightTxLocations remove location addMessage context message location
ack debug LOG isDebugEnabled JournalQueueAck remove JournalQueueAck remove setDestination destination remove setMessageAck ack RecordLocation location peristenceAdapter writeCommand remove ack isResponseRequired debug
remove setMessageAck ack RecordLocation location peristenceAdapter writeCommand remove ack isResponseRequired debug LOG debug ack getLastMessageId location removeMessage ack location debug LOG debug ack getLastMessageId location inFlightTxLocations add location transactionStore removeMessage ack location debug
removeMessage ack location debug LOG debug ack getLastMessageId location inFlightTxLocations add location transactionStore removeMessage ack location debug LOG debug ack getLastMessageId location inFlightTxLocations remove location removeMessage ack location
e LOG warn e getMessage e size message getSize message decrementReferenceCount size persitanceAdapter commitTransaction context persitanceAdapter beginTransaction context size persitanceAdapter commitTransaction context persitanceAdapter beginTransaction context Iterator MessageAck iterator cpRemovedMessageLocations iterator iterator MessageAck ack iterator next longTermStore removeMessage transactionTemplate getContext ack
futureTasks add task checkpointExecutor execute task e LOG error e e Iterator JournalTopicMessageStore iterator topics values iterator iterator JournalTopicMessageStore ms iterator next task ms checkpoint futureTasks add task checkpointExecutor execute task
Iterator JournalTopicMessageStore iterator topics values iterator iterator JournalTopicMessageStore ms iterator next FutureTask RecordLocation task FutureTask RecordLocation RecordLocation RecordLocation ms checkpoint futureTasks add task checkpointExecutor execute task e LOG error e e Iterator FutureTask RecordLocation iter futureTasks iterator iter FutureTask RecordLocation ft iter next
RecordLocation ms checkpoint futureTasks add task checkpointExecutor execute task e LOG error e e FutureTask RecordLocation iter futureTasks iter FutureTask RecordLocation ft iter next RecordLocation mark ft get mark newMark newMark mark newMark mark e
JournalTransaction command JournalTransaction c command JournalTransaction command JournalTransaction JournalTransaction tx command command tx tx getOperations iter tx getOperations iter TxOperation op TxOperation iter next op TxOperation op store replayAddMessage context Message op data op TxOperation op store replayRemoveMessage context MessageAck op data
tx getOperations iter tx getOperations iter TxOperation op TxOperation iter next op TxOperation op store replayAddMessage context Message op data op TxOperation op store replayRemoveMessage context MessageAck op data op TxOperation JournalTopicAck ack JournalTopicAck op data JournalTopicMessageStore op store replayAcknowledge context ack getClientId ack getSubscritionName ack getMessageId transactionCounter
context clientId subscriptionName messageId debug LOG isDebugEnabled JournalTopicAck ack JournalTopicAck ack setDestination destination ack setMessageId messageId ack setMessageSequenceId messageId getBrokerSequenceId ack setSubscritionName subscriptionName ack setClientId clientId ack setTransactionId context getTransaction context getTransaction getTransactionId RecordLocation location peristenceAdapter writeCommand ack SubscriptionKey key SubscriptionKey clientId subscriptionName context debug
JournalTopicAck ack JournalTopicAck ack setDestination destination ack setMessageId messageId ack setMessageSequenceId messageId getBrokerSequenceId ack setSubscritionName subscriptionName ack setClientId clientId ack setTransactionId context getTransaction context getTransaction getTransactionId RecordLocation location peristenceAdapter writeCommand ack SubscriptionKey key SubscriptionKey clientId subscriptionName context debug LOG debug messageId location acknowledge messageId location key debug
RecordLocation location peristenceAdapter writeCommand ack SubscriptionKey key SubscriptionKey clientId subscriptionName debug LOG debug messageId location acknowledge messageId location key debug LOG debug messageId location inFlightTxLocations add location transactionStore acknowledge ack location debug
acknowledge messageId location key debug LOG debug messageId location inFlightTxLocations add location transactionStore acknowledge ack location debug LOG debug messageId location inFlightTxLocations remove location acknowledge messageId location key
target name value Class clazz target getClass target SSLServerSocket clazz SSLServerSocket Method setter findSetterMethod clazz name setter setter setAccessible value value getClass setter getParameterTypes setter invoke target value setter invoke target convert value setter getParameterTypes
Connection pooledConnection Connection pooledConnection2 Session session Session session2 Queue tempQueue Queue normalQueue pooledConnection pooledFactory createConnection session pooledConnection createSession Session AUTO_ACKNOWLEDGE tempQueue session createTemporaryQueue
Connection pooledConnection Connection pooledConnection2 Session session Session session2 Queue tempQueue Queue normalQueue pooledConnection pooledFactory createConnection session pooledConnection createSession Session AUTO_ACKNOWLEDGE tempQueue session createTemporaryQueue LOG info tempQueue getQueueName assertEquals countBrokerTemporaryQueues pooledConnection2 pooledFactory createConnection session2 pooledConnection2 createSession Session AUTO_ACKNOWLEDGE normalQueue session2 createQueue
Connection pooledConnection Session session Queue tempQueue pooledConnection pooledFactory createConnection session pooledConnection createSession Session AUTO_ACKNOWLEDGE tempQueue session createTemporaryQueue
Connection pooledConnection Session session Topic tempTopic pooledConnection pooledFactory createConnection session pooledConnection createSession Session AUTO_ACKNOWLEDGE tempTopic session createTemporaryTopic
Connection pooledConnection Session session Queue tempQueue pooledConnection pooledFactory createConnection session pooledConnection createSession Session AUTO_ACKNOWLEDGE tempQueue session createTemporaryQueue MessageConsumer consumer session createConsumer tempQueue consumer receiveNoWait
CountDownLatch failed CountDownLatch Connection connection pooledConnFact createConnection
connection LOG info failed countDown Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getTestName MessageProducer producer session createProducer queue brokerService stop assertTrue failed await TimeUnit SECONDS createBroker producer send session createMessage fail
failed countDown Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getTestName MessageProducer producer session createProducer queue brokerService stop assertTrue failed await TimeUnit SECONDS createBroker producer send session createMessage fail ex LOG info ex getMessage Connection connection2 pooledConnFact createConnection assertNotSame connection connection2
ActiveMQConnectionFactory factory ActiveMQConnectionFactory PooledConnectionFactory cf PooledConnectionFactory cf setConnectionFactory factory Connection connection cf createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE
cf serviceQueue Connection con cf createConnection con start Session session con createSession Session AUTO_ACKNOWLEDGE TemporaryQueue tempQueue session createTemporaryQueue TextMessage msg session createTextMessage msg setJMSReplyTo tempQueue MessageProducer producer session createProducer session createQueue serviceQueue producer send msg Thread sleep MessageConsumer consumer session createConsumer tempQueue Message replyMsg consumer receive
connectionFactory String queueName Connection con connectionFactory createConnection Session session con createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createConsumer session createQueue queueName javax jms Message inMessage consumer receive String requestMessageId inMessage getJMSMessageID
connectionFactory String queueName Connection con connectionFactory createConnection Session session con createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createConsumer session createQueue queueName javax jms Message inMessage consumer receive String requestMessageId inMessage getJMSMessageID LOG debug requestMessageId TextMessage replyMessage session createTextMessage replyMessage setJMSCorrelationID inMessage getJMSMessageID MessageProducer producer session createProducer inMessage getJMSReplyTo
conn setClientID conn start conn close ise LOG error ise getMessage fail ise getMessage PooledConnectionFactory cf stop cf createPooledConnectionFactory conn cf createConnection conn setClientID conn setClientID fail ise
cf createPooledConnectionFactory conn cf createConnection conn setClientID conn setClientID fail ise LOG debug ise conn close PooledConnectionFactory cf stop cf createPooledConnectionFactory conn cf createConnection conn start
PooledConnectionFactory cf PooledConnectionFactory cf setConnectionFactory ActiveMQConnectionFactory cf setMaxConnections cf setMaximumActiveSessionPerConnection cf setBlockIfSessionPoolIsFull LinkedList Connection connections LinkedList HashSet Session sessions HashSet Connection conn cf createConnection
connectionFactory Connection connection connectionFactory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue QUEUE MessageProducer producer session createProducer destination String msgTo TextMessage message session createTextMessage msgTo producer send message connection close
ConnectionFactory connectionFactory ActiveMQConnectionFactory connectionUri Connection connection connectionFactory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue QUEUE MessageConsumer consumer session createConsumer destination Message msg consumer receive msg numReceived numReceived
connectionFactory Connection connection connectionFactory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue QUEUE MessageProducer producer session createProducer destination String msgTo TextMessage message session createTextMessage msgTo producer send message connection close
ConnectionFactory connectionFactory ActiveMQConnectionFactory connectionUri Connection connection connectionFactory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue QUEUE MessageConsumer consumer session createConsumer destination Message msg consumer receive msg numReceived numReceived
brokerService metadata openwireVersion brokerService getStoreOpenWireVersion wireFormat setVersion metadata openwireVersion
JournalCommand command load location KahaAddMessageCommand addMessage command addMessage command getMessage addMessage KahaAddMessageCommand command IOException command location addMessage IOException location Message msg Message wireFormat unmarshal DataInputStream addMessage getMessage newInput msg t IOException ioe IOExceptionSupport create location t
indexLock writeLock lock start System currentTimeMillis requiresJournalReplay recoverProducerAudit requiresJournalReplay recoverAckMessageFileMap Location lastIndoubtPosition getRecoveryPosition Location recoveryPosition requiresJournalReplay journal getNextLocation lastIndoubtPosition recoveryPosition redoCounter dataFileRotationTracker recoveryPosition getDataFileId
requiresJournalReplay recoverAckMessageFileMap Location lastIndoubtPosition getRecoveryPosition Location recoveryPosition requiresJournalReplay journal getNextLocation lastIndoubtPosition recoveryPosition redoCounter dataFileRotationTracker recoveryPosition getDataFileId LOG info recoveryPosition recoveryPosition JournalCommand message load recoveryPosition metadata lastUpdate recoveryPosition process message recoveryPosition lastIndoubtPosition redoCounter
JournalCommand message load recoveryPosition metadata lastUpdate recoveryPosition process message recoveryPosition lastIndoubtPosition redoCounter IOException failedRecovery LOG debug recoveryPosition failedRecovery journal corruptRecoveryLocation recoveryPosition IOException recoveryPosition failedRecovery recoveryPosition journal getNextLocation recoveryPosition recoveryPosition dataFileRotationTracker recoveryPosition getDataFileId dataFileRotationTracker recoveryPosition getDataFileId journal cleanup LOG redoCounter
redoCounter IOException failedRecovery LOG debug recoveryPosition failedRecovery journal corruptRecoveryLocation recoveryPosition IOException recoveryPosition failedRecovery recoveryPosition journal getNextLocation recoveryPosition recoveryPosition dataFileRotationTracker recoveryPosition getDataFileId dataFileRotationTracker recoveryPosition getDataFileId journal cleanup LOG redoCounter LOG info recoveryPosition redoCounter LOG end System currentTimeMillis
LOG redoCounter LOG info recoveryPosition redoCounter LOG end System currentTimeMillis LOG info redoCounter end start tx tx recoverIndex tx Set TransactionId toRollback HashSet Set TransactionId toDiscard HashSet TransactionId it it TransactionId id it next id
LOG end System currentTimeMillis LOG info redoCounter end start tx tx recoverIndex tx Set TransactionId toRollback HashSet Set TransactionId toDiscard HashSet TransactionId it it TransactionId id it next id toRollback add id
start2 System currentTimeMillis lastAsyncJournalUpdate set location process data location before end System currentTimeMillis end start LOG LOG info start2 start end start2 persistenceAdapterStatistics addWriteTime end start checkpointLock readLock unlock after after run location
LOG LOG debug command getMessageId Long sequence sd messageIdIndex get tx command getMessageId sequence String subscriptionKey command getSubscriptionKey command sd orderIndex get tx sequence priority sd orderIndex lastGetPriority sd subscriptionAcks put tx subscriptionKey LastAck sequence priority MessageKeys keys sd orderIndex get tx sequence keys recordAckMessageReferenceLocation ackLocation keys location removeAckLocation command tx sd subscriptionKey sequence metadata lastUpdate ackLocation
iter Entry String Location subscription iter next dataFileId subscription getValue getDataFileId dataFileId StoredDestination destination entry getValue String subscriptionKey subscription getKey SequenceSet pendingAcks destination ackPositions get tx subscriptionKey pendingAcks pendingAcks pendingAcks pendingAcks LOG LOG trace subscriptionKey entry getKey dataFileId KahaSubscriptionCommand kahaSub destination subscriptions get tx subscriptionKey destination subLocations put tx subscriptionKey checkpointSubscriptionCommand kahaSub LOG StoredDestination destination entry getValue
dataFile journal dataFile getCorruptedBlocks LOG error dataFile getDataFileId dataFile getCorruptedBlocks corruptJournalDetected set corruptJournalDetected Location location location journal getNextLocation location process location load location location journal getNextLocation location oops LOG error location oops corruptJournalDetected set pendingCommit putAll inflightTransactions
e LOG error adapter xid e listener recover xid addedMessages acks recoveryWorkPending Broker broker multiKahaDBPersistenceAdapter getBrokerService getBroker txid broker multiKahaDBPersistenceAdapter txid recoveryWorkPending LOG warn txid logSomeContext txid
listener recover xid addedMessages acks recoveryWorkPending Broker broker multiKahaDBPersistenceAdapter getBrokerService getBroker txid broker multiKahaDBPersistenceAdapter txid recoveryWorkPending LOG warn txid logSomeContext txid txid LOG info txid
recoveryWorkPending Broker broker multiKahaDBPersistenceAdapter getBrokerService getBroker txid broker multiKahaDBPersistenceAdapter txid recoveryWorkPending LOG warn txid logSomeContext txid txid LOG info txid broker commitTransaction txid
metadataPage set metadata clear tx metadata metadataPage get metadata page metadataPage metadata state OPEN_STATE metadata size i i metadata i t sizeOfBin tx i t metadata binsActive metadata size t calcThresholds metadata state OPEN_STATE tx store metadataPage metadataMarshaller
metadata binsActive i i metadata binCapacity i HashBin Key Value bin getBin tx i Key Value entry bin tx HashBin Key Value resizeBin getBin tx entry getKey resizePageId resizeCapacity resizeBin put entry getKey entry getValue store tx resizeBin resizeBin metadata binsActive tx free metadata binPageId metadata binCapacity metadata binCapacity resizeCapacity metadata binPageId resizePageId metadata state OPEN_STATE tx store metadata page metadataMarshaller calcThresholds
dir equals directory n startsWith filePrefix n endsWith fileSuffix file String n file getName String numStr n substring filePrefix length n length fileSuffix length num Integer parseInt numStr DataFile dataFile DataFile file num fileMap put dataFile getDataFileId dataFile totalLength addAndGet dataFile getLength LinkedList DataFile l LinkedList fileMap values Collections sort l DataFile l
preAllocateDirectBuffer rewind FileChannel channel file getChannel remLen maxFileLength remLen remLen preAllocateDirectBuffer preAllocateDirectBuffer limit remLen writeLen channel write preAllocateDirectBuffer remLen writeLen preAllocateDirectBuffer rewind channel force channel position ignored LOG trace ignored
dataFile accessorPool disposeDataFileAccessors dataFile totalLength addAndGet dataFile getLength File directoryArchive getDirectoryArchive directoryArchive
dataFile accessorPool disposeDataFileAccessors dataFile totalLength addAndGet dataFile getLength File directoryArchive getDirectoryArchive directoryArchive LOG debug directoryArchive directoryArchive LOG LOG debug directoryArchive getAbsolutePath IOHelper mkdirs directoryArchive LOG debug dataFile directoryArchive getCanonicalPath dataFile move directoryArchive LOG debug
totalLength addAndGet dataFile getLength File directoryArchive getDirectoryArchive directoryArchive LOG debug directoryArchive directoryArchive LOG LOG debug directoryArchive getAbsolutePath IOHelper mkdirs directoryArchive LOG debug dataFile directoryArchive getCanonicalPath dataFile move directoryArchive LOG debug LOG debug dataFile dataFile
buff writeLong checksum getValue file seek nextWriteBatch offset maxStat statIdx maxStat stats statIdx sequence getLength all statIdx all stats statIdx LOG trace all maxStat file write sequence getData sequence getOffset sequence getLength ReplicationTarget replicationTarget journal getReplicationTarget replicationTarget replicationTarget replicate nextWriteBatch writes getHead location sequence file sync
IOExceptionSupport create t t recoveryFile writeLong w page getPageId recoveryFile write w getDiskBound tmpFilesForRemoval pageSize t Math max recoveryFileMinPageCount batch size recoveryFile setLength recoveryFileSizeForPages t recoveryFile seek recoveryFile writeLong nextTxid get recoveryFile writeLong checksum getValue recoveryFile writeInt batch size recoveryFile sync w batch writeFile seek toOffset w page getPageId writeFile write w getDiskBound tmpFilesForRemoval pageSize
scheduler scheduler scheduler stop scheduler pl pl unload pageFile pageFile unload journal journal close lockFile lockFile unlock lockFile initialized
result Location previousUpdate result getLastUpdate List JobLocation target result setNextTime command getNextExecutionTime result setLastUpdate location result setRescheduledCount command getRescheduledCount result result getRepeat result setRepeat result getRepeat index tx command getNextExecutionTime target index remove tx command getNextExecutionTime target target ArrayList target add result store incrementJournalCount tx location previousUpdate
t LOG warn t toString LOG debug t pageFile unload pageFile archive pageFile delete metaData JobSchedulerKahaDBMetaData pageFile loadPageFile startCheckpoint recover
indexLock writeLock unlock checkpointLock writeLock lock checkpointUpdate getCleanupOnStop checkpointLock writeLock unlock checkpointThread checkpointThread join checkpointThread
Iterator Entry Integer List Integer removals metaData getRemoveLocationTracker iterator tx List Integer orphans ArrayList Integer removals orphanedRemove Entry Integer List Integer entry removals next gcCandidateSet entry getKey Integer addLocation entry addLocation LOG trace entry getKey addLocation orphanedRemove orphanedRemove gcCandidateSet remove entry getKey LOG trace entry getKey
indexLock writeLock lock start System currentTimeMillis Location lastIndoubtPosition getRecoveryPosition Location recoveryPosition lastIndoubtPosition recoveryPosition redoCounter
start System currentTimeMillis Location lastIndoubtPosition getRecoveryPosition Location recoveryPosition lastIndoubtPosition recoveryPosition redoCounter LOG info recoveryPosition recoveryPosition JournalCommand message load recoveryPosition metaData setLastUpdateLocation recoveryPosition doRecover message recoveryPosition lastIndoubtPosition redoCounter
LOG info recoveryPosition recoveryPosition JournalCommand message load recoveryPosition metaData setLastUpdateLocation recoveryPosition doRecover message recoveryPosition lastIndoubtPosition redoCounter IOException failedRecovery LOG debug recoveryPosition failedRecovery journal corruptRecoveryLocation recoveryPosition IOException recoveryPosition failedRecovery recoveryPosition journal getNextLocation recoveryPosition LOG redoCounter
JournalCommand message load recoveryPosition metaData setLastUpdateLocation recoveryPosition doRecover message recoveryPosition lastIndoubtPosition redoCounter IOException failedRecovery LOG debug recoveryPosition failedRecovery journal corruptRecoveryLocation recoveryPosition IOException recoveryPosition failedRecovery recoveryPosition journal getNextLocation recoveryPosition LOG redoCounter LOG info recoveryPosition redoCounter end System currentTimeMillis
start System currentTimeMillis Location lastAppendLocation journal getLastAppendLocation undoCounter Map Entry String JobSchedulerImpl i i Map Entry String JobSchedulerImpl entry i next JobSchedulerImpl scheduler entry getValue JobLocation jobLocationIterator scheduler jobLocationIterator JobLocation job jobLocationIterator next job lastAppendLocation scheduler job getJobId job LOG trace job getJobId undoCounter undoCounter end System currentTimeMillis
undoCounter end System currentTimeMillis LOG info undoCounter end start undoCounter HashSet Integer missingJournalFiles HashSet Integer Map Entry String JobSchedulerImpl i i Map Entry String JobSchedulerImpl entry i next JobSchedulerImpl scheduler entry getValue JobLocation jobLocationIterator scheduler jobLocationIterator JobLocation job jobLocationIterator next missingJournalFiles add job getLocation getDataFileId job getLastUpdate missingJournalFiles add job getLastUpdate getDataFileId missingJournalFiles removeAll journal getFileMap keySet missingJournalFiles
HashSet Integer missingJournalFiles HashSet Integer Map Entry String JobSchedulerImpl i i Map Entry String JobSchedulerImpl entry i next JobSchedulerImpl scheduler entry getValue JobLocation jobLocationIterator scheduler jobLocationIterator JobLocation job jobLocationIterator next missingJournalFiles add job getLocation getDataFileId job getLastUpdate missingJournalFiles add job getLastUpdate getDataFileId missingJournalFiles removeAll journal getFileMap keySet missingJournalFiles LOG info missingJournalFiles HashSet Location corruptedLocations HashSet Location Collection DataFile dataFiles journal getFileMap values
producer send message connection close stopRestartBroker connectionFactory ActiveMQConnectionFactory brokerUri connection ActiveMQConnection connectionFactory createConnection connection start session connection createSession Session AUTO_ACKNOWLEDGE producer session createProducer session createQueue QUEUE_NAME producer setPriority producer send message displayQueueViews brokerService MessageConsumer jmsConsumer session createConsumer session createQueue QUEUE_NAME i i i message jmsConsumer receive assertNotNull i message
broker Map ObjectName DestinationView queueViews broker getAdminView getBroker getQueueViews ObjectName key queueViews DestinationView destinationView queueViews get key destinationView QueueView QueueView queueView QueueView destinationView
broker Map ObjectName DestinationView queueViews broker getAdminView getBroker getQueueViews ObjectName key queueViews DestinationView destinationView queueViews get key destinationView QueueView QueueView queueView QueueView destinationView LOG info key
broker Map ObjectName DestinationView queueViews broker getAdminView getBroker getQueueViews ObjectName key queueViews DestinationView destinationView queueViews get key destinationView QueueView QueueView queueView QueueView destinationView LOG info key LOG info queueView getName
broker Map ObjectName DestinationView queueViews broker getAdminView getBroker getQueueViews ObjectName key queueViews DestinationView destinationView queueViews get key destinationView QueueView QueueView queueView QueueView destinationView LOG info key LOG info queueView getName LOG info queueView cursorSize
broker Map ObjectName DestinationView queueViews broker getAdminView getBroker getQueueViews ObjectName key queueViews DestinationView destinationView queueViews get key destinationView QueueView QueueView queueView QueueView destinationView LOG info key LOG info queueView getName LOG info queueView cursorSize LOG info queueView getQueueSize
broker Map ObjectName DestinationView queueViews broker getAdminView getBroker getQueueViews ObjectName key queueViews DestinationView destinationView queueViews get key destinationView QueueView QueueView queueView QueueView destinationView LOG info key LOG info queueView getName LOG info queueView cursorSize LOG info queueView getQueueSize LOG info queueView getEnqueueCount
broker Map ObjectName DestinationView queueViews broker getAdminView getBroker getQueueViews ObjectName key queueViews DestinationView destinationView queueViews get key destinationView QueueView QueueView queueView QueueView destinationView LOG info key LOG info queueView getName LOG info queueView cursorSize LOG info queueView getQueueSize LOG info queueView getEnqueueCount LOG info queueView getDequeueCount
Collection DataFile files KahaDBPersistenceAdapter broker getPersistenceAdapter getStore getJournal getFileMap values DataFile dataFile DataFile files toArray RecoverableRandomAccessFile randomAccessFile dataFile openRandomAccessFile ArrayList Integer batchPositions findBatch randomAccessFile Integer MAX_VALUE
Collection DataFile files KahaDBPersistenceAdapter broker getPersistenceAdapter getStore getJournal getFileMap values DataFile dataFile DataFile files toArray RecoverableRandomAccessFile randomAccessFile dataFile openRandomAccessFile ArrayList Integer batchPositions findBatch randomAccessFile Integer MAX_VALUE LOG info batchPositions pos batchPositions get
id Collection DataFile files KahaDBPersistenceAdapter broker getPersistenceAdapter getStore getJournal getFileMap values DataFile dataFile DataFile files toArray RecoverableRandomAccessFile randomAccessFile dataFile openRandomAccessFile ArrayList Integer batchPositions findBatch randomAccessFile Integer MAX_VALUE LOG info batchPositions pos batchPositions get LOG info id pos randomAccessFile seek pos Journal BATCH_CONTROL_RECORD_HEADER length randomAccessFile writeLong randomAccessFile seek pos Journal BATCH_CONTROL_RECORD_SIZE size randomAccessFile readInt type randomAccessFile readByte
Collection DataFile files KahaDBPersistenceAdapter broker getPersistenceAdapter getStore getJournal getFileMap values DataFile dataFile DataFile files toArray RecoverableRandomAccessFile randomAccessFile dataFile openRandomAccessFile ArrayList Integer batchPositions findBatch randomAccessFile Integer MAX_VALUE LOG info batchPositions pos batchPositions get LOG info id pos randomAccessFile seek pos Journal BATCH_CONTROL_RECORD_HEADER length randomAccessFile writeLong randomAccessFile seek pos Journal BATCH_CONTROL_RECORD_SIZE size randomAccessFile readInt type randomAccessFile readByte LOG info size type randomAccessFile seek pos Journal BATCH_CONTROL_RECORD_SIZE size
id Collection DataFile files KahaDBPersistenceAdapter broker getPersistenceAdapter getStore getJournal getFileMap values DataFile dataFile DataFile files toArray id RecoverableRandomAccessFile randomAccessFile dataFile openRandomAccessFile ArrayList Integer batchPositions findBatch randomAccessFile Integer MAX_VALUE pos batchPositions get batchPositions size
File dataDir File indexToDelete File dataDir
startBroker sent produceMessagesToConsumeMultipleDataFiles numFiles getNumberOfJournalFiles
startBroker produceMessagesToConsumeMultipleDataFiles numFiles getNumberOfJournalFiles
produceMessagesToConsumeMultipleDataFiles numFiles getNumberOfJournalFiles LOG info numFiles assertTrue numFiles numFiles File dataDir broker getPersistenceAdapter getDirectory broker broker stop broker waitUntilStopped afterStop totalOpenFileDescriptorCount broker whackIndex dataDir LOG info afterStop doStartBroker LOG info adapter getStore getJournal getAccessorPool size assertEquals adapter getStore getJournal getAccessorPool size afterRecovery totalOpenFileDescriptorCount broker
doCreateBroker adapter setCheckpointInterval adapter setCleanupInterval broker start toSend produceMessagesToConsumeMultipleDataFiles toSend numFiles getNumberOfJournalFiles
maxJournalSizeBytes Journal DEFAULT_MAX_FILE_LENGTH doCreateBroker broker start toSend payload String produceMessagesToConsumeMultipleDataFiles toSend broker stop broker waitUntilStopped Instant b Instant now doStartBroker Instant e Instant now Duration timeElapsed Duration between b e
File dataDir name File indexToDelete File dataDir name
startBroker sent produceMessagesToConsumeMultipleDataFiles numFilesAfterSend getNumberOfJournalFiles
startBroker sent produceMessagesToConsumeMultipleDataFiles numFilesAfterSend getNumberOfJournalFiles LOG info sent numFilesAfterSend assertTrue numFilesAfterSend numFilesAfterSend received tryConsume destination sent assertEquals sent received numFilesAfterRestart getNumberOfJournalFiles
startBroker sent produceMessagesToConsumeMultipleDataFiles numFilesAfterSend getNumberOfJournalFiles LOG info sent numFilesAfterSend assertTrue numFilesAfterSend numFilesAfterSend received tryConsume destination sent assertEquals sent received numFilesAfterRestart getNumberOfJournalFiles LOG info numFilesAfterRestart KahaDBPersistenceAdapter broker getPersistenceAdapter getStore checkpoint numFilesAfterGC getNumberOfJournalFiles assertEquals sent received
pf PageFile getDirectory getClass getName pf setPageSize pf load tx pf tx id tx allocate getPageId BTreeIndex Long String test BTreeIndex Long String pf id test setKeyMarshaller LongMarshaller INSTANCE test setValueMarshaller StringMarshaller INSTANCE test load tx tx commit count reps diffs reps keyVal String payload String
diffs reps keyVal String payload String LOG info pf getPageCount pf getFreePageCount pf getPageCount pf getFreePageCount i i reps i tx pf tx test put tx keyVal payload tx commit tx pf tx k keyVal k keyVal k test remove tx k test clear tx tx commit diffs i pf getPageCount pf getFreePageCount
NUM_ITERATIONS pf PageFile getDirectory getClass getName pf setPageSize pf setWriteBatchSize pf load tx pf tx id tx allocate getPageId ListIndex String String test ListIndex String String pf id test setKeyMarshaller StringMarshaller INSTANCE test setValueMarshaller StringMarshaller INSTANCE test load tx tx commit expectedListEntries nextSequenceId
startSequenceId nextSequenceId sequenceSet concat String valueOf nextSequenceId test put tx String valueOf j sequenceSet sequenceSet test get tx String valueOf j test put tx String valueOf j String valueOf j exerciseAnotherIndex tx LOG info i i i assertTrue i test containsKey tx String valueOf i assertNotNull i test get tx String valueOf i LOG info assertEquals expectedListEntries test size i i i
test put tx String valueOf j sequenceSet sequenceSet test get tx String valueOf j test put tx String valueOf j String valueOf j exerciseAnotherIndex tx LOG info i i i assertTrue i test containsKey tx String valueOf i assertNotNull i test get tx String valueOf i LOG info assertEquals expectedListEntries test size i i i LOG debug i test size assertTrue i test containsKey tx String valueOf i assertNotNull i test remove tx String valueOf i
createPageFileAndIndex ListIndex String Long index ListIndex String Long index index load tx tx commit pageCount index getPageFile getPageCount assertEquals pageCount freePageCount index getPageFile getFreePageCount assertEquals freePageCount tx pf tx doInsert tx commit pageCount index getPageFile getPageCount
tx commit pageCount index getPageFile getPageCount assertEquals pageCount freePageCount index getPageFile getFreePageCount assertEquals freePageCount tx pf tx doInsert tx commit pageCount index getPageFile getPageCount LOG info pageCount assertTrue pageCount tx pf tx doRemove tx commit freePageCount index getPageFile getFreePageCount
tx commit pageCount index getPageFile getPageCount LOG info pageCount assertTrue pageCount tx pf tx doRemove tx commit freePageCount index getPageFile getFreePageCount LOG info freePageCount assertTrue freePageCount freePageCount LOG info tx pf tx doInsert tx commit freePageCount index getPageFile getFreePageCount
i i COUNT i listIndex add tx key i i tx commit LOG info COUNT System currentTimeMillis start LOG info listIndex getPageFile getPageCount start System currentTimeMillis tx pf tx removeCount Iterator Map Entry String Long iterator index iterator tx iterator iterator next iterator remove removeCount tx commit assertEquals COUNT removeCount
NUM_ITERATIONS pf PageFile getDirectory getClass getName pf setPageSize pf setEnablePageCaching pf setWriteBatchSize pf load tx pf tx id tx allocate getPageId ListIndex String SequenceSet test ListIndex String SequenceSet pf id test setKeyMarshaller StringMarshaller INSTANCE test setValueMarshaller SequenceSet Marshaller INSTANCE test load tx tx commit expectedListEntries nextSequenceId
startSequenceId nextSequenceId sequenceSet add nextSequenceId test put tx String valueOf j sequenceSet sequenceSet test get tx String valueOf j sequenceSet remove startSequenceId test put tx String valueOf j sequenceSet LOG info i i i assertTrue i test containsKey tx String valueOf i assertNotNull i test get tx String valueOf i LOG info assertEquals expectedListEntries test size i i i
test put tx String valueOf j sequenceSet sequenceSet test get tx String valueOf j sequenceSet remove startSequenceId test put tx String valueOf j sequenceSet LOG info i i i assertTrue i test containsKey tx String valueOf i assertNotNull i test get tx String valueOf i LOG info assertEquals expectedListEntries test size i i i LOG debug i test size assertTrue i test containsKey tx String valueOf i assertNotNull i test remove tx String valueOf i
NUM_ITERATIONS pf PageFile getDirectory getClass getName pf setPageSize pf setEnablePageCaching pf setWriteBatchSize pf load tx pf tx id tx allocate getPageId ListIndex String SequenceSet test ListIndex String SequenceSet pf id test setKeyMarshaller StringMarshaller INSTANCE test setValueMarshaller SequenceSet Marshaller INSTANCE test load tx tx commit expectedListEntries nextSequenceId
startSequenceId nextSequenceId sequenceSet add nextSequenceId test put tx String valueOf j sequenceSet sequenceSet test get tx String valueOf j sequenceSet remove startSequenceId test put tx String valueOf j sequenceSet LOG info i i i assertTrue i test containsKey tx String valueOf i assertNotNull i test get tx String valueOf i LOG info assertEquals expectedListEntries test size i i i
test put tx String valueOf j sequenceSet sequenceSet test get tx String valueOf j sequenceSet remove startSequenceId test put tx String valueOf j sequenceSet LOG info i i i assertTrue i test containsKey tx String valueOf i assertNotNull i test get tx String valueOf i LOG info assertEquals expectedListEntries test size i i i LOG debug i test size assertTrue i test containsKey tx String valueOf i assertNotNull i test remove tx String valueOf i
NUM_ITERATIONS pf PageFile getDirectory getClass getName pf setPageSize pf setEnablePageCaching pf setWriteBatchSize pf load tx pf tx id tx allocate getPageId ListIndex String SequenceSet test ListIndex String SequenceSet pf id test setKeyMarshaller StringMarshaller INSTANCE test setValueMarshaller SequenceSet Marshaller INSTANCE test load tx tx commit expectedListEntries nextSequenceId
startSequenceId nextSequenceId sequenceSet add nextSequenceId test put tx String valueOf j sequenceSet sequenceSet test get tx String valueOf j sequenceSet remove startSequenceId test put tx String valueOf j sequenceSet LOG info i i i assertTrue i test containsKey tx String valueOf i assertNotNull i test get tx String valueOf i LOG info assertEquals expectedListEntries test size i i i
test put tx String valueOf j sequenceSet sequenceSet test get tx String valueOf j sequenceSet remove startSequenceId test put tx String valueOf j sequenceSet LOG info i i i assertTrue i test containsKey tx String valueOf i assertNotNull i test get tx String valueOf i LOG info assertEquals expectedListEntries test size i i i LOG debug i test size assertTrue i test containsKey tx String valueOf i assertNotNull i test remove tx String valueOf i
sequenceSet remove startSequenceId test put tx String valueOf j sequenceSet LOG info i i i assertTrue i test containsKey tx String valueOf i assertNotNull i test get tx String valueOf i LOG info assertEquals expectedListEntries test size i i i LOG debug i test size assertTrue i test containsKey tx String valueOf i assertNotNull i test remove tx String valueOf i LOG debug i test size assertEquals expectedListEntries test size
LOG info i i i assertTrue i test containsKey tx String valueOf i assertNotNull i test get tx String valueOf i LOG info assertEquals expectedListEntries test size i i i LOG debug i test size assertTrue i test containsKey tx String valueOf i assertNotNull i test remove tx String valueOf i LOG debug i test size assertEquals expectedListEntries test size i i i LOG debug i test size assertTrue i test containsKey tx String valueOf i
currentDataFile ByteSequence byteSequence ByteSequence ConcurrentLinkedQueue Location locations ConcurrentLinkedQueue Location HashSet CountDownLatch latches HashSet CountDownLatch Location location underTest storeItem byteSequence locations add location latches add location getLatch underTest shutdown
MessageStore messageStore createStore ONE_MB addMessages messageStore sizeBeforeChange store getJournal getDiskSize
MessageStore messageStore createStore ONE_MB addMessages messageStore sizeBeforeChange store getJournal getDiskSize LOG info sizeBeforeChange store stop messageStore createStore ONE_MB verifyMessages messageStore sizeAfterChange store getJournal getDiskSize
MessageStore messageStore createStore ONE_MB addMessages messageStore sizeBeforeChange store getJournal getDiskSize
MessageStore messageStore createStore ONE_MB addMessages messageStore sizeBeforeChange store getJournal getDiskSize LOG info sizeBeforeChange store stop messageStore createStore ONE_MB verifyMessages messageStore sizeAfterChange store getJournal getDiskSize
TimeStatisticImpl sparse executeTest Journal PreallocationStrategy SPARSE_FILE name TimeStatisticImpl chunked_zeros executeTest Journal PreallocationStrategy CHUNKED_ZEROS name TimeStatisticImpl kernel executeTest Journal PreallocationStrategy OS_KERNEL_COPY name
TimeStatisticImpl sparse executeTest Journal PreallocationStrategy SPARSE_FILE name TimeStatisticImpl chunked_zeros executeTest Journal PreallocationStrategy CHUNKED_ZEROS name TimeStatisticImpl kernel executeTest Journal PreallocationStrategy OS_KERNEL_COPY name LOG info sparse
TimeStatisticImpl sparse executeTest Journal PreallocationStrategy SPARSE_FILE name TimeStatisticImpl chunked_zeros executeTest Journal PreallocationStrategy CHUNKED_ZEROS name TimeStatisticImpl kernel executeTest Journal PreallocationStrategy OS_KERNEL_COPY name LOG info sparse LOG info chunked_zeros
File dataDirectory File randInt KahaDBStore store KahaDBStore store deleteAllMessages store setDirectory dataDirectory store setPreallocationStrategy preallocationStrategy store start File journalLog File dataDirectory journalLog exists FileInputStream is FileInputStream journalLog FileChannel channel is getChannel
journalLog exists FileInputStream is FileInputStream journalLog FileChannel channel is getChannel LOG info journalLog channel size journalLog length Journal DEFAULT_MAX_FILE_LENGTH channel size channel position ByteBuffer buff ByteBuffer allocate channel read buff buff flip buff position assertEquals buff get
pf delete pf setEnableRecoveryFile pf load Transaction tx pf tx tx allocate tx commit pf flush PageFile pf2 PageFile File getName pf2 setEnableRecoveryFile pf2 load pf2 flush freePages pf2 getFreePageCount
PageFile pf PageFile File getName pf delete pf setEnableRecoveryFile pf load Transaction tx pf tx tx allocate tx commit
PageFile pf PageFile File getName pf delete pf setEnableRecoveryFile pf load Transaction tx pf tx tx allocate tx commit LOG info pf getFreePageCount pf flush PageFile pf2 PageFile File getName pf2 setEnableRecoveryFile pf2 load Transaction tx2 pf2 tx tx2 allocate tx2 commit
Thread sleep LOG info i i i Transaction txConcurrent pf2 tx Page page txConcurrent allocate String t i page set t txConcurrent store page StringMarshaller INSTANCE txConcurrent commit transactions add txConcurrent Thread sleep pf2 flush freePages pf2 getFreePageCount
PageFile pf PageFile File getName pf delete pf setEnableRecoveryFile pf load Transaction tx pf tx tx allocate tx commit
PageFile pf PageFile File getName pf delete pf setEnableRecoveryFile pf load Transaction tx pf tx tx allocate tx commit LOG info pf getFreePageCount pf flush PageFile pf2 PageFile File getName pf2 setEnableRecoveryFile pf2 load Transaction tx2 pf2 tx tx2 allocate tx2 commit
LOG info pf getFreePageCount pf flush PageFile pf2 PageFile File getName pf2 setEnableRecoveryFile pf2 load Transaction tx2 pf2 tx tx2 allocate tx2 commit LOG info pf2 getFreePageCount Transaction tx3 pf2 tx tx3 allocate pf2 flush freePages pf2 getFreePageCount
log4jLogger addAppender appender log4jLogger setLevel Level DEBUG PageFile pf PageFile File getName pf delete pf setEnableRecoveryFile pf load List Long pagesToFree LinkedList LOG info i i i Transaction tx pf tx Page page tx allocate String t i page set t tx store page StringMarshaller INSTANCE tx commit
Page page tx allocate String t i page set t tx store page StringMarshaller INSTANCE tx commit i pagesToFree add page getPageId pf flush LOG info pf getFreePageCount PageFile pf2 PageFile File getName pf2 setEnableRecoveryFile pf2 load LOG info pf2 getFreePageCount Transaction tx pf2 tx pagesToFree
pageId tx free tx load pageId StringMarshaller INSTANCE tx commit LOG info pf2 getFreePageCount List Transaction transactions LinkedList totalFreePages numberOfPages totalPages numberOfPages i i i tx pf2 tx Page page tx allocate String t i page set t tx store page StringMarshaller INSTANCE tx commit transactions add tx
totalPages numberOfPages i i i tx pf2 tx Page page tx allocate String t i page set t tx store page StringMarshaller INSTANCE tx commit transactions add tx page numberOfPages totalFreePages totalPages LOG info pf2 getFreePageCount
brokerService createBroker brokerService start produceWithScheduledDelayAndConsume LOG info jobSchedulerStore numSchedulerFiles jobSchedulerStore getJournal getFileMap size LOG info kahaDBPersistenceAdapter numKahadbFiles kahaDBPersistenceAdapter getStore getJournal getFileMap size
brokerService createBroker brokerService start produceWithScheduledDelayAndConsume LOG info jobSchedulerStore numSchedulerFiles jobSchedulerStore getJournal getFileMap size LOG info kahaDBPersistenceAdapter numKahadbFiles kahaDBPersistenceAdapter getStore getJournal getFileMap size
LOG info brokerService
_stateChangeDispatcher end _stateChangeDispatcher join e LOG debug e _zk changeState State NONE _zk close Thread th getSendThread th th join _zk e
resetDirectories directories String playload createPlayload ArrayList String expected_list ArrayList String MasterLevelDBStore master createMaster directories get CountDownFuture masterStart asyncStart master SlaveLevelDBStore slave1 createSlave master directories get SlaveLevelDBStore slave2 createSlave master directories get asyncStart slave2 masterStart await stores add master stores add slave1 stores add slave2 MessageStore ms master createQueueMessageStore ActiveMQQueue
stores add master stores add slave1 stores add slave2 MessageStore ms master createQueueMessageStore ActiveMQQueue LOG info master getDirectory assertEquals expected_list getMessages ms LOG info TOTAL i i TOTAL i i TOTAL LOG info i TOTAL i slave1 start slave2 stop
LOG info master getDirectory assertEquals expected_list getMessages ms LOG info TOTAL i i TOTAL i i TOTAL LOG info i TOTAL i slave1 start slave2 stop LOG info master getDirectory assertEquals expected_list getMessages ms String msgid j i addMessage ms msgid playload expected_list add msgid
assertEquals expected_list getMessages ms LOG info TOTAL i i TOTAL i i TOTAL LOG info i TOTAL i slave1 start slave2 stop LOG info master getDirectory assertEquals expected_list getMessages ms String msgid j i addMessage ms msgid playload expected_list add msgid LOG info master getDirectory
i i TOTAL i i TOTAL LOG info i TOTAL i slave1 start slave2 stop LOG info master getDirectory assertEquals expected_list getMessages ms String msgid j i addMessage ms msgid playload expected_list add msgid LOG info master getDirectory assertEquals expected_list getMessages ms LOG info master getDirectory master stop
configureSlave node2 node1 node2Dir SlaveLevelDBStore node3 createSlave node1 node3Dir stores add node3 asyncStart node2 asyncStart node3 masterStart await LOG info String playload createPlayload MessageStore ms node1 createQueueMessageStore ActiveMQQueue TOTAL i i TOTAL i i node3 stop String msgid i addMessage ms msgid playload
stores add node3 asyncStart node2 asyncStart node3 masterStart await LOG info String playload createPlayload MessageStore ms node1 createQueueMessageStore ActiveMQQueue TOTAL i i TOTAL i i node3 stop String msgid i addMessage ms msgid playload expected_list add msgid LOG info
Hashtable String String env Hashtable String String env put Context INITIAL_CONTEXT_FACTORY initialContextFactoryName providerURL env put Context PROVIDER_URL providerURL LogLog warn urlPkgPrefixes env put Context URL_PKG_PREFIXES urlPkgPrefixes securityPrincipalName env put Context SECURITY_PRINCIPAL securityPrincipalName securityCredentials env put Context SECURITY_CREDENTIALS securityCredentials LogLog warn
LOG debug getClientId checkConnected sendToMQTT PING_RESP_FRAME LOG debug getClientId connect onMQTTConnect connect
MQTTSubscription sub findSubscriptionStrategy getSubscription md getConsumerId sub MessageAck ack sub createMessageAck md PUBLISH publish sub createPublish ActiveMQMessage md getMessage publish publish publish md getMessage ack sub publish consumerAcks consumerAcks put publish messageId ack LOG trace publish messageId clientId connectionInfo getConnectionId getMQTTTransport sendToMQTT publish encode ack sub publish getMQTTTransport sendToActiveMQ ack
exception command LOG warn command exception toString
MQTT mqttPub createMQTTConnection mqttPub setUserName mqttPub setPassword AtomicBoolean failed AtomicBoolean mqttPub
MQTT mqttPub createMQTTConnection mqttPub setUserName mqttPub setPassword AtomicBoolean failed AtomicBoolean mqttPub frame LOG info frame frame CONNACK CONNACK connAck CONNACK connAck decode frame
frame LOG info frame frame CONNACK CONNACK connAck CONNACK connAck decode frame LOG info connAck assertEquals CONNACK Code CONNECTION_REFUSED_NOT_AUTHORIZED connAck code e failed set fail e getMessage err failed set err frame
assertEquals ANONYMOUS String msg getTopic msg ack connection disconnect mqtt setVersion connection mqtt blockingConnection connection connect qos connection subscribe Topic Topic NAMED QoS AT_MOST_ONCE assertEquals QoS AT_MOST_ONCE ordinal qos MQTT mqttPub createMQTTConnection mqttPub setUserName mqttPub setPassword BlockingConnection connectionPub mqttPub blockingConnection connectionPub connect connectionPub publish NAMED NAMED getBytes QoS AT_MOST_ONCE msg connection receive TimeUnit MILLISECONDS
MQTT mqttPub createMQTTConnection AtomicInteger errorCode AtomicInteger mqttPub
MQTT mqttPub createMQTTConnection AtomicInteger errorCode AtomicInteger mqttPub frame LOG info frame frame CONNACK CONNACK connAck CONNACK connAck decode frame
MQTT mqttPub createMQTTConnection AtomicInteger errorCode AtomicInteger mqttPub frame LOG info frame frame CONNACK CONNACK connAck CONNACK connAck decode frame LOG info connAck errorCode set connAck code ordinal assertEquals CONNACK Code CONNECTION_REFUSED_IDENTIFIER_REJECTED connAck code e fail e getMessage frame
MQTT mqttPub createMQTTConnection mqttPub setUserName mqttPub setPassword AtomicInteger errorCode AtomicInteger mqttPub
MQTT mqttPub createMQTTConnection mqttPub setUserName mqttPub setPassword AtomicInteger errorCode AtomicInteger mqttPub frame LOG info frame frame CONNACK CONNACK connAck CONNACK connAck decode frame
mqttPub setPassword AtomicInteger errorCode AtomicInteger mqttPub frame LOG info frame frame CONNACK CONNACK connAck CONNACK connAck decode frame LOG info connAck errorCode set connAck code ordinal assertEquals CONNACK Code CONNECTION_REFUSED_BAD_USERNAME_OR_PASSWORD connAck code e fail e getMessage frame
CONNECT connect CONNECT connect cleanSession connect clientId UTF8Buffer DataByteArrayOutputStream output DataByteArrayOutputStream wireFormat marshal connect encode output Buffer marshalled output toBuffer DataByteArrayInputStream input DataByteArrayInputStream marshalled codec parse input marshalled length assertTrue frames isEmpty assertEquals frames size connect CONNECT decode frames get
CONNECT connect CONNECT connect cleanSession connect clientId UTF8Buffer DataByteArrayOutputStream output DataByteArrayOutputStream wireFormat marshal connect encode output Buffer marshalled output toBuffer DataByteArrayInputStream input DataByteArrayInputStream marshalled codec parse input marshalled length assertTrue frames isEmpty assertEquals frames size connect CONNECT decode frames get
CONNECT connect CONNECT connect cleanSession connect clientId UTF8Buffer connect userName UTF8Buffer connect password UTF8Buffer DataByteArrayOutputStream output DataByteArrayOutputStream wireFormat marshal connect encode output wireFormat marshal connect encode output Buffer marshalled output toBuffer DataByteArrayInputStream input DataByteArrayInputStream marshalled codec parse input marshalled length assertTrue frames isEmpty assertEquals frames size frame frames connect CONNECT decode frame
connect cleanSession connect clientId UTF8Buffer connect userName UTF8Buffer connect password UTF8Buffer DataByteArrayOutputStream output DataByteArrayOutputStream wireFormat marshal connect encode output Buffer marshalled output toBuffer DataByteArrayInputStream input DataByteArrayInputStream marshalled first marshalled length second marshalled length first codec parse input first codec parse input second assertTrue frames isEmpty assertEquals frames size connect CONNECT decode frames get
CONNECT connect CONNECT connect cleanSession connect clientId UTF8Buffer connect userName UTF8Buffer connect password UTF8Buffer DataByteArrayOutputStream output DataByteArrayOutputStream wireFormat marshal connect encode output Buffer marshalled output toBuffer DataByteArrayInputStream input DataByteArrayInputStream marshalled size marshalled length size codec parse input assertTrue frames isEmpty assertEquals frames size connect CONNECT decode frames get
THREAD_COUNT CONNECTION_COUNT ExecutorService executorService Executors newFixedThreadPool THREAD_COUNT AtomicInteger clientIdGemeratpr AtomicInteger CONNECTION_COUNT executorService MQTT mqtt createMQTTConnection mqtt setClientId clientIdGemeratpr incrementAndGet mqtt setCleanSession BlockingConnection connection mqtt blockingConnection connection connect connection disconnect
MqttClient connection createClient getTestName String topics topics
String topicName MQTT mqtt createMQTTConnection mqtt setKeepAlive String RETAIN String TOPICA topicName String clientIds String clientId clientIds cleanSession equals clientId
msg connection receive TimeUnit MILLISECONDS assertNotNull clientId msg assertEquals RETAIN String msg getPayload msg ack assertNull connection receive TimeUnit MILLISECONDS connection disconnect connection mqtt blockingConnection connection connect LOG info connection subscribe Topic Topic TOPICA QoS AT_LEAST_ONCE msg connection receive TimeUnit MILLISECONDS assertNotNull clientId msg assertEquals RETAIN String msg getPayload msg ack assertNull connection receive TimeUnit MILLISECONDS
MQTT mqtt createMQTTConnection mqtt setClientId mqtt setKeepAlive mqtt setCleanSession List PUBLISH publishList ArrayList PUBLISH mqtt
mqtt setClientId mqtt setKeepAlive mqtt setCleanSession List PUBLISH publishList ArrayList PUBLISH mqtt frame LOG debug frame frame PUBLISH PUBLISH publish PUBLISH publish decode frame e fail e getMessage publishList add publish frame
MQTT mqtt createMQTTConnection mqtt setKeepAlive List PUBLISH publishList ArrayList PUBLISH mqtt
MQTT mqtt createMQTTConnection mqtt setKeepAlive List PUBLISH publishList ArrayList PUBLISH mqtt frame LOG debug frame frame PUBLISH PUBLISH publish PUBLISH publish decode frame e fail e getMessage publishList add publish frame
MQTT mqtt createMQTTConnection mqtt setKeepAlive Map Short PUBLISH publishMap ConcurrentHashMap Short PUBLISH mqtt
MQTT mqtt createMQTTConnection mqtt setKeepAlive Map Short PUBLISH publishMap ConcurrentHashMap Short PUBLISH mqtt frame LOG debug frame frame PUBLISH PUBLISH publish PUBLISH publish decode frame
Map Short PUBLISH publishMap ConcurrentHashMap Short PUBLISH frame LOG debug frame frame PUBLISH PUBLISH publish PUBLISH publish decode frame LOG debug publish e fail e getMessage publishMap publish messageId assertTrue publish dup publishMap put publish messageId publish frame
String cleanClientIds String Map Short PUBLISH publishMap ConcurrentHashMap Short PUBLISH MQTT mqtts MQTT cleanClientIds length i i cleanClientIds length i mqtts i createMQTTConnection mqtts i setKeepAlive mqtts i
String cleanClientIds String Map Short PUBLISH publishMap ConcurrentHashMap Short PUBLISH MQTT mqtts MQTT cleanClientIds length i i cleanClientIds length i mqtts i createMQTTConnection mqtts i setKeepAlive mqtts i frame LOG debug frame frame PUBLISH PUBLISH publish PUBLISH publish decode frame
mqtts i setKeepAlive mqtts i frame LOG debug frame frame PUBLISH PUBLISH publish PUBLISH publish decode frame LOG info publish e fail e getMessage publishMap publish messageId assertTrue publish dup publishMap put publish messageId publish frame
String clientId AtomicReference BlockingConnection oldConnection AtomicReference BlockingConnection String TOPICA
MQTT mqtt createMQTTConnection mqtt setClientId mqtt setCleanSession Topic topic Topic QoS EXACTLY_ONCE BlockingConnection connection mqtt blockingConnection connection connect
MQTT mqtt createMQTTConnection mqtt setClientId mqtt setCleanSession Topic topic Topic QoS EXACTLY_ONCE BlockingConnection connection mqtt blockingConnection connection connect
mqtt setClientId mqtt setCleanSession BlockingConnection connection mqtt blockingConnection connection connect Topic topics Topic QoS EXACTLY_ONCE Topic QoS EXACTLY_ONCE Topic wildcardTopic Topic QoS AT_LEAST_ONCE connection subscribe wildcardTopic Topic topic topics connection publish topic name toString payload QoS AT_LEAST_ONCE received topics Message message connection receive assertNotNull message received payload message getPayload
PolicyMap policyMap PolicyMap PolicyEntry policyEntry PolicyEntry policyEntry setSubscriptionRecoveryPolicy LastImageSubscriptionRecoveryPolicy policyMap put ActiveMQTopic policyEntry brokerService setDestinationPolicy policyMap MQTT mqtt createMQTTConnection retain nonretain mqtt
String topicName connection subscribe Topic Topic topicName QoS EXACTLY_ONCE ActiveMQConnection activeMQConnection ActiveMQConnection cf createConnection activeMQConnection setUseRetroactiveConsumer activeMQConnection start Session s activeMQConnection createSession Session AUTO_ACKNOWLEDGE javax jms Queue consumerQ s createQueue MessageConsumer consumer s createConsumer consumerQ MQTTClientProvider provider getMQTTClientProvider initializeConnection provider String RETAINED provider publish topicName RETAINED getBytes EXACTLY_ONCE Message message connection receive TimeUnit SECONDS assertNotNull message String response String message getPayload
Session s activeMQConnection createSession Session AUTO_ACKNOWLEDGE javax jms Queue consumerQ s createQueue MessageConsumer consumer s createConsumer consumerQ MQTTClientProvider provider getMQTTClientProvider initializeConnection provider String RETAINED provider publish topicName RETAINED getBytes EXACTLY_ONCE Message message connection receive TimeUnit SECONDS assertNotNull message String response String message getPayload LOG info response ActiveMQMessage activeMQMessage ActiveMQMessage consumer receive assertNotNull activeMQMessage ByteSequence bs activeMQMessage getContent assertEquals RETAINED String bs data bs offset bs length
CLIENTS Integer getInteger
XAConnection connection createXASession connection createSession key isTransacted key getAckMode session session getInternalSession XASession XASession session getInternalSession getXAResource ActiveMQSession session getInternalSession getTransactionContext connection connection setHasExpired
connection createSession key isTransacted key getAckMode session session getInternalSession XASession XASession session getInternalSession getXAResource ActiveMQSession session getInternalSession getTransactionContext connection connection error setHasExpired LOG info connection error getMessage
connectionRequestInfo info connectionRequestInfo
e LOG warn e
bootstrapContext bootstrapContext brokerXmlConfig brokerXmlConfig Thread log debug Thread currentThread getContextClassLoader Thread currentThread setContextClassLoader getClass getClassLoader log debug Thread currentThread getContextClassLoader broker BrokerFactory createBroker URI brokerXmlConfig broker start setServerUrl broker getBrokerName e log warn brokerXmlConfig e getMessage
runningFlag log debug runningFlag log debug event log debug event event log debug event event log debug event event
log debug currentBatchSize
currentBatchSize log debug InboundContextSupport register session stale session session run log debug session session getUnconsumedMessages size stale stale log
log debug InboundContextSupport register session stale session session run log debug session session getUnconsumedMessages size stale e stale log log debug e log
session session run log debug session session getUnconsumedMessages size stale e stale log log debug e log log info e getMessage InboundContextSupport unregister log debug
e stale log log debug e log log info e getMessage InboundContextSupport unregister log debug stale log debug runningFlag pool removeFromPool
log log debug e log log info e getMessage InboundContextSupport unregister log debug log debug runningFlag pool removeFromPool runningFlag
log log info e getMessage InboundContextSupport unregister log debug log debug runningFlag pool removeFromPool runningFlag log debug pool returnToPool
afterDelivery session currentBatchSize session currentBatchSize endpoint afterDelivery e RuntimeException e e TransactionContext transactionContext session getTransactionContext transactionContext transactionContext log warn session commit e
ActiveMQSession session ActiveMQSession connection createSession activeMQAsfEndpointWorker transacted acknowledge MessageEndpoint endpoint batchSize activationSpec batchSize activationSpec getMaxMessagesPerBatchIntValue activationSpec endpoint createEndpoint ServerSessionImpl session activeMQAsfEndpointWorker workManager endpoint batchSize endpoint createEndpoint LocalAndXATransaction session getTransactionContext ServerSessionImpl session activeMQAsfEndpointWorker workManager endpoint batchSize
ss getExistingServerSession sessionLock unlock ss ss ss createServerSessionImpl sessionLock lock ss activeSessions JMSException ss getExistingServerSession activeSessions add ss
ss sessionLock lock activeSessions remove ss ss
ActiveMQSession session ActiveMQSession ss getSession List MessageDispatch l session getUnconsumedMessages l ActiveMQConnection connection activeMQAsfEndpointWorker getConnection connection MessageDispatch i l i MessageDispatch md i next connection md dispatchToSession md LOG trace session md LOG trace md session getConnection LOG trace session
closing set LOG debug activeCount closeSessions activeCount LOG
LOG info ActiveMQResourceAdapter ra ActiveMQResourceAdapter ra setServerUrl broker getTransportConnectorByScheme getPublishableConnectString
LOG info ActiveMQResourceAdapter ra ActiveMQResourceAdapter ra setServerUrl broker getTransportConnectorByScheme getPublishableConnectString LOG info ra getServerUrl
Set Thread threadSet Thread getAllStackTraces keySet Iterator Thread iter threadSet iterator iter Thread thread Thread iter next thread
ActiveMQConnectionFactory factory ActiveMQConnectionFactory brokerUri Connection connection factory createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE ActiveMQResourceAdapter adapter ActiveMQResourceAdapter adapter setServerUrl brokerUri adapter start StubBootstrapContext CountDownLatch messageDelivered CountDownLatch
RuntimeException orderedReceipt add message getIntProperty ORDER_PROP e e printStackTrace xaresource end xid XAResource TMFAIL xaresource rollback xid xaresource end xid XAResource TMSUCCESS xaresource prepare xid xaresource commit xid e
will returnValue Boolean FALSE allowing messageActivationSpec isUseRAManagedTransactionEnabled will returnValue Boolean TRUE allowing messageEndpointFactory createEndpoint with any XAResource will returnValue messageEndpoint allowing workManager scheduleWork Work with Matchers instanceOf Work with any with any ExecutionContext with any WorkListener will invocation LOG info invocation invocation getParameter ServerSessionImpl ServerSessionImpl serverSession1 ServerSessionImpl invocation getParameter run serverSession1 run
messageCountRef set CountDownLatch maxMessages CountDownLatch senderDone CountDownLatch CountDownLatch messageSent CountDownLatch maxMessages AtomicBoolean foundClosedSession AtomicBoolean i i maxMessages i MessageDispatch messageDispatch MessageDispatch ActiveMQMessage message ActiveMQTextMessage message setMessageId MessageId i message getMessageId setBrokerSequenceId i messageDispatch setMessage message messageDispatch setConsumerId ConsumerId ServerSessionImpl serverSession1
MessageDispatch messageDispatch MessageDispatch ActiveMQMessage message ActiveMQTextMessage message setMessageId MessageId i message getMessageId setBrokerSequenceId i messageDispatch setMessage message messageDispatch setConsumerId ConsumerId ServerSessionImpl serverSession1 serverSession1 ServerSessionImpl pool getServerSession ActiveMQSession session1 ActiveMQSession serverSession1 getSession session1 foundClosedSession set session1 dispatch messageDispatch messageSent countDown serverSession1 start
Element beanPropElement Element beanProp NodeList values beanPropElement getElementsByTagNameNS k k values k Node value values item k value Node beanClassTypeNode value getAttributes getNamedItem beanClassTypeNode propertiesClazzes add beanClassTypeNode getFirstChild getTextContent value propertiesClazzes Object springBean getClass getClassLoader loadClass value newInstance springBean FactoryBean initialProperties putAll Properties FactoryBean getMethod Class invoke springBean
value Node beanClassTypeNode value getAttributes getNamedItem beanClassTypeNode propertiesClazzes add beanClassTypeNode getFirstChild getTextContent value propertiesClazzes Object springBean getClass getClassLoader loadClass value newInstance springBean FactoryBean initialProperties putAll Properties FactoryBean getMethod Class invoke springBean e LOG debug propertiesClazzes e List Resource propResources LinkedList Resource value value
value propertiesClazzes Object springBean getClass getClassLoader loadClass value newInstance springBean FactoryBean initialProperties putAll Properties FactoryBean getMethod Class invoke springBean e LOG debug propertiesClazzes e List Resource propResources LinkedList Resource value value propResources add Utils resourceFromString filter value e LOG info value e Resource propResources
configToMonitor DtoBroker changed loadConfiguration configToMonitor changed changed
configToMonitor DtoBroker changed loadConfiguration configToMonitor changed changed LOG info configToMonitor Date lastModified
configToMonitor DtoBroker changed loadConfiguration configToMonitor changed currentConfiguration changed LOG info configToMonitor Date lastModified LOG debug filterPasswords currentConfiguration
newVirtualDest newVirtualDest addedVirtualDests add newVirtualDest existingVirtualDest existingVirtualDest removedVirtualDests add existingVirtualDest virtualDestinationInterceptor setVirtualDestinations getVirtualDestinations plugin info virtualDestinationInterceptor updatedExistingInterceptor ConnectionContext connectionContext connectionContext plugin getBrokerService getAdminConnectionContext plugin getBrokerService removedVirtualDest removedVirtualDests plugin virtualDestinationRemoved connectionContext removedVirtualDest
existingVirtualDest existingVirtualDest removedVirtualDests add existingVirtualDest virtualDestinationInterceptor setVirtualDestinations getVirtualDestinations plugin info virtualDestinationInterceptor updatedExistingInterceptor ConnectionContext connectionContext connectionContext plugin getBrokerService getAdminConnectionContext plugin getBrokerService removedVirtualDest removedVirtualDests plugin virtualDestinationRemoved connectionContext removedVirtualDest LOG info removedVirtualDest addedVirtualDest plugin virtualDestinationAdded connectionContext addedVirtualDest
prefix topic ActiveMQConnection connection ActiveMQConnectionFactory createActiveMQConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE ActiveMQMessageConsumer consumer ActiveMQMessageConsumer session createConsumer session createQueue prefix topic
consumerQ ActiveMQConnection connection ActiveMQConnectionFactory createActiveMQConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE ActiveMQMessageConsumer consumer ActiveMQMessageConsumer session createConsumer session createQueue consumerQ
consumerDestination ActiveMQConnection connection ActiveMQConnectionFactory createActiveMQConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE ActiveMQMessageConsumer consumer ActiveMQMessageConsumer session createConsumer session createQueue consumerDestination
ActiveMQDestination destinations brokerService getRegionBroker getDestinations ActiveMQDestination destinations
String brokerConfig applyNewConfig brokerConfig startBroker brokerConfig assertTrue brokerService isStarted assertEquals brokerService getNetworkConnectors size applyNewConfig brokerConfig SLEEP assertEquals brokerService getNetworkConnectors size ObjectName objectName ObjectName brokerService getBrokerObjectName toString RuntimeConfigurationBroker objectNamePropsAppendage RuntimeConfigurationViewMBean runtimeConfigurationView RuntimeConfigurationViewMBean brokerService getManagementContext newProxyInstance objectName RuntimeConfigurationViewMBean HashMap String String props HashMap String String IntrospectionSupport getProperties runtimeConfigurationView props
String brokerConfig applyNewConfig brokerConfig startBroker brokerConfig assertTrue brokerService isStarted assertEquals brokerService getNetworkConnectors size applyNewConfig brokerConfig SLEEP assertEquals brokerService getNetworkConnectors size ObjectName objectName ObjectName brokerService getBrokerObjectName toString RuntimeConfigurationBroker objectNamePropsAppendage RuntimeConfigurationViewMBean runtimeConfigurationView RuntimeConfigurationViewMBean brokerService getManagementContext newProxyInstance objectName RuntimeConfigurationViewMBean HashMap String String props HashMap String String IntrospectionSupport getProperties runtimeConfigurationView props LOG info props String result runtimeConfigurationView updateNow
assertTrue brokerService isStarted assertEquals brokerService getNetworkConnectors size applyNewConfig brokerConfig SLEEP assertEquals brokerService getNetworkConnectors size ObjectName objectName ObjectName brokerService getBrokerObjectName toString RuntimeConfigurationBroker objectNamePropsAppendage RuntimeConfigurationViewMBean runtimeConfigurationView RuntimeConfigurationViewMBean brokerService getManagementContext newProxyInstance objectName RuntimeConfigurationViewMBean HashMap String String props HashMap String String IntrospectionSupport getProperties runtimeConfigurationView props LOG info props String result runtimeConfigurationView updateNow LOG info result assertTrue result result contains assertEquals brokerService getNetworkConnectors size HashMap String String propsAfter HashMap String String IntrospectionSupport getProperties runtimeConfigurationView propsAfter
String brokerConfig applyNewConfig brokerConfig startBroker brokerConfig assertTrue brokerService isStarted assertEquals brokerService getNetworkConnectors size applyNewConfig brokerConfig SLEEP ObjectName objectName ObjectName brokerService getBrokerObjectName toString RuntimeConfigurationBroker objectNamePropsAppendage RuntimeConfigurationViewMBean runtimeConfigurationView RuntimeConfigurationViewMBean brokerService getManagementContext newProxyInstance objectName RuntimeConfigurationViewMBean HashMap String String props HashMap String String IntrospectionSupport getProperties runtimeConfigurationView props
String brokerConfig applyNewConfig brokerConfig startBroker brokerConfig assertTrue brokerService isStarted assertEquals brokerService getNetworkConnectors size applyNewConfig brokerConfig SLEEP ObjectName objectName ObjectName brokerService getBrokerObjectName toString RuntimeConfigurationBroker objectNamePropsAppendage RuntimeConfigurationViewMBean runtimeConfigurationView RuntimeConfigurationViewMBean brokerService getManagementContext newProxyInstance objectName RuntimeConfigurationViewMBean HashMap String String props HashMap String String IntrospectionSupport getProperties runtimeConfigurationView props LOG info props String result runtimeConfigurationView updateNow
applyNewConfig brokerConfig startBroker brokerConfig assertTrue brokerService isStarted assertEquals brokerService getNetworkConnectors size applyNewConfig brokerConfig SLEEP ObjectName objectName ObjectName brokerService getBrokerObjectName toString RuntimeConfigurationBroker objectNamePropsAppendage RuntimeConfigurationViewMBean runtimeConfigurationView RuntimeConfigurationViewMBean brokerService getManagementContext newProxyInstance objectName RuntimeConfigurationViewMBean HashMap String String props HashMap String String IntrospectionSupport getProperties runtimeConfigurationView props LOG info props String result runtimeConfigurationView updateNow LOG info result assertTrue result result contains HashMap String String propsAfter HashMap String String IntrospectionSupport getProperties runtimeConfigurationView propsAfter
ObjectName objectName ObjectName brokerService getBrokerObjectName toString RuntimeConfigurationBroker objectNamePropsAppendage RuntimeConfigurationViewMBean runtimeConfigurationView RuntimeConfigurationViewMBean brokerService getManagementContext newProxyInstance objectName RuntimeConfigurationViewMBean HashMap String String props HashMap String String IntrospectionSupport getProperties runtimeConfigurationView props LOG info props String result runtimeConfigurationView updateNow LOG info result assertTrue result result contains HashMap String String propsAfter HashMap String String IntrospectionSupport getProperties runtimeConfigurationView propsAfter LOG info propsAfter String propOfInterest assertEquals props get propOfInterest propsAfter get propOfInterest applyNewConfig brokerConfig SLEEP result runtimeConfigurationView updateNow
String brokerConfig System setProperty IOHelper getDefaultDataDirectory System setProperty brokerConfig startBroker brokerConfig assertTrue brokerService isStarted assertEquals brokerConfig brokerService getBrokerName ObjectName objectName ObjectName brokerService getBrokerObjectName toString RuntimeConfigurationBroker objectNamePropsAppendage RuntimeConfigurationViewMBean runtimeConfigurationView RuntimeConfigurationViewMBean brokerService getManagementContext newProxyInstance objectName RuntimeConfigurationViewMBean HashMap String String props HashMap String String IntrospectionSupport getProperties runtimeConfigurationView props
configName newConfigName Resource resource Utils resourceFromString File file File resource getFile configName FileOutputStream current FileOutputStream file FileInputStream modifications FileInputStream File resource getFile newConfigName modifications getChannel transferTo Long MAX_VALUE current getChannel current flush current getChannel force current close modifications close
String brokerConfig applyNewConfig brokerConfig startBroker brokerConfig assertTrue brokerService isStarted ObjectName objectName ObjectName brokerService getBrokerObjectName toString RuntimeConfigurationBroker objectNamePropsAppendage RuntimeConfigurationViewMBean runtimeConfigurationView RuntimeConfigurationViewMBean brokerService getManagementContext newProxyInstance objectName RuntimeConfigurationViewMBean String propOfInterest HashMap String String props HashMap String String IntrospectionSupport getProperties runtimeConfigurationView props
String brokerConfig applyNewConfig brokerConfig startBroker brokerConfig assertTrue brokerService isStarted ObjectName objectName ObjectName brokerService getBrokerObjectName toString RuntimeConfigurationBroker objectNamePropsAppendage RuntimeConfigurationViewMBean runtimeConfigurationView RuntimeConfigurationViewMBean brokerService getManagementContext newProxyInstance objectName RuntimeConfigurationViewMBean String propOfInterest HashMap String String props HashMap String String IntrospectionSupport getProperties runtimeConfigurationView props LOG info props assertNotEquals props get propOfInterest String result runtimeConfigurationView updateNow
applyNewConfig brokerConfig startBroker brokerConfig assertTrue brokerService isStarted ObjectName objectName ObjectName brokerService getBrokerObjectName toString RuntimeConfigurationBroker objectNamePropsAppendage RuntimeConfigurationViewMBean runtimeConfigurationView RuntimeConfigurationViewMBean brokerService getManagementContext newProxyInstance objectName RuntimeConfigurationViewMBean String propOfInterest HashMap String String props HashMap String String IntrospectionSupport getProperties runtimeConfigurationView props LOG info props assertNotEquals props get propOfInterest String result runtimeConfigurationView updateNow LOG info result assertTrue result contains HashMap String String propsAfter HashMap String String IntrospectionSupport getProperties runtimeConfigurationView propsAfter
System setProperty System setProperty String brokerConfig applyNewConfig brokerConfig startBroker brokerConfig assertTrue brokerService isStarted ObjectName objectName ObjectName brokerService getBrokerObjectName toString RuntimeConfigurationBroker objectNamePropsAppendage RuntimeConfigurationViewMBean runtimeConfigurationView RuntimeConfigurationViewMBean brokerService getManagementContext newProxyInstance objectName RuntimeConfigurationViewMBean String propOfInterest HashMap String String props HashMap String String IntrospectionSupport getProperties runtimeConfigurationView props
System setProperty System setProperty String brokerConfig applyNewConfig brokerConfig startBroker brokerConfig assertTrue brokerService isStarted ObjectName objectName ObjectName brokerService getBrokerObjectName toString RuntimeConfigurationBroker objectNamePropsAppendage RuntimeConfigurationViewMBean runtimeConfigurationView RuntimeConfigurationViewMBean brokerService getManagementContext newProxyInstance objectName RuntimeConfigurationViewMBean String propOfInterest HashMap String String props HashMap String String IntrospectionSupport getProperties runtimeConfigurationView props
ActiveMQDestination destinations brokerService getRegionBroker getDestinations ActiveMQDestination destinations
f setMaximumActiveSessionPerConnection maximumActive f setConnectionFactory connectionFactory pooledConnectionFactory f t LOGGER debug t t pooledConnectionFactory transactionManager LOGGER debug XaPooledConnectionFactory f XaPooledConnectionFactory f setTransactionManager TransactionManager transactionManager f setMaxConnections maxConnections f setMaximumActiveSessionPerConnection maximumActive f setConnectionFactory connectionFactory pooledConnectionFactory f t
LOGGER debug XaPooledConnectionFactory f XaPooledConnectionFactory f setTransactionManager TransactionManager transactionManager f setMaxConnections maxConnections f setMaximumActiveSessionPerConnection maximumActive f setConnectionFactory connectionFactory pooledConnectionFactory f t LOGGER debug t t pooledConnectionFactory LOGGER debug PooledConnectionFactory f PooledConnectionFactory f setMaxConnections maxConnections f setMaximumActiveSessionPerConnection maximumActive
uri Resource resource Utils resourceFromString uri
String destName ConnectionFactory factory org apache activemq ActiveMQConnectionFactory Connection conn factory createConnection Session sess conn createSession Session AUTO_ACKNOWLEDGE Destination dest sess createQueue destName MessageProducer producer sess createProducer dest i i i String messageText i
Thread sleep Math random SLEEP e e printStackTrace TransactionTemplate tt TransactionTemplate txManager tt queue queue session session createTextMessage queue BODY
ConnectionFactory connectionFactory ActiveMQConnectionFactory brokerService getTransportConnectors get getConnectUri toString Connection connection connectionFactory createConnection connection start Session session connection createSession Session CLIENT_ACKNOWLEDGE Queue queue session createQueue MessageProducer producer session createProducer queue
messageListenerContainer setReceiveTimeout messageListenerContainer setRecoveryInterval messageListenerContainer setAcceptMessagesWhileStopping messageListenerContainer setCacheLevel DefaultMessageListenerContainer CACHE_NONE messageListenerContainer setSessionTransacted messageListenerContainer message message TextMessage RuntimeException TextMessage textMessage TextMessage message String text textMessage getText messageDeliveryCount message getIntProperty JMSX_DELIVERY_COUNT messageDeliveryCount messageRedelivered set
FrameTranslator header FrameTranslator translator frameTranslator header translator jmsFrameTranslators get header translator
FrameTranslator header FrameTranslator translator frameTranslator header translator jmsFrameTranslators get header translator LOG info header translator FrameTranslator FRAME_TRANSLATOR_FINDER newInstance header translator
header translator jmsFrameTranslators get header translator LOG info header translator FrameTranslator FRAME_TRANSLATOR_FINDER newInstance header translator LOG info header jmsFrameTranslators put header translator LOG error header translator JmsFrameTranslator
hbReadInterval Long parseLong keepAliveOpts hbWriteInterval Long parseLong keepAliveOpts ProtocolException heartBeatConfig StompInactivityMonitor monitor stompTransport getInactivityMonitor monitor setReadCheckTime hbReadInterval hbGracePeriodMultiplier monitor setInitialDelayTime Math min hbReadInterval hbWriteInterval monitor setWriteCheckTime hbWriteInterval monitor startMonitoring hbReadInterval hbWriteInterval
ex LOG error ex exceptions add ex t1 start assertTrue brokerService getTransportConnectors get connectionCount TimeUnit SECONDS TimeUnit assertTrue doneConnect await TimeUnit SECONDS brokerService stop ServerSocket socket ServerSocketFactory getDefault createServerSocket socket setReuseAddress InetAddress address InetAddress getLocalHost socket bind InetSocketAddress address listenPort
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame LOG debug f assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf assertTrue f indexOf sessionHeader f indexOf f f substring sessionHeader length
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame trim
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf assertTrue f indexOf
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf assertTrue f indexOf LOG debug f startTime System currentTimeMillis f stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf assertTrue f indexOf
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf assertTrue f indexOf
assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf assertTrue f indexOf LOG debug f getProxyToBroker getCurrentConnectionsCount String message getQueueName Stomp NULL stompConnection sendFrame message stompConnection receiveFrame fail
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
LOG debug f assertTrue f startsWith String message getQueueName Stomp NULL stompConnection sendFrame message String frame getQueueName Stomp NULL stompConnection sendFrame frame StompFrame stompFrame stompConnection receive assertTrue stompFrame getAction equals frame getQueueName Stomp NULL stompConnection sendFrame frame stompFrame stompConnection receive assertTrue stompFrame getAction equals stompConnection sendFrame message frame stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame LOG debug f assertTrue f startsWith String message getQueueName Stomp NULL stompConnection sendFrame message String subscribe getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame received stompConnection receive
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame LOG debug f assertTrue f startsWith String message getQueueName Stomp NULL stompConnection sendFrame message String subscribe getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame received stompConnection receive LOG info received assertTrue received getAction received getAction equals String ack received getHeaders get Stomp NULL stompConnection sendFrame ack StompFrame error stompConnection receive
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
MSG_COUNT String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
String f stompConnection receiveFrame LOG debug f assertTrue f startsWith i i i String message getQueueName i Stomp NULL stompConnection sendFrame message StompFrame repsonse stompConnection receive assertEquals repsonse getHeaders get Stomp Headers Response RECEIPT_ID String subscribe getQueueName Stomp NULL stompConnection sendFrame subscribe i i i StompFrame message stompConnection receive assertEquals Stomp Responses MESSAGE message getAction assertEquals message getHeaders get Stomp Headers Message SUBSCRIPTION StompFrame browseDone stompConnection receive
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
stompConnection setVersion Stomp V1_1 String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
stompConnection setVersion Stomp V1_1 String domain ObjectName brokerName ObjectName domain BrokerViewMBean view BrokerViewMBean brokerService getManagementContext newProxyInstance brokerName BrokerViewMBean String connectFrame Stomp NULL stompConnection sendFrame connectFrame String frame stompConnection receiveFrame
stompConnection setVersion Stomp V1_1 String domain ObjectName brokerName ObjectName domain BrokerViewMBean view BrokerViewMBean brokerService getManagementContext newProxyInstance brokerName BrokerViewMBean String connectFrame Stomp NULL stompConnection sendFrame connectFrame String frame stompConnection receiveFrame LOG debug frame assertTrue frame startsWith assertEquals view getDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame StompFrame receipt stompConnection receive
stompConnection sendFrame connectFrame String frame stompConnection receiveFrame LOG debug frame assertTrue frame startsWith assertEquals view getDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame StompFrame receipt stompConnection receive LOG debug receipt assertTrue receipt getAction startsWith assertEquals receipt getHeaders get assertEquals view getDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame receipt stompConnection receive
stompConnection sendFrame frame receipt stompConnection receive LOG debug receipt assertTrue receipt getAction startsWith assertEquals receipt getHeaders get assertEquals view getDurableTopicSubscribers length frame Stomp NULL stompConnection sendFrame frame getProxyToBroker getCurrentConnectionsCount stompConnect stompConnection sendFrame connectFrame frame stompConnection receiveFrame
stompConnection sendFrame frame getProxyToBroker getCurrentConnectionsCount stompConnect stompConnection sendFrame connectFrame frame stompConnection receiveFrame LOG debug frame assertTrue frame startsWith assertEquals view getDurableTopicSubscribers length assertEquals view getInactiveDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame receipt stompConnection receive
stompConnect stompConnection sendFrame connectFrame frame stompConnection receiveFrame LOG debug frame assertTrue frame startsWith assertEquals view getDurableTopicSubscribers length assertEquals view getInactiveDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame receipt stompConnection receive LOG debug frame assertTrue receipt getAction startsWith assertEquals receipt getHeaders get assertEquals view getInactiveDurableTopicSubscribers length frame getQueueName Stomp NULL
stompConnection setVersion Stomp V1_1 String domain ObjectName brokerName ObjectName domain BrokerViewMBean view BrokerViewMBean brokerService getManagementContext newProxyInstance brokerName BrokerViewMBean String connectFrame Stomp NULL stompConnection sendFrame connectFrame String frame stompConnection receiveFrame
stompConnection setVersion Stomp V1_1 String domain ObjectName brokerName ObjectName domain BrokerViewMBean view BrokerViewMBean brokerService getManagementContext newProxyInstance brokerName BrokerViewMBean String connectFrame Stomp NULL stompConnection sendFrame connectFrame String frame stompConnection receiveFrame LOG debug frame assertTrue frame startsWith assertEquals view getDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame StompFrame receipt stompConnection receive
stompConnection sendFrame connectFrame String frame stompConnection receiveFrame LOG debug frame assertTrue frame startsWith assertEquals view getDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame StompFrame receipt stompConnection receive LOG debug receipt assertTrue receipt getAction startsWith assertEquals receipt getHeaders get assertEquals view getDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame receipt stompConnection receive
LOG debug receipt assertTrue receipt getAction startsWith assertEquals receipt getHeaders get assertEquals view getDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame receipt stompConnection receive LOG debug receipt assertTrue receipt getAction startsWith assertEquals receipt getHeaders get assertEquals view getInactiveDurableTopicSubscribers length assertEquals view getDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame receipt stompConnection receive
assertTrue receipt getAction startsWith assertEquals receipt getHeaders get assertEquals view getInactiveDurableTopicSubscribers length assertEquals view getDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame receipt stompConnection receive LOG debug receipt assertTrue receipt getAction startsWith assertEquals receipt getHeaders get assertEquals view getInactiveDurableTopicSubscribers length assertEquals view getDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame receipt stompConnection receive
stompConnection setVersion Stomp V1_1 BrokerViewMBean view getProxyToBroker String connectFrame Stomp NULL stompConnection sendFrame connectFrame String frame stompConnection receiveFrame
stompConnection setVersion Stomp V1_1 BrokerViewMBean view getProxyToBroker String connectFrame Stomp NULL stompConnection sendFrame connectFrame String frame stompConnection receiveFrame LOG debug frame assertTrue frame startsWith assertEquals view getDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame StompFrame receipt stompConnection receive
stompConnection sendFrame connectFrame String frame stompConnection receiveFrame LOG debug frame assertTrue frame startsWith assertEquals view getDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame StompFrame receipt stompConnection receive LOG debug receipt assertTrue receipt getAction startsWith assertEquals receipt getHeaders get assertEquals view getDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame receipt stompConnection receive
stompConnection sendFrame frame receipt stompConnection receive LOG debug receipt assertTrue receipt getAction startsWith assertEquals receipt getHeaders get assertEquals view getDurableTopicSubscribers length frame Stomp NULL stompConnection sendFrame frame assertTrue view getCurrentConnectionsCount stompConnect stompConnection sendFrame connectFrame frame stompConnection receiveFrame
stompConnection sendFrame connectFrame frame stompConnection receiveFrame LOG debug frame assertTrue frame contains assertEquals view getDurableTopicSubscribers length assertEquals view getInactiveDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame receipt stompConnection receive assertEquals receipt getHeaders get Stomp Headers Response RECEIPT_ID frame getQueueName Stomp NULL stompConnection sendFrame frame receipt stompConnection receive assertEquals receipt getHeaders get Stomp Headers Response RECEIPT_ID frame getQueueName Stomp NULL
receipt stompConnection receive assertEquals receipt getHeaders get Stomp Headers Response RECEIPT_ID frame getQueueName Stomp NULL stompConnection sendFrame frame receipt stompConnection receive LOG debug receipt assertTrue receipt getAction startsWith assertEquals receipt getHeaders get assertEquals view getDurableTopicSubscribers length StompFrame message stompConnection receive assertEquals Stomp Responses MESSAGE message getAction assertEquals message getHeaders get Stomp Headers Message SUBSCRIPTION assertEquals view getDurableTopicSubscribers length assertEquals view getInactiveDurableTopicSubscribers length frame getQueueName Stomp NULL
frame Stomp NULL stompConnection sendFrame frame frame getQueueName ackMode Stomp NULL stompConnection sendFrame frame StompFrame receivedFirst stompConnection receive assertTrue receivedFirst getAction equals StompFrame receivedSecond stompConnection receive assertTrue receivedSecond getAction equals frame receivedSecond getHeaders get Stomp NULL stompConnection sendFrame frame frame receivedFirst getHeaders get Stomp NULL stompConnection sendFrame frame frame Stomp NULL stompConnection sendFrame frame String receipt stompConnection receiveFrame
stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame
stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame LOG info f assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf String send getQueueName stompConnection sendFrame send StompFrame receipt stompConnection receive
stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame
stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame LOG info f assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf String subscribe getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame receipt stompConnection receive
LOG info receipt assertTrue receipt getAction startsWith String receiptId receipt getHeaders get assertEquals receiptId String message getQueueName Stomp NULL stompConnection sendFrame message StompFrame received stompConnection receive assertTrue received getAction equals assertTrue received getHeaders containsKey Stomp Headers Message ACK_ID assertEquals received getBody String ackId received getHeaders get Stomp Headers Message ACK_ID String frame ackId Stomp NULL stompConnection sendFrame frame received stompConnection receive assertTrue received getAction equals
String message getQueueName Stomp NULL stompConnection sendFrame message StompFrame received stompConnection receive assertTrue received getAction equals assertTrue received getHeaders containsKey Stomp Headers Message ACK_ID assertEquals received getBody String ackId received getHeaders get Stomp Headers Message ACK_ID String frame ackId Stomp NULL stompConnection sendFrame frame received stompConnection receive assertTrue received getAction equals LOG info received frame ackId Stomp NULL stompConnection sendFrame frame receipt stompConnection receive
stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame
stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame LOG info f assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf String subscribe getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame receipt stompConnection receive
assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf String subscribe getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame receipt stompConnection receive LOG info receipt assertTrue receipt getAction startsWith String receiptId receipt getHeaders get assertEquals receiptId String message getQueueName Stomp NULL stompConnection sendFrame message message getQueueName Stomp NULL stompConnection sendFrame message StompFrame received stompConnection receive
StompFrame receipt stompConnection receive LOG info receipt assertTrue receipt getAction startsWith String receiptId receipt getHeaders get assertEquals receiptId String message getQueueName Stomp NULL stompConnection sendFrame message message getQueueName Stomp NULL stompConnection sendFrame message StompFrame received stompConnection receive LOG info received assertTrue received getAction equals assertTrue received getHeaders containsKey Stomp Headers Message ACK_ID assertEquals received getBody received stompConnection receive
LOG info received assertTrue received getAction equals assertTrue received getHeaders containsKey Stomp Headers Message ACK_ID assertEquals received getBody String frame received getHeaders get Stomp Headers Message ACK_ID Stomp NULL stompConnection sendFrame frame frame Stomp NULL stompConnection sendFrame frame assertTrue getProxyToBroker getCurrentConnectionsCount stompConnect stompConnection sendFrame connect frame stompConnection receiveFrame
String frame received getHeaders get Stomp Headers Message ACK_ID Stomp NULL stompConnection sendFrame frame frame Stomp NULL stompConnection sendFrame frame assertTrue getProxyToBroker getCurrentConnectionsCount stompConnect stompConnection sendFrame connect frame stompConnection receiveFrame LOG debug frame assertTrue frame startsWith stompConnection sendFrame subscribe receipt stompConnection receive
stompConnect stompConnection sendFrame connect frame stompConnection receiveFrame LOG debug frame assertTrue frame startsWith stompConnection sendFrame subscribe receipt stompConnection receive LOG info receipt assertTrue receipt getAction startsWith receiptId receipt getHeaders get assertEquals receiptId message getQueueName Stomp NULL stompConnection sendFrame message received stompConnection receive
MESSAGE_COUNT stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame
MESSAGE_COUNT stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame LOG info f assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf n n MESSAGE_COUNT n String message getQueueName String format n Stomp NULL stompConnection sendFrame message String subscribe getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame receipt stompConnection receive
assertTrue f indexOf n n MESSAGE_COUNT n String message getQueueName String format n Stomp NULL stompConnection sendFrame message String subscribe getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame receipt stompConnection receive LOG info receipt assertTrue receipt getAction startsWith String receiptId receipt getHeaders get assertEquals receiptId assertEquals MESSAGE_COUNT getProxyToQueue getQueueName getQueueSize String lastAckId n n MESSAGE_COUNT n StompFrame received stompConnection receive
LOG info receipt assertTrue receipt getAction startsWith String receiptId receipt getHeaders get assertEquals receiptId assertEquals MESSAGE_COUNT getProxyToQueue getQueueName getQueueSize String lastAckId n n MESSAGE_COUNT n StompFrame received stompConnection receive LOG info received assertTrue received getAction equals assertTrue received getHeaders containsKey Stomp Headers Message ACK_ID assertEquals String format n received getBody lastAckId received getHeaders get Stomp Headers Message ACK_ID String frame lastAckId Stomp NULL stompConnection sendFrame frame
stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame
stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame LOG info f assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf String subscribe getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame receipt stompConnection receive
received stompConnection receive assertTrue received getAction equals assertTrue received getHeaders containsKey Stomp Headers Message ACK_ID assertEquals received getBody String frame received getHeaders get Stomp Headers Message ACK_ID Stomp NULL stompConnection sendFrame frame frame Stomp NULL stompConnection sendFrame frame getProxyToBroker getCurrentConnectionsCount stompConnect stompConnection sendFrame connect frame stompConnection receiveFrame
String frame received getHeaders get Stomp Headers Message ACK_ID Stomp NULL stompConnection sendFrame frame frame Stomp NULL stompConnection sendFrame frame getProxyToBroker getCurrentConnectionsCount stompConnect stompConnection sendFrame connect frame stompConnection receiveFrame LOG debug frame assertTrue frame startsWith stompConnection sendFrame subscribe receipt stompConnection receive
MESSAGE_COUNT stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame
MESSAGE_COUNT stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame LOG info f assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf n n MESSAGE_COUNT n String message getQueueName String format n Stomp NULL stompConnection sendFrame message String subscribe getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame receipt stompConnection receive
assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf n n n String message getQueueName String format n Stomp NULL stompConnection sendFrame message String subscribe getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame receipt stompConnection receive LOG info receipt assertTrue receipt getAction startsWith String receiptId receipt getHeaders get assertEquals receiptId n n n StompFrame received stompConnection receive
MSG_COUNT String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
String f stompConnection receiveFrame LOG debug f assertTrue f startsWith i i i String message getQueueName i Stomp NULL stompConnection sendFrame message StompFrame repsonse stompConnection receive assertEquals repsonse getHeaders get Stomp Headers Response RECEIPT_ID String subscribe getQueueName Stomp NULL stompConnection sendFrame subscribe i i i StompFrame message stompConnection receive assertEquals Stomp Responses MESSAGE message getAction assertEquals message getHeaders get Stomp Headers Message SUBSCRIPTION StompFrame browseDone stompConnection receive
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame LOG debug f assertTrue f startsWith String subscribe getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame browseDone stompConnection receive
BrokerViewMBean view getProxyToBroker String connectFrame Stomp NULL stompConnection sendFrame connectFrame String frame stompConnection receiveFrame
BrokerViewMBean view getProxyToBroker String connectFrame Stomp NULL stompConnection sendFrame connectFrame String frame stompConnection receiveFrame LOG debug frame assertTrue frame startsWith assertEquals view getDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame StompFrame receipt stompConnection receive
StompFrame receipt stompConnection receive LOG debug receipt assertTrue receipt getAction startsWith assertEquals receipt getHeaders get assertEquals view getDurableTopicSubscribers length frame Stomp NULL stompConnection sendFrame frame stompConnection close getProxyToBroker getCurrentConnectionsCount stompConnect stompConnection sendFrame connectFrame frame stompConnection receiveFrame
stompConnection close getProxyToBroker getCurrentConnectionsCount stompConnect stompConnection sendFrame connectFrame frame stompConnection receiveFrame LOG debug frame assertTrue frame startsWith assertEquals view getDurableTopicSubscribers length assertEquals view getInactiveDurableTopicSubscribers length frame getQueueName Stomp NULL stompConnection sendFrame frame receipt stompConnection receive
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
MSG_COUNT numK bigPropContent numK Arrays fill bigPropContent Byte MAX_VALUE String bigProp String bigPropContent String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
MSG_COUNT numK bigPropContent numK Arrays fill bigPropContent Byte MAX_VALUE String bigProp String bigPropContent String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame LOG debug f assertTrue f startsWith usageStart brokerService getSystemUsage getMemoryUsage getUsage i i MSG_COUNT i String message getQueueName bigProp i Stomp NULL stompConnection sendFrame message StompFrame repsonse stompConnection receive
String bigProp String bigPropContent String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame LOG debug f assertTrue f startsWith usageStart brokerService getSystemUsage getMemoryUsage getUsage i i i String message getQueueName bigProp i Stomp NULL stompConnection sendFrame message StompFrame repsonse stompConnection receive LOG info repsonse assertEquals repsonse getHeaders get Stomp Headers Response RECEIPT_ID usageEnd brokerService getSystemUsage getMemoryUsage getUsage usageDiff usageEnd usageStart
MESSAGE_COUNT stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame
MESSAGE_COUNT stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame LOG info f assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf n n MESSAGE_COUNT n String message getQueueName String format n Stomp NULL stompConnection sendFrame message String subscribe getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame receipt stompConnection receive
n n MESSAGE_COUNT n String message getQueueName String format n Stomp NULL stompConnection sendFrame message String subscribe getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame receipt stompConnection receive LOG info receipt assertTrue receipt getAction startsWith String receiptId receipt getHeaders get assertEquals receiptId String begin Stomp NULL stompConnection sendFrame begin List String ackIds ArrayList MESSAGE_COUNT n n MESSAGE_COUNT n StompFrame received stompConnection receive
MESSAGE_COUNT stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame
MESSAGE_COUNT stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame LOG info f assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf n n MESSAGE_COUNT n String message getQueueName String format n Stomp NULL stompConnection sendFrame message String subscribe MESSAGE_COUNT getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame receipt stompConnection receive
n n MESSAGE_COUNT n String message getQueueName String format n Stomp NULL stompConnection sendFrame message String subscribe MESSAGE_COUNT getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame receipt stompConnection receive LOG info receipt assertTrue receipt getAction startsWith String receiptId receipt getHeaders get assertEquals receiptId String begin Stomp NULL stompConnection sendFrame begin List String ackIds ArrayList MESSAGE_COUNT n n MESSAGE_COUNT n StompFrame received stompConnection receive
MESSAGE_COUNT stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame
MESSAGE_COUNT stompConnection setVersion Stomp V1_2 String connect stompConnection sendFrame connect String f stompConnection receiveFrame LOG info f assertTrue f startsWith assertTrue f indexOf assertTrue f indexOf n n MESSAGE_COUNT n String message getQueueName String format n Stomp NULL stompConnection sendFrame message String subscribe MESSAGE_COUNT individual getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame receipt stompConnection receive
assertTrue f indexOf assertTrue f indexOf n n MESSAGE_COUNT n String message getQueueName String format n Stomp NULL stompConnection sendFrame message String subscribe MESSAGE_COUNT individual getQueueName Stomp NULL stompConnection sendFrame subscribe StompFrame receipt stompConnection receive LOG info receipt assertTrue receipt getAction startsWith String receiptId receipt getHeaders get assertEquals receiptId List String ackIds ArrayList MESSAGE_COUNT n n MESSAGE_COUNT n StompFrame received stompConnection receive
stompConnect HashMap String String subheaders HashMap String String subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame
stompConnect HashMap String String subheaders HashMap String String subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame LOG debug frame assertTrue frame trim startsWith Connection c cf createConnection c start StompFrame f stompConnection receive
stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame LOG debug frame assertTrue frame trim startsWith Connection c cf createConnection c start StompFrame f stompConnection receive LOG debug f toString assertEquals f getAction assertTrue f getBody length assertTrue f getBody startsWith c stop c close f stompConnection receive
stompConnect HashMap String String subheaders HashMap String String subheaders put Stomp Transformations JMS_JSON toString subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame
stompConnect HashMap String String subheaders HashMap String String subheaders put Stomp Transformations JMS_JSON toString subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame LOG debug frame assertTrue frame trim startsWith Connection c cf createConnection c start StompFrame f stompConnection receive
stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame LOG debug frame assertTrue frame trim startsWith Connection c cf createConnection c start StompFrame f stompConnection receive LOG debug f toString assertEquals f getAction assertTrue f getBody length assertTrue f getBody startsWith c stop c close f stompConnection receive
stompConnect HashMap String String subheaders HashMap String String subheaders put Stomp Transformations JMS_XML toString subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame
stompConnect HashMap String String subheaders HashMap String String subheaders put Stomp Transformations JMS_XML toString subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame LOG debug frame assertTrue frame trim startsWith Connection c cf createConnection c start StompFrame f stompConnection receive
stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame LOG debug frame assertTrue frame trim startsWith Connection c cf createConnection c start StompFrame f stompConnection receive LOG debug f toString assertEquals f getAction assertTrue f getBody length assertTrue f getBody startsWith c stop c close f stompConnection receive
stompConnect Destination dest ActiveMQQueue HashMap String String subheaders HashMap String String subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame
stompConnect Destination dest ActiveMQQueue HashMap String String subheaders HashMap String String subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame LOG debug frame assertTrue frame trim startsWith Connection c cf createConnection c start Session session c createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createConsumer dest assertNotNull consumer StompFrame f stompConnection receive
stompConnect Destination dest ActiveMQQueue HashMap String String subheaders HashMap String String subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame
Destination dest ActiveMQQueue HashMap String String subheaders HashMap String String subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame LOG debug frame assertTrue frame trim startsWith Connection c cf createConnection c start Session session c createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer dest Message mess session createTextMessage producer send mess StompFrame f stompConnection receive
stompConnect Destination dest ActiveMQQueue HashMap String String subheaders HashMap String String subheaders put Stomp Transformations JMS_ADVISORY_XML toString subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame
HashMap String String subheaders HashMap String String subheaders put Stomp Transformations JMS_ADVISORY_XML toString subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame LOG debug frame assertTrue frame trim startsWith Connection c cf createConnection c start Session session c createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer dest Message mess session createTextMessage producer send mess StompFrame f stompConnection receive
stompConnect Destination dest ActiveMQQueue HashMap String String subheaders HashMap String String subheaders put Stomp Transformations JMS_ADVISORY_JSON toString subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame
HashMap String String subheaders HashMap String String subheaders put Stomp Transformations JMS_ADVISORY_JSON toString subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame LOG debug frame assertTrue frame trim startsWith Connection c cf createConnection c start Session session c createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer dest Message mess session createTextMessage producer send mess StompFrame f stompConnection receive
Thread sleep Queue query session createQueue STATS_DESTINATION_PREFIX testQueue getQueueName Message msg session createMessage msg setJMSReplyTo replyTo producer send query msg e e printStackTrace child start stompConnect stompConnection connect stompConnection subscribe replyTo getTopicName Stomp Headers Subscribe AckModeValues AUTO stompConnection begin StompFrame f stompConnection receive stompConnection commit
cf setWatchTopicAdvisories stompConnect HashMap String String subheaders HashMap String String subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame
cf setWatchTopicAdvisories stompConnect HashMap String String subheaders HashMap String String subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame LOG debug frame assertTrue frame trim startsWith Connection connection cf createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE session createTemporaryQueue connection close StompFrame f stompConnection receive
cf setWatchTopicAdvisories stompConnect HashMap String String subheaders HashMap String String subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame
cf setWatchTopicAdvisories stompConnect HashMap String String subheaders HashMap String String subheaders put stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame LOG debug frame assertTrue frame trim startsWith Connection connection cf createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE session createTemporaryTopic connection close StompFrame f stompConnection receive
cf setWatchTopicAdvisories HashMap String String subheaders HashMap String String subheaders put stompConnect stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame
cf setWatchTopicAdvisories HashMap String String subheaders HashMap String String subheaders put stompConnect stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame LOG debug frame assertTrue frame trim startsWith Connection connection cf createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE session createTemporaryTopic session createTemporaryQueue ObjectName topicSubscribers brokerService getAdminView getTopicSubscribers ObjectName topicSubscribers
stompConnect stompConnection connect stompConnection subscribe Stomp Headers Subscribe AckModeValues AUTO subheaders String frame stompConnection receiveFrame LOG debug frame assertTrue frame trim startsWith Connection connection cf createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE session createTemporaryTopic session createTemporaryQueue ObjectName topicSubscribers brokerService getAdminView getTopicSubscribers ObjectName subscription topicSubscribers LOG info subscription connection close StompFrame f stompConnection receive
assertTrue frame trim startsWith Connection connection cf createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE session createTemporaryTopic session createTemporaryQueue ObjectName topicSubscribers brokerService getAdminView getTopicSubscribers ObjectName subscription topicSubscribers LOG info subscription connection close StompFrame f stompConnection receive LOG debug f toString assertEquals f getAction assertTrue f getBody length assertTrue f getBody startsWith f stompConnection receive
stompConnect String destinationA String destinationB String frame Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame assertTrue frame startsWith
stompConnect String destinationA String destinationB String frame Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame assertTrue frame startsWith
stompConnect String destinationA String destinationB String frame Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame assertTrue frame startsWith
stompConnect String destinationA String destinationB String frame Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame assertTrue frame startsWith frame destinationA destinationB Stomp NULL stompConnection sendFrame frame BrokerViewMBean brokerView getProxyToBroker assertTrue brokerView
stompConnect stompConnection sendFrame Stomp NULL StompFrame frame stompConnection receive assertTrue frame toString startsWith String send stompConnection sendFrame send StompFrame receipt stompConnection receive
stompConnect String connectFrame Stomp NULL stompConnection sendFrame connectFrame String response stompConnection receiveFrame trim
StompFrame frame connection receive TimeUnit SECONDS toMillis assertNotNull frame numReceived LOG numReceived numReceived LOG debug frame getHeaders get receiveCount incrementAndGet e numReceived LOG warn numReceived e getMessage ready countDown assertTrue started await TimeUnit MINUTES String frame TimeUnit SECONDS sleep
String index String message assertEquals brokerService getAdminView getTopicSubscribers length StompConnection producer stompConnect StompConnection consumer stompConnect subscribe consumer Integer toString index sendMessage producer index StompFrame frame consumer receive
String index String message assertEquals brokerService getAdminView getTopicSubscribers length StompConnection producer stompConnect StompConnection consumer stompConnect subscribe consumer Integer toString index sendMessage producer index StompFrame frame consumer receive
stompConnect Connection connection cf createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer ActiveMQQueue getQueueName Message message session createTextMessage producer send message
idx idx idx producer send message LOG debug idx producer close session close connection close String connectFrame Stomp NULL stompConnection sendFrame connectFrame stompConnection receiveFrame String frame getQueueName Stomp NULL stompConnection sendFrame frame messagesCount count count String receiveFrame stompConnection receiveFrame
String messageId getHeaderValue receiveFrame HEADER_MESSAGE_ID String ackmessage HEADER_MESSAGE_ID messageId Stomp NULL stompConnection sendFrame ackmessage messagesCount count stompDisconnect Thread sleep stompConnect connectFrame Stomp NULL stompConnection sendFrame connectFrame stompConnection receiveFrame frame getQueueName Stomp NULL stompConnection sendFrame frame count
stompConnection receiveFrame frame getQueueName Stomp NULL stompConnection sendFrame frame count String receiveFrame stompConnection receiveFrame LOG debug receiveFrame assertEquals COMMAND_MESSAGE getCommand receiveFrame String messageId getHeaderValue receiveFrame HEADER_MESSAGE_ID String ackmessage HEADER_MESSAGE_ID messageId trim Stomp NULL stompConnection sendFrame ackmessage messagesCount count ex ex printStackTrace
connector LOG info connector getConnectUri port connector getConnectUri getPort StompConnection stompConnection StompConnection stompConnection open createSocket port String frame Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame
connector LOG info connector getConnectUri port connector getConnectUri getPort StompConnection stompConnection StompConnection stompConnection open createSocket port String frame Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame
frame stompConnection receiveFrame assertTrue frame startsWith frame getQueueName Stomp NULL stompConnection sendFrame frame sendMessage getName StompFrame msg stompConnection receive assertTrue msg getAction equals HashMap String String ackHeaders HashMap String String ackHeaders put msg getHeaders get ackHeaders put StompFrame ack StompFrame ackHeaders stompConnection sendFrame ack format QueueViewMBean queueView getProxyToQueue getQueueName assertTrue
stompConnection sendFrame frame frame stompConnection receiveFrame assertTrue frame startsWith frame getQueueName Stomp NULL stompConnection sendFrame frame sendMessage frame stompConnection receiveFrame assertTrue frame startsWith frame getQueueName Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame assertTrue frame frame startsWith sendMessage frame stompConnection receiveFrame
MessageConsumer consumer session createConsumer queue String frame Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame assertTrue frame startsWith frame getQueueName Stomp Transformations JMS_OBJECT_XML xmlObject Stomp NULL stompConnection sendFrame frame Message message consumer receive assertNotNull message
MessageProducer producer session createProducer ActiveMQQueue getQueueName ObjectMessage objMessage session createObjectMessage SamplePojo producer send objMessage MapMessage mapMessage session createMapMessage mapMessage setString mapMessage setString producer send mapMessage String frame Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame assertTrue frame startsWith frame getQueueName Stomp Transformations JMS_JSON Stomp NULL stompConnection sendFrame frame StompFrame json stompConnection receive
mapMessage setString mapMessage setString producer send mapMessage String frame Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame assertTrue frame startsWith frame getQueueName Stomp Transformations JMS_JSON Stomp NULL stompConnection sendFrame frame StompFrame json stompConnection receive LOG info json SamplePojo pojo createObjectFromJson json getBody assertTrue pojo getCity equals assertTrue pojo getName equals json stompConnection receive
String frame Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame assertTrue frame startsWith frame getQueueName Stomp Transformations JMS_XML Stomp NULL stompConnection sendFrame frame frame getQueueName Stomp Transformations JMS_MAP_JSON jsonMap Stomp NULL stompConnection sendFrame frame StompFrame xmlFrame stompConnection receive
String frame Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame assertTrue frame startsWith frame getQueueName Stomp Transformations JMS_JSON Stomp NULL stompConnection sendFrame frame frame getQueueName Stomp Transformations JMS_MAP_XML xmlMap Stomp NULL stompConnection sendFrame frame StompFrame json stompConnection receive
MessageProducer producer session createProducer ActiveMQQueue getQueueName MapMessage message session createMapMessage message setString message setString producer send message String frame Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame assertTrue frame startsWith frame getQueueName Stomp Transformations JMS_MAP_XML Stomp NULL stompConnection sendFrame frame StompFrame xmlFrame stompConnection receive
MessageProducer producer session createProducer ActiveMQQueue getQueueName MapMessage message session createMapMessage message setString message setString producer send message String frame Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame assertTrue frame startsWith frame getQueueName Stomp Transformations JMS_MAP_JSON Stomp NULL stompConnection sendFrame frame StompFrame json stompConnection receive
String type LOG info type String dest type getQueueName String tempDest String format type
String type LOG info type String dest type getQueueName String tempDest String format type LOG info dest tempDest stompConnection subscribe dest stompConnection subscribe tempDest HashMap String String properties HashMap String String properties put Stomp Headers Send REPLY_TO tempDest
LOG info type String dest type getQueueName String tempDest String format type LOG info dest tempDest stompConnection subscribe dest stompConnection subscribe tempDest HashMap String String properties HashMap String String properties put Stomp Headers Send REPLY_TO tempDest LOG info String format Stomp Headers Send REPLY_TO tempDest stompConnection send dest properties StompFrame received stompConnection receive assertNotNull received String remoteReplyTo received getHeaders get Stomp Headers Send REPLY_TO assertNotNull remoteReplyTo assertTrue remoteReplyTo startsWith String format type
stompConnection subscribe tempDest HashMap String String properties HashMap String String properties put Stomp Headers Send REPLY_TO tempDest LOG info String format Stomp Headers Send REPLY_TO tempDest stompConnection send dest properties StompFrame received stompConnection receive assertNotNull received String remoteReplyTo received getHeaders get Stomp Headers Send REPLY_TO assertNotNull remoteReplyTo assertTrue remoteReplyTo startsWith String format type LOG info String format received getAction Stomp Headers Send REPLY_TO remoteReplyTo stompConnection send remoteReplyTo StompFrame reply stompConnection receive assertNotNull reply assertEquals reply getAction
String type LOG info type StompConnection responder StompConnection stompConnect responder String frame Stomp NULL responder sendFrame frame frame responder receiveFrame assertTrue frame startsWith String dest type getQueueName String tempDest String format type
frame responder receiveFrame assertTrue frame startsWith String dest type getQueueName String tempDest String format type LOG info dest tempDest stompConnection subscribe tempDest HashMap String String properties HashMap String String properties put Stomp Headers RECEIPT_REQUESTED responder subscribe dest properties frame responder receiveFrame assertTrue frame frame trim startsWith assertTrue frame frame indexOf Stomp Headers Response RECEIPT_ID properties HashMap String String properties put Stomp Headers Send REPLY_TO tempDest properties put Stomp Headers RECEIPT_REQUESTED
assertTrue frame frame trim startsWith assertTrue frame frame indexOf Stomp Headers Response RECEIPT_ID properties HashMap String String properties put Stomp Headers Send REPLY_TO tempDest properties put Stomp Headers RECEIPT_REQUESTED LOG info String format Stomp Headers Send REPLY_TO tempDest stompConnection send dest properties frame stompConnection receiveFrame assertTrue frame frame trim startsWith assertTrue frame frame indexOf Stomp Headers Response RECEIPT_ID StompFrame received responder receive assertNotNull received String remoteReplyTo received getHeaders get Stomp Headers Send REPLY_TO assertNotNull remoteReplyTo assertTrue remoteReplyTo startsWith String format type
stompConnection send dest properties frame stompConnection receiveFrame assertTrue frame frame trim startsWith assertTrue frame frame indexOf Stomp Headers Response RECEIPT_ID StompFrame received responder receive assertNotNull received String remoteReplyTo received getHeaders get Stomp Headers Send REPLY_TO assertNotNull remoteReplyTo assertTrue remoteReplyTo startsWith String format type LOG info String format received getAction Stomp Headers Send REPLY_TO remoteReplyTo responder send remoteReplyTo StompFrame reply stompConnection receive assertNotNull reply assertEquals reply getAction assertTrue reply getBody contains
stompConnect String frame Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame assertTrue frame startsWith gotMessage gotReceipt payload Arrays fill payload String test UUID randomUUID UUID randomUUID String payload Stomp NULL frame Stomp NULL stompConnection sendFrame frame stompConnection sendFrame test gotMessage gotReceipt frame stompConnection receiveFrame
String connectFrame Stomp NULL stompConnection sendFrame connectFrame String f stompConnection receiveFrame
TransportConnector connector connector brokerService addConnector port getAdditionalConfig port connector getConnectUri getPort
connector brokerService addConnector port getAdditionalConfig port connector getConnectUri getPort LOG debug port connector brokerService addConnector sslPort getAdditionalConfig sslPort connector getConnectUri getPort LOG debug sslPort connector brokerService addConnector nioPort getAdditionalConfig nioPort connector getConnectUri getPort LOG debug nioPort connector brokerService addConnector nioSslPort getAdditionalConfig nioSslPort connector getConnectUri getPort
connector brokerService addConnector sslPort getAdditionalConfig sslPort connector getConnectUri getPort LOG debug sslPort connector brokerService addConnector nioPort getAdditionalConfig nioPort connector getConnectUri getPort LOG debug nioPort connector brokerService addConnector nioSslPort getAdditionalConfig nioSslPort connector getConnectUri getPort LOG debug nioSslPort connector brokerService addConnector autoPort getAdditionalConfig autoPort connector getConnectUri getPort
LOG debug sslPort connector brokerService addConnector nioPort getAdditionalConfig nioPort connector getConnectUri getPort LOG debug nioPort connector brokerService addConnector nioSslPort getAdditionalConfig nioSslPort connector getConnectUri getPort LOG debug nioSslPort connector brokerService addConnector autoPort getAdditionalConfig autoPort connector getConnectUri getPort LOG debug autoPort connector brokerService addConnector autoSslPort getAdditionalConfig
Destination destination session createQueue getQueueName MessageConsumer consumer session createConsumer destination String frame Stomp NULL stompConnection sendFrame frame frame stompConnection receiveFrame assertTrue frame startsWith timestamp System currentTimeMillis TimeUnit DAYS toMillis expires timestamp TimeUnit SECONDS toMillis
messageCount LOG info messageCount start System currentTimeMillis messageCount messageCount duration System currentTimeMillis start duration maximumDuration semaphore semaphore wait maximumDuration duration e LOG info e end System currentTimeMillis start
String destName String simpleName getSimpleName destName destinationType getDestinationType destName destinationType
destName destinationType getDestinationType destName destinationType LOG warn destName TemporaryQueue temporaryQueue getSession createTemporaryQueue
i i args i String arg args i arg arg arg arg substring index arg indexOf String key arg substring index String val arg substring index key val val configFile File val props setProperty key val Properties fileProps Properties configFile
dest jmsProducer getSession createProducer dest
String destName String simpleName getSimpleName destName destinationType getDestinationType destName destinationType
xmlFile createXmlFile xmlFileWriter PrintWriter FileOutputStream xmlFile writeXmlHeader writeXmlTestSettings writeXmlLogFile writeXmlPerfSummary writeXmlFooter xmlFileWriter close
completionLatch clientRunBasis clientRunDuration Validate notNull clientRunBasis Validate notNull completionLatch clientRunBasis duration duration clientRunDuration duration rampUpTime rampUpTime duration rampUpPercent rampUpTime rampDownTime rampDownTime duration rampDownPercent rampDownTime Validate isTrue duration rampUpTime rampDownTime rampDownTime rampDownTime duration
ActiveMQConnectionFactory cf ActiveMQConnectionFactory assertEquals cf getClientIDPrefix connection ActiveMQConnection cf createConnection connection start String clientID connection getClientID
ActiveMQConnectionFactory cf ActiveMQConnectionFactory connection ActiveMQConnection cf createConnection connection start String brokerName connection getBrokerName
uri broker BrokerService broker setPersistent broker setUseJmx broker setAdvisorySupport broker setSchedulerSupport TransportConnector connector broker addConnector uri broker start URI temp URI uri URI currentURI URI connector getPublishableConnectString URI connectURI URI temp getScheme temp getUserInfo temp getHost currentURI getPort temp getPath temp getQuery temp getFragment
ActiveMQMessageAuditNoSync audit ActiveMQMessageAuditNoSync bytes serialize audit
ActiveMQMessageAuditNoSync audit ActiveMQMessageAuditNoSync bytes serialize audit LOG debug bytes length audit recover bytes List MessageReference list ArrayList MessageReference j j j ProducerId pid ProducerId pid setConnectionId pid setSessionId pid setValue j
ProducerId pid ProducerId pid setConnectionId pid setSessionId pid setValue j LOG debug j i i i MessageId id MessageId id setProducerId pid id setProducerSequenceId i ActiveMQMessage msg ActiveMQMessage msg setMessageId id list add msg assertFalse audit isDuplicate msg getMessageId toString i bytes serialize audit
id setProducerId pid id setProducerSequenceId i ActiveMQMessage msg ActiveMQMessage msg setMessageId id list add msg assertFalse audit isDuplicate msg getMessageId toString i bytes serialize audit LOG debug bytes length audit recover bytes i message list audit rollback message getMessageId toString list clear bytes serialize audit
ActiveMQConnectionFactory cf getXAConnectionFactory connection ActiveMQConnection cf createConnection connection start String brokerName connection getBrokerName
String brokerName BrokerService broker BrokerFactory createBroker URI brokerName broker start broker waitUntilStarted ActiveMQConnectionFactory cf getXAConnectionFactory broker getTransportConnectors get getConnectUri XAConnection connection XAConnection cf createConnection connection start XASession session connection createXASession XAResource resource session getXAResource Xid tid createXid resource rollback tid fail
uri broker BrokerService broker setPersistent broker setUseJmx TransportConnector connector broker addConnector uri broker start URI temp URI uri URI currentURI URI connector getPublishableConnectString URI connectURI URI temp getScheme temp getUserInfo temp getHost currentURI getPort temp getPath temp getQuery temp getFragment
Field field getClass getField attribute field set value found String setterName attribute substring toUpperCase attribute substring method getClass method setterName method invoke value found found NoSuchMethodError attribute
ExecutorService executors Executors newFixedThreadPool Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer queue producer setTimeToLive executors Thread sleep count count producer send session createTextMessage count
AtomicInteger counter AtomicInteger CountDownLatch closeDone CountDownLatch connection start Session session connection createSession Session CLIENT_ACKNOWLEDGE destination createDestination session ActiveMQDestination QUEUE_TYPE sendMessages session destination ActiveMQMessageConsumer consumer ActiveMQMessageConsumer session createConsumer destination Map Thread Throwable exceptions Collections synchronizedMap HashMap Thread Throwable Thread Thread Throwable
AtomicInteger counter AtomicInteger CountDownLatch sendDone CountDownLatch CountDownLatch got2Done CountDownLatch connection getPrefetchPolicy setAll connection setOptimizedMessageDispatch connection start Session session connection createSession ackMode destination createDestination session destinationType MessageConsumer consumer session createConsumer destination consumer m TextMessage tm TextMessage m
AtomicInteger counter AtomicInteger CountDownLatch sendDone CountDownLatch CountDownLatch got2Done CountDownLatch connection getPrefetchPolicy setAll connection setOptimizedMessageDispatch connection start Session session connection createSession ackMode destination createDestination session destinationType MessageConsumer consumer session createConsumer destination consumer m TextMessage tm TextMessage m
String text System currentTimeMillis Message sendMessage session createTextMessage text
result result activeCount
name BrokerService broker brokers get name broker TopicRegion topicRegion TopicRegion RegionBroker broker getRegionBroker getTopicRegion name
sendTestMessages Connection browserConnection factory createConnection browserConnection start browsed browse queue browserConnection assertEquals MESSAGES_TO_SEND browsed begin System nanoTime browsed Thread sleep browsed browse queue browserConnection
queue connection Session session connection createSession Session AUTO_ACKNOWLEDGE QueueBrowser browser session createBrowser queue Enumeration enumeration browser getEnumeration browsed enumeration TextMessage m TextMessage enumeration nextElement browsed
Connection prodConnection factory createConnection prodConnection start Session prodSession prodConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer prodSession createProducer queue producer setDeliveryMode DeliveryMode NON_PERSISTENT producer setTimeToLive TTL i i i String msgStr i producer send prodSession createTextMessage msgStr
MessageProducer producer session createProducer destination MessageConsumer consumer session createConsumer destination connection start TextMessage outbound TextMessage i i i outbound i session createTextMessage i consumer consumer close i i outbound i producer send outbound i ObjectName queueViewMBeanName ObjectName LOG info QueueViewMBean proxy QueueViewMBean broker getManagementContext newProxyInstance queueViewMBeanName QueueViewMBean concount proxy getConsumerCount
connection start TextMessage outbound TextMessage i i i outbound i session createTextMessage i consumer consumer close i i outbound i producer send outbound i ObjectName queueViewMBeanName ObjectName LOG info QueueViewMBean proxy QueueViewMBean broker getManagementContext newProxyInstance queueViewMBeanName QueueViewMBean concount proxy getConsumerCount LOG info concount messcount proxy getQueueSize
producer send outbound i ObjectName queueViewMBeanName ObjectName LOG info QueueViewMBean proxy QueueViewMBean broker getManagementContext newProxyInstance queueViewMBeanName QueueViewMBean concount proxy getConsumerCount LOG info concount messcount proxy getQueueSize LOG info messcount CompositeData compdatalist proxy browse compdatalist length fail String messageIDs String compdatalist length i i compdatalist length i CompositeData cdata compdatalist i i
TabularData table proxy browseAsTable LOG info table assertTrue table size assertEquals outbound length proxy getQueueSize assertEquals outbound length compdatalist length assertEquals outbound length table size LOG info i i outbound length i producer send outbound i LOG info messcount proxy getQueueSize LOG info messcount compdatalist proxy browse compdatalist length fail
assertTrue table size assertEquals outbound length proxy getQueueSize assertEquals outbound length compdatalist length assertEquals outbound length table size LOG info i i outbound length i producer send outbound i LOG info messcount proxy getQueueSize LOG info messcount compdatalist proxy browse compdatalist length fail messageIDs String compdatalist length i i compdatalist length i
Session session connection createSession Session AUTO_ACKNOWLEDGE ActiveMQQueue destination ActiveMQQueue connection start MessageProducer producer session createProducer destination numberOfMessages i i numberOfMessages i producer send session createTextMessage i QueueBrowser browser session createBrowser destination Enumeration enumeration browser getEnumeration assertTrue enumeration hasMoreElements numberBrowsed enumeration hasMoreElements Message browsed Message enumeration nextElement
testSendReceive testSendReceive messages clear Destination consumerDestination consumeSession createQueue
ActiveMQDestination queue ActiveMQDestination session createQueue i i i Message message createMessage i configureMessage message
setUp deliveryMode DeliveryMode NON_PERSISTENT topic setUp consumerDestination2 consumeSession createTopic
Connection connection connectionFactory createConnection connection start populateDestinationWithInterleavedProducer nbMessages destinationName connection populateDestination nbMessages destinationName connection AtomicInteger received AtomicInteger Map String Boolean rolledback ConcurrentHashMap String Boolean received nbMessages Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue destinationName MessageConsumer consumer session createConsumer destination TextMessage msg TextMessage consumer receive msg msg rolledback msg Boolean
populateDestination nbMessages destinationName connection AtomicInteger received AtomicInteger Map String Boolean rolledback ConcurrentHashMap String Boolean received nbMessages Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue destinationName MessageConsumer consumer session createConsumer destination TextMessage msg TextMessage consumer receive msg msg rolledback msg getText Boolean LOG info msg getText received getAndIncrement msg getJMSMessageID assertTrue msg getJMSRedelivered assertEquals msg getLongProperty session commit
connection start populateDestinationWithInterleavedProducer nbMessages destinationName connection AtomicInteger received AtomicInteger Map String Boolean rolledback ConcurrentHashMap String Boolean Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue destinationName MessageConsumer consumer session createConsumer destination received nbMessages TextMessage msg TextMessage consumer receive msg msg rolledback msg getText Boolean LOG info msg getText received getAndIncrement msg getJMSMessageID assertTrue msg getJMSRedelivered session commit
connection start populateDestination nbMessages destinationName connection AtomicInteger received AtomicInteger Map String Boolean rolledback ConcurrentHashMap String Boolean Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue destinationName received nbMessages MessageConsumer consumer session createConsumer destination TextMessage msg TextMessage consumer receive msg msg rolledback msg getText Boolean LOG info msg getText received getAndIncrement msg getJMSMessageID assertTrue msg getJMSRedelivered session commit
ConnectionFactory connectionFactory ActiveMQConnectionFactory brokerUrl Connection connection connectionFactory createConnection connection start populateDestination numMessages destinationName connection connection close AtomicInteger received AtomicInteger maxRetries RedeliveryPolicy getMaximumRedeliveries received maxRetries connection connectionFactory createConnection connection start Session session connection createSession Session SESSION_TRANSACTED Destination destination session createQueue destinationName MessageConsumer consumer session createConsumer destination TextMessage msg TextMessage consumer receive msg
messages clear i i data i Message message session createTextMessage data i message setStringProperty data i message setIntProperty i
List Object copyOfMessages Arrays asList receivedMessages toArray counter data length copyOfMessages size Object iter copyOfMessages iter TextMessage message TextMessage iter next LOG LOG info counter message getText assertEquals data length receivedMessages size i i data length i TextMessage received TextMessage receivedMessages get i String text received getText String stringProperty received getStringProperty intProperty received getIntProperty LOG
MessageProducer producer createProducer timeToLive consumerDestination session createQueue getConsumerSubject producerDestination session createQueue getProducerSubject MessageConsumer consumer createConsumer connection start i i data i Message message session createTextMessage data i message setStringProperty data i message setIntProperty i
messages add received messages size TimeUnit SECONDS sleep received acknowledge assertEquals messageCount messages size Vector Message dlqMessages Vector Message received dlqMessages add received assertEquals data length dlqMessages size DestinationStatistics view getDestinationStatistics BrokerRegistry getInstance findFirst ActiveMQDestination transform consumerDestination view getInflight getCount
MessageProducer producer createProducer consumerDestination session createQueue getConsumerSubject producerDestination session createQueue getProducerSubject MessageConsumer consumer createConsumer connection start i i data i Message message session createTextMessage data i message setStringProperty data i message setIntProperty i
MessageProducer producer createProducer timeToLive consumerDestination session createTopic getConsumerSubject producerDestination session createTopic getProducerSubject MessageConsumer consumer createConsumer connection start i i data i Message message session createTextMessage data i message setStringProperty data i message setIntProperty i
MessageProducer producer createProducer consumerDestination session createTopic getConsumerSubject producerDestination session createTopic getProducerSubject MessageConsumer consumer createConsumer connection start i i data i Message message session createTextMessage data i message setStringProperty data i message setIntProperty i
ActiveMQConnectionFactory advisoryConnFactory ActiveMQConnectionFactory Connection connection advisoryConnFactory createConnection connections add connection connection start CountDownLatch done CountDownLatch AtomicBoolean ok AtomicBoolean AtomicBoolean first AtomicBoolean VMTransport t ActiveMQConnection connection getTransport narrow VMTransport t first ok set done await TimeUnit SECONDS
setUp deliveryMode DeliveryMode NON_PERSISTENT setUp consumerDestination2 consumeSession createTopic
connection setClientID getClass getName LOG info connection session connection createSession Session CLIENT_ACKNOWLEDGE consumeSession connection createSession Session CLIENT_ACKNOWLEDGE LOG info session LOG info consumeSession producer session createProducer LOG info producer consumerDestination session createTopic getConsumerSubject producerDestination session createTopic getProducerSubject consumerDestination session createQueue getConsumerSubject producerDestination session createQueue getProducerSubject LOG info consumerDestination consumerDestination getClass
session connection createSession Session CLIENT_ACKNOWLEDGE consumeSession connection createSession Session CLIENT_ACKNOWLEDGE LOG info session LOG info consumeSession producer session createProducer LOG info producer consumerDestination session createTopic getConsumerSubject producerDestination session createTopic getProducerSubject consumerDestination session createQueue getConsumerSubject producerDestination session createQueue getProducerSubject LOG info consumerDestination consumerDestination getClass LOG info producerDestination producerDestination getClass consumer createConsumer
String text Message sendMessage session createTextMessage text
clientConnection createConnection clientConnection setClientID getSubject Session session clientConnection createSession Session AUTO_ACKNOWLEDGE clientConnection start Destination replyDestination createTemporaryDestination session clientSideClientID clientConnection getClientID
clientConnection createConnection clientConnection setClientID getSubject Session session clientConnection createSession Session AUTO_ACKNOWLEDGE clientConnection start Destination replyDestination createTemporaryDestination session clientSideClientID clientConnection getClientID LOG info clientSideClientID MessageProducer requestProducer session createProducer requestDestination MessageConsumer replyConsumer session createConsumer replyDestination TextMessage requestMessage session createTextMessage requestMessage setJMSReplyTo replyDestination requestProducer send requestMessage LOG info
clientConnection start Destination replyDestination createTemporaryDestination session clientSideClientID clientConnection getClientID LOG info clientSideClientID MessageProducer requestProducer session createProducer requestDestination MessageConsumer replyConsumer session createConsumer replyDestination TextMessage requestMessage session createTextMessage requestMessage setJMSReplyTo replyDestination requestProducer send requestMessage LOG info LOG info requestMessage toString Message msg replyConsumer receive msg TextMessage TextMessage replyMessage TextMessage msg LOG info
message TextMessage requestMessage TextMessage message LOG info
setUp connectionFactory createConnectionFactory connection createConnection connection setClientID getClass getName LOG info connection session connection createSession Session AUTO_ACKNOWLEDGE LOG info session consumerDestination session createTopic getConsumerSubject producerDestination session createTopic getProducerSubject consumerDestination session createQueue getConsumerSubject producerDestination session createQueue getProducerSubject LOG info consumerDestination consumerDestination getClass
connection setClientID getClass getName LOG info connection session connection createSession Session AUTO_ACKNOWLEDGE LOG info session consumerDestination session createTopic getConsumerSubject producerDestination session createTopic getProducerSubject consumerDestination session createQueue getConsumerSubject producerDestination session createQueue getProducerSubject LOG info consumerDestination consumerDestination getClass LOG info producerDestination producerDestination getClass producer session createProducer producerDestination producer setDeliveryMode deliveryMode
connection setClientID getClass getName LOG info connection session connection createSession Session AUTO_ACKNOWLEDGE LOG info session producer session createProducer producer setDeliveryMode deliveryMode LOG info producer deliveryMode DeliveryMode PERSISTENT consumerDestination session createTopic getConsumerSubject producerDestination session createTopic getProducerSubject consumerDestination session createQueue getConsumerSubject producerDestination session createQueue getProducerSubject LOG info consumerDestination consumerDestination getClass
setUp setUp connectionFactory createConnectionFactory sendConnection createSendConnection sendConnection start receiveConnection createReceiveConnection receiveConnection start
setUp setUp connectionFactory createConnectionFactory sendConnection createSendConnection sendConnection start receiveConnection createReceiveConnection receiveConnection start LOG info sendConnection
setUp setUp connectionFactory createConnectionFactory sendConnection createSendConnection sendConnection start receiveConnection createReceiveConnection receiveConnection start LOG info sendConnection LOG info receiveConnection session createSendSession sendConnection receiveSession createReceiveSession receiveConnection
setUp setUp connectionFactory createConnectionFactory sendConnection createSendConnection sendConnection start receiveConnection createReceiveConnection receiveConnection start LOG info sendConnection LOG info receiveConnection session createSendSession sendConnection receiveSession createReceiveSession receiveConnection LOG info session
setUp setUp connectionFactory createConnectionFactory sendConnection createSendConnection sendConnection start receiveConnection createReceiveConnection receiveConnection start LOG info sendConnection LOG info receiveConnection session createSendSession sendConnection receiveSession createReceiveSession receiveConnection LOG info session LOG info receiveSession producer session createProducer producer setDeliveryMode deliveryMode
LOG info receiveConnection session createSendSession sendConnection receiveSession createReceiveSession receiveConnection LOG info session LOG info receiveSession producer session createProducer producer setDeliveryMode deliveryMode LOG info producer deliveryMode DeliveryMode PERSISTENT consumerDestination session createTopic getConsumerSubject producerDestination session createTopic getProducerSubject consumerDestination session createQueue getConsumerSubject producerDestination session createQueue getProducerSubject LOG info consumerDestination consumerDestination getClass
messages clear TextMessage message session createTextMessage i i data i message setText data i message setStringProperty data i message setIntProperty i
i i MESSAGE_COUNT i LOG info i BytesMessage msg producerSession createBytesMessage msg writeBytes largeMessageData producer send msg now System currentTimeMillis now System currentTimeMillis messageCount get MESSAGE_COUNT LOG info messageCount messageCount messageCount wait LOG info messageCount assertTrue MESSAGE_COUNT messageCount messageCount get MESSAGE_COUNT assertTrue validMessageConsumption Thread sleep
setUp VMPendingSubscriberMessageStoragePolicy ExecutorService executor Executors newSingleThreadExecutor CountDownLatch consumerRegistered CountDownLatch CountDownLatch gotAdvisory CountDownLatch CountDownLatch advisoryIsGood CountDownLatch executor ActiveMQTopic discardedAdvisoryDestination AdvisorySupport getMessageDiscardedAdvisoryTopic destination Session advisorySession connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer advisorySession createConsumer discardedAdvisoryDestination consumer advisoriesReceived
ExecutorService executor Executors newCachedThreadPool CountDownLatch doAck CountDownLatch CountDownLatch ackDone CountDownLatch CountDownLatch consumerRegistered CountDownLatch executor MessageConsumer consumer session createConsumer destination consumer doAck await TimeUnit SECONDS
connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getTestName MessageProducer producer createProducer session queue Message message createTextMessage session producer send message message createTextMessage session producer send message MessageConsumer consumer session createConsumer queue CountDownLatch gotMessage CountDownLatch AtomicInteger count AtomicInteger maxDeliveries getRedeliveryPolicy getMaximumRedeliveries ArrayList String received ArrayList String consumer Message message
connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue getTestName MessageProducer producer createProducer session queue Message message createTextMessage session producer send message Message dlqMessage Message ActiveMQDestination dlqDestination ActiveMQQueue MessageConsumer dlqConsumer session createConsumer dlqDestination CountDownLatch gotDlqMessage CountDownLatch dlqConsumer Message message
Message dlqMessage Message ActiveMQDestination dlqDestination ActiveMQQueue MessageConsumer dlqConsumer session createConsumer dlqDestination CountDownLatch gotDlqMessage CountDownLatch dlqConsumer Message message LOG info message dlqMessage message gotDlqMessage countDown MessageConsumer consumer session createConsumer queue maxDeliveries getRedeliveryPolicy getMaximumRedeliveries CountDownLatch gotMessage CountDownLatch maxDeliveries consumer Message message
MessageConsumer consumer session createConsumer queue maxDeliveries getRedeliveryPolicy getMaximumRedeliveries CountDownLatch gotMessage CountDownLatch maxDeliveries consumer message LOG info message gotMessage countDown RuntimeException getTestName assertTrue gotMessage await TimeUnit SECONDS assertTrue gotDlqMessage await TimeUnit SECONDS message dlqMessage assertNotNull message String cause message getStringProperty ActiveMQMessage DLQ_DELIVERY_FAILURE_CAUSE_PROPERTY
connection start Session session connection createSession Session SESSION_TRANSACTED Queue queue session createQueue getTestName MessageProducer producer createProducer session queue Message message createTextMessage session producer send message session commit Message dlqMessage Message ActiveMQDestination dlqDestination ActiveMQQueue MessageConsumer dlqConsumer session createConsumer dlqDestination CountDownLatch gotDlqMessage CountDownLatch dlqConsumer Message message
Message dlqMessage Message ActiveMQDestination dlqDestination ActiveMQQueue MessageConsumer dlqConsumer session createConsumer dlqDestination CountDownLatch gotDlqMessage CountDownLatch dlqConsumer Message message LOG info message dlqMessage message gotDlqMessage countDown MessageConsumer consumer session createConsumer queue maxDeliveries getRedeliveryPolicy getMaximumRedeliveries CountDownLatch gotMessage CountDownLatch maxDeliveries consumer Message message
ActiveMQConnectionFactory factory ActiveMQConnectionFactory createConnectionFactory connection ActiveMQConnection factory createConnection connections add connection connection start Session session connection createSession Session CLIENT_ACKNOWLEDGE MessageProducer producer session createProducer queueA AtomicBoolean done AtomicBoolean AtomicBoolean keepGoing AtomicBoolean i keepGoing done set producer send session createTextMessage i
i done set producer send session createTextMessage i LOG info i thread start waitForBlockedOrResourceLimit done MessageConsumer consumer session createConsumer queueA TextMessage msg msg TextMessage consumer receive
factory setUseAsyncSend connection ActiveMQConnection factory createConnection connections add connection connection start Session session connection createSession Session CLIENT_ACKNOWLEDGE MessageProducer producer session createProducer queueA AtomicBoolean done AtomicBoolean AtomicBoolean keepGoing AtomicBoolean i keepGoing done set producer send session createTextMessage i
done set producer send session createTextMessage i LOG info i thread start waitForBlockedOrResourceLimit done MessageConsumer consumer session createConsumer queueA TextMessage msg msg TextMessage consumer receive assertNotNull msg
AtomicInteger warnings AtomicInteger AtomicInteger debugs AtomicInteger
AtomicBoolean done AtomicBoolean AtomicBoolean keepGoing AtomicBoolean CountDownLatch fillerStarted CountDownLatch AtomicLong sent AtomicLong i keepGoing done set fillerStarted countDown producer send session createTextMessage oneKb i i session commit sent getAndAdd
LOG info sent get LOG info i thread start assertTrue fillerStarted await TimeUnit SECONDS waitForBlocked done connection ActiveMQConnection factory createConnection connections add connection connection start TextMessage msg received received sent get received msg TextMessage consumer receive msg
thread start assertTrue fillerStarted await TimeUnit SECONDS waitForBlocked done connection ActiveMQConnection factory createConnection connections add connection connection start TextMessage msg received received received msg TextMessage consumer receive msg LOG info received
thread start assertTrue fillerStarted await TimeUnit SECONDS waitForBlocked done connection ActiveMQConnection factory createConnection connections add connection connection start TextMessage msg received received received msg TextMessage consumer receive msg LOG info received LOG info received msg getJMSMessageID
thread start assertTrue fillerStarted await TimeUnit SECONDS waitForBlocked done connection ActiveMQConnection factory createConnection connections add connection connection start TextMessage msg received received received msg TextMessage consumer receive msg LOG info received LOG info received msg getJMSMessageID
assertTrue fillerStarted await TimeUnit SECONDS waitForBlocked done connection ActiveMQConnection factory createConnection connections add connection connection start TextMessage msg received received received msg TextMessage consumer receive msg LOG info received LOG info received msg getJMSMessageID received received
org apache log4j Logger log4jLogger org apache log4j Logger getLogger org apache activemq broker jmx ManagedTransportConnection AtomicBoolean failed AtomicBoolean
event event getMessage LOG info event getMessage failed set log4jLogger addAppender appender connection connectionFactory createConnection useConnection connection i i i Connection connection2 connectionFactory createConnection useConnection connection2 fail i
receivedCount incrementAndGet done countDown ignored ignored printStackTrace assertTrue done await TimeUnit SECONDS assertFalse done await TimeUnit SECONDS connection close connections remove connection TextMessage m TextMessage dlqConsumer receive assertNotNull m assertEquals m getText String cause m getStringProperty ActiveMQMessage DLQ_DELIVERY_FAILURE_CAUSE_PROPERTY
LOG info XASession xaSession connection createXASession XAResource xaResource xaSession getXAResource Xid xid createXid xaResource start xid Destination destination xaSession createQueue MessageConsumer messageConsumer xaSession createConsumer destination CountDownLatch receiveThreadDone CountDownLatch CountDownLatch receiveLatch CountDownLatch messageConsumer receive receiveLatch countDown
LOG info XASession xaSession connection createXASession XAResource xaResource xaSession getXAResource Xid xid createXid xaResource start xid Destination destination xaSession createQueue MessageConsumer messageConsumer xaSession createConsumer destination CountDownLatch receiveThreadDone CountDownLatch CountDownLatch receiveLatch CountDownLatch messageConsumer receive receiveLatch countDown
String consumerText consumerCounter
Session createConsumer String consumerText consumerCounter LOG info consumerText destination Session answer connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer answer createConsumer destination consumer
Thread sleep DestinationSource destinationSource connection getDestinationSource Set ActiveMQQueue queues destinationSource getQueues Set ActiveMQTopic topics destinationSource getTopics
Thread sleep DestinationSource destinationSource connection getDestinationSource Set ActiveMQQueue queues destinationSource getQueues Set ActiveMQTopic topics destinationSource getTopics LOG info queues
Session session connection createSession Session AUTO_ACKNOWLEDGE ActiveMQQueue newQueue ActiveMQQueue session createConsumer newQueue Thread sleep assertThat newQueue isIn newDestinations
Session session connection createSession Session AUTO_ACKNOWLEDGE ActiveMQQueue newQueue ActiveMQQueue MessageProducer producer session createProducer newQueue TextMessage message session createTextMessage producer send message Thread sleep assertThat newQueue isIn newDestinations
event ActiveMQDestination destination event getDestination event
String consumerText consumerCounter
String consumerText consumerCounter
MessageConsumer createConsumer dest String consumerText consumerCounter LOG info consumerText dest MessageConsumer consumer session createConsumer dest consumer
setUp setUp String fileUrl tmpDir replaceAll
counter Message msg receiveMessage connection msg printer increment receiveCounter incrementAndGet counter Message extra extra receiveMessage connection msg extra printer increment receiveCounter incrementAndGet counter msg connection send createAck consumerInfo msg counter MessageAck STANDARD_ACK_TYPE receiveCounter
StubConnection connection StubConnection broker ConnectionInfo connectionInfo createConnectionInfo connection send connectionInfo SessionInfo sessionInfo createSessionInfo connectionInfo ProducerInfo producerInfo createProducerInfo sessionInfo connection send sessionInfo connection send producerInfo Message message createMessage producerInfo destination message setPersistent deliveryMode message setResponseRequired
startBroker sendMessage ActiveMQConnection consumerConnection ActiveMQConnection createConnection RedeliveryPolicy redeliveryPolicy RedeliveryPolicy redeliveryPolicy setInitialRedeliveryDelay redeliveryPolicy setMaximumRedeliveries consumerConnection setRedeliveryPolicy redeliveryPolicy consumerConnection start Session consumerSession consumerConnection createSession Session SESSION_TRANSACTED MessageConsumer consumer consumerSession createConsumer destination Message message consumer receive assertNotNull message
redeliveryPolicy setInitialRedeliveryDelay redeliveryPolicy setMaximumRedeliveries consumerConnection setRedeliveryPolicy redeliveryPolicy consumerConnection start Session consumerSession consumerConnection createSession Session SESSION_TRANSACTED MessageConsumer consumer consumerSession createConsumer destination Message message consumer receive assertNotNull message LOG info message consumerSession rollback Message shouldBeNull consumer receive assertNull shouldBeNull shouldBeNull TimeUnit SECONDS sleep Message brokerRedeliveryMessage consumer receive
ConnectionFactory factory createConnectionFactory connectionCount AtomicInteger threadId AtomicInteger connectionCount innerId threadId incrementAndGet ExceptionListener listener NioQueueSubscriptionTestListener innerId exceptions LOG ActiveMQConnection connection ActiveMQConnection factory createConnection connection setExceptionListener listener connection start assertNotNull connection getBrokerName connections add connection
innerId threadId incrementAndGet ExceptionListener listener NioQueueSubscriptionTestListener innerId exceptions LOG ActiveMQConnection connection ActiveMQConnection factory createConnection connection setExceptionListener listener connection start assertNotNull connection getBrokerName connections add connection e LOG error innerId e exceptions put Thread currentThread e executor shutdown executor awaitTermination TimeUnit SECONDS exceptions
name LOG info name String type name getKeyProperty type type assertEquals JMXSupport encodeObjectNamePart ActiveMQQueue createDestination getPhysicalName name getKeyProperty
ConnectionFactory connectionFactory ActiveMQConnectionFactory broker getTransportConnectors get getPublishableConnectString connection ActiveMQConnection connectionFactory createConnection connection start Session session connection createSession Session CLIENT_ACKNOWLEDGE Destination destination session createQueue queueName populateDestination destination connection MessageConsumer consumer session createConsumer destination Message msg consumer receive
MessageConsumer consumer session createConsumer destination Message msg consumer receive LOG info msg assertNotNull msg assertFalse msg getJMSRedelivered consumer close connection close restartBroker connectionFactory ActiveMQConnectionFactory broker getTransportConnectors get getPublishableConnectString connection ActiveMQConnection connectionFactory createConnection connection start session connection createSession Session CLIENT_ACKNOWLEDGE destination session createQueue queueName consumer session createConsumer destination msg consumer receive
ConnectionFactory connectionFactory ActiveMQConnectionFactory broker getTransportConnectors get getPublishableConnectString connection ActiveMQConnection connectionFactory createConnection connection start Session session connection createSession Session CLIENT_ACKNOWLEDGE Destination destination session createQueue queueName populateDestination destination connection MessageConsumer consumer session createConsumer destination TextMessage msg msg TextMessage consumer receive
populateDestination destination connection MessageConsumer consumer session createConsumer destination TextMessage msg msg TextMessage consumer receive LOG info msg assertNotNull msg assertEquals msg getLongProperty assertEquals msg getJMSRedelivered consumer close restartBroker connection getTransport narrow FailoverTransport add broker getTransportConnectors get getPublishableConnectString consumer session createConsumer destination msg TextMessage consumer receive
assertEquals msg getLongProperty assertEquals msg getJMSRedelivered consumer close restartBroker connection getTransport narrow FailoverTransport add broker getTransportConnectors get getPublishableConnectString consumer session createConsumer destination msg TextMessage consumer receive LOG info msg assertNotNull msg assertEquals msg getJMSRedelivered assertEquals msg getLongProperty msg acknowledge msg TextMessage consumer receive
ConnectionFactory connectionFactory ActiveMQConnectionFactory broker getTransportConnectors get getPublishableConnectString connection ActiveMQConnection connectionFactory createConnection connection setClientID connection start Session session connection createSession Session CLIENT_ACKNOWLEDGE ActiveMQTopic destination ActiveMQTopic queueName TopicSubscriber durableSub session createDurableSubscriber destination populateDestination destination connection TextMessage msg msg TextMessage durableSub receive
TopicSubscriber durableSub session createDurableSubscriber destination populateDestination destination connection TextMessage msg msg TextMessage durableSub receive LOG info msg assertNotNull msg assertEquals msg getLongProperty assertEquals msg getJMSRedelivered durableSub close restartBroker connection getTransport narrow FailoverTransport add broker getTransportConnectors get getPublishableConnectString durableSub session createDurableSubscriber destination msg TextMessage durableSub receive
ConnectionFactory connectionFactory ActiveMQConnectionFactory broker getTransportConnectors get getPublishableConnectString connection ActiveMQConnection connectionFactory createConnection connection start Session session connection createSession Session SESSION_TRANSACTED Destination destination session createQueue queueName populateDestination destination connection MessageConsumer consumer session createConsumer destination TextMessage msg msg TextMessage consumer receive
MessageConsumer consumer session createConsumer destination TextMessage msg msg TextMessage consumer receive LOG info msg assertNotNull msg assertEquals msg getLongProperty assertEquals msg getJMSRedelivered session rollback consumer close restartBroker connection getTransport narrow FailoverTransport add broker getTransportConnectors get getPublishableConnectString consumer session createConsumer destination msg TextMessage consumer receive
assertEquals msg getJMSRedelivered session rollback consumer close restartBroker connection getTransport narrow FailoverTransport add broker getTransportConnectors get getPublishableConnectString consumer session createConsumer destination msg TextMessage consumer receive LOG info msg assertNotNull msg assertEquals msg getLongProperty assertEquals msg getJMSRedelivered session commit msg TextMessage consumer receive
ConnectionFactory connectionFactory ActiveMQConnectionFactory broker getTransportConnectors get getPublishableConnectString connection ActiveMQConnection connectionFactory createConnection connection start Session session connection createSession Session SESSION_TRANSACTED Destination destination session createQueue queueName populateDestination destination connection MessageConsumer consumer session createConsumer destination TextMessage msg TextMessage consumer receive
Exception ConnectionFactory connectionFactory ActiveMQConnectionFactory broker getTransportConnectors get getPublishableConnectString connection ActiveMQConnection connectionFactory createConnection connection start Session session connection createSession Session CLIENT_ACKNOWLEDGE Destination destination session createQueue queueName populateDestination destination connection TextMessage msg MessageConsumer consumer session createConsumer destination Exception expectedException msg TextMessage consumer receive
connection ActiveMQConnection connectionFactory createConnection connection start Session session connection createSession Session CLIENT_ACKNOWLEDGE Destination destination session createQueue queueName populateDestination destination connection TextMessage msg MessageConsumer consumer session createConsumer destination Exception expectedException i i i msg TextMessage consumer receive LOG info msg assertNotNull msg assertTrue i Exception
e LOG info e expectedException e assertNotNull expectedException consumer close safeCloseConnection connection restartBroker connectionFactory ActiveMQConnectionFactory broker getTransportConnectors get getPublishableConnectString connection ActiveMQConnection connectionFactory createConnection connection start session connection createSession Session CLIENT_ACKNOWLEDGE destination session createQueue queueName consumer session createConsumer destination msg TextMessage consumer receive
consumer close safeCloseConnection connection restartBroker connectionFactory ActiveMQConnectionFactory broker getTransportConnectors get getPublishableConnectString connection ActiveMQConnection connectionFactory createConnection connection start session connection createSession Session CLIENT_ACKNOWLEDGE destination session createQueue queueName consumer session createConsumer destination msg TextMessage consumer receive LOG info msg assertNotNull msg assertEquals msg getJMSRedelivered assertTrue msg getLongProperty
Exception ConnectionFactory connectionFactory ActiveMQConnectionFactory broker getTransportConnectors get getPublishableConnectString connection ActiveMQConnection connectionFactory createConnection connection start Session session connection createSession Session CLIENT_ACKNOWLEDGE Destination destination session createQueue queueName populateDestination destination connection TextMessage msg MessageConsumer consumer session createConsumer destination Exception expectedException msg TextMessage consumer receive
connection ActiveMQConnection connectionFactory createConnection connection start Session session connection createSession Session CLIENT_ACKNOWLEDGE Destination destination session createQueue queueName populateDestination destination connection TextMessage msg MessageConsumer consumer session createConsumer destination Exception expectedException i i i msg TextMessage consumer receive LOG info msg assertNotNull msg assertTrue i Exception
assertNotNull msg assertTrue i e LOG info e expectedException e assertNotNull expectedException consumer close safeCloseConnection connection connection ActiveMQConnection connectionFactory createConnection connection start session connection createSession Session CLIENT_ACKNOWLEDGE destination session createQueue queueName consumer session createConsumer destination i i i msg TextMessage consumer receive
assertNotNull expectedException consumer close safeCloseConnection connection connection ActiveMQConnection connectionFactory createConnection connection start session connection createSession Session CLIENT_ACKNOWLEDGE destination session createQueue queueName consumer session createConsumer destination i i i msg TextMessage consumer receive LOG info msg assertNotNull msg assertEquals i msg getJMSRedelivered assertTrue i msg getLongProperty msg acknowledge
populateDestination destination connection TextMessage msg MessageConsumer consumer session createConsumer destination msg TextMessage consumer receive assertNotNull msg assertFalse msg getJMSRedelivered connection getTransport narrow TcpTransport getTransportListener onException IOException connection ActiveMQConnection connectionFactory createConnection connection start session connection createSession Session CLIENT_ACKNOWLEDGE destination session createQueue queueName consumer session createConsumer destination msg TextMessage consumer receive
connection getTransport narrow TcpTransport getTransportListener onException IOException connection ActiveMQConnection connectionFactory createConnection connection start session connection createSession Session CLIENT_ACKNOWLEDGE destination session createQueue queueName consumer session createConsumer destination i i i msg TextMessage consumer receive LOG info msg assertNotNull msg assertEquals i msg getJMSRedelivered assertTrue i msg getLongProperty msg acknowledge i i i msg TextMessage consumer receive
config context ClassPathXmlApplicationContext config consumer SpringConsumer context getBean assertTrue consumer consumer start producer SpringProducer context getBean assertTrue producer consumer flushMessages producer start consumer waitForMessagesToArrive producer getMessageCount List messages consumer flushMessages LOG info iter messages iter Object message iter next
XATransactionId txid createXATransaction sessionInfo connection send createBeginTransaction connectionInfo txid Message message createMessage producerInfo destination message setPersistent message setTransactionId txid connection send message connection send createPrepareTransaction connectionInfo txid Response response connection request TransactionInfo connectionInfo getConnectionId TransactionInfo RECOVER assertNotNull response DataArrayResponse dar DataArrayResponse response assertEquals dar getData length broker getPersistenceAdapter PersistenceAdapterViewMBean kahadbView getProxyToPersistenceAdapter broker getPersistenceAdapter toString String txFromView kahadbView getTransactions
connection request consumerInfo createRemoveCommand LOG info producerInfo createProducerInfo sessionInfo connection send producerInfo message createMessage producerInfo destination message setPersistent connection send message LOG info connection request createRollbackTransaction connectionInfo txid LOG info txid createXATransaction sessionInfo connection send createBeginTransaction connectionInfo txid Set ConsumerInfo consumerInfoSet HashSet ConsumerInfo destination
message createMessage producerInfo destination message setPersistent connection send message LOG info connection request createRollbackTransaction connectionInfo txid LOG info txid createXATransaction sessionInfo connection send createBeginTransaction connectionInfo txid Set ConsumerInfo consumerInfoSet HashSet ConsumerInfo dest destination consumerInfo createConsumerInfo sessionInfo dest connection send consumerInfo consumerInfoSet add consumerInfo LOG info dest getPhysicalName consumerInfo getConsumerId
LOG info connection request createRollbackTransaction connectionInfo txid LOG info txid createXATransaction sessionInfo connection send createBeginTransaction connectionInfo txid Set ConsumerInfo consumerInfoSet HashSet ConsumerInfo dest consumerInfo createConsumerInfo sessionInfo dest connection send consumerInfo consumerInfoSet add consumerInfo LOG info dest getPhysicalName consumerInfo getConsumerId i i i message receiveMessage connection assertNotNull i message LOG info dest getPhysicalName message getMessageId
LOG info dest getPhysicalName consumerInfo getConsumerId i i numMessages i message receiveMessage connection assertNotNull i message LOG info dest getPhysicalName message getMessageId MessageAck ack createAck consumerInfo message numMessages MessageAck STANDARD_ACK_TYPE ack setTransactionId txid connection request ack message receiveMessage connection LOG info message getMessageId message getDestination getPhysicalName LOG info connection request createCommitTransaction1Phase connectionInfo txid info consumerInfoSet connection request info createRemoveCommand consumerInfoSet clear
LOG info dest getPhysicalName message getMessageId MessageAck ack createAck consumerInfo message numMessages MessageAck STANDARD_ACK_TYPE ack setTransactionId txid connection request ack message connection LOG info message getMessageId message getDestination getPhysicalName LOG info connection request createCommitTransaction1Phase connectionInfo txid info consumerInfoSet connection request info createRemoveCommand consumerInfoSet clear dataArrayResponse DataArrayResponse connection request recoverInfo assertEquals dataArrayResponse getData length LOG info message connection
connection request ack message connection LOG info message getMessageId message getDestination getPhysicalName LOG info connection request createCommitTransaction1Phase connectionInfo txid info consumerInfoSet connection request info createRemoveCommand consumerInfoSet clear dataArrayResponse DataArrayResponse connection request recoverInfo assertEquals dataArrayResponse getData length LOG info message connection LOG info message getMessageId message getDestination getPhysicalName dest consumerInfo createConsumerInfo sessionInfo dest
Message message createMessage producerInfo destination connection send message XATransactionId txid createXATransaction sessionInfo connection send createBeginTransaction connectionInfo txid Set ConsumerInfo consumerInfos HashSet ConsumerInfo dest destination ConsumerInfo consumerInfo createConsumerInfo sessionInfo dest consumerInfos add consumerInfo Message message ConsumerInfo info consumerInfos connection request info message receiveMessage connection assertNotNull message
TransactionInfo recoverInfo TransactionInfo connectionInfo getConnectionId TransactionInfo RECOVER DataArrayResponse dataArrayResponse DataArrayResponse connection request recoverInfo assertEquals dataArrayResponse getData length assertEquals txid dataArrayResponse getData connection send sessionInfo LOG info info connection send info message receiveMessage connection assertNull message assertNoMessagesLeft connection connection request createRollbackTransaction connectionInfo txid LOG info txid createXATransaction sessionInfo connection send createBeginTransaction connectionInfo txid
receiveSession rollback e TransactionRolledBackException TransactionRolledBackException transactionRolledBackException TransactionRolledBackException e transactionRolledBackException java sql Connection dbConnection ActiveMQMessage mqMessage ActiveMQMessage message MessageId id mqMessage getMessageId dbConnection sharedDs getConnection PreparedStatement s dbConnection prepareStatement findStatement s setString id getProducerId toString s setLong id getProducerSequenceId ResultSet rs s executeQuery
e TransactionRolledBackException TransactionRolledBackException transactionRolledBackException TransactionRolledBackException e transactionRolledBackException java sql Connection dbConnection ActiveMQMessage mqMessage ActiveMQMessage message MessageId id mqMessage getMessageId dbConnection sharedDs getConnection PreparedStatement s dbConnection prepareStatement findStatement s setString id getProducerId toString s setLong id getProducerSequenceId ResultSet rs s executeQuery rs LOG info mqMessage
e e printStackTrace executorService shutdown executorService awaitTermination TimeUnit MINUTES count proxy getQueueSize assertEquals count assertEquals proxy browseMessages size objectNameStr broker getBrokerObjectName toString objectNameStr to getQueueName queueViewMBeanName assertRegisteredObjectName objectNameStr QueueViewMBean toProxy QueueViewMBean MBeanServerInvocationHandler newProxyInstance mbeanServer queueViewMBeanName QueueViewMBean count toProxy getQueueSize assertEquals count messageCount usageAfterMove broker getPersistenceAdapter size
ObjectName name ObjectName objectName ObjectName name objectName
Session session connection createSession Session AUTO_ACKNOWLEDGE destination createDestination MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode NON_PERSISTENT BytesMessage message session createBytesMessage message writeBytes producer send message Thread sleep String objectNameStr broker getBrokerObjectName toString objectNameStr ObjectName brokerName assertRegisteredObjectName objectNameStr HealthViewMBean health MBeanServerInvocationHandler newProxyInstance mbeanServer brokerName HealthViewMBean List HealthStatus list health healthList HealthStatus list
ObjectName name ObjectName objectName ObjectName name objectName
String clientId brokerService getAdminView addTopic createSubscriberSecurityException String subscriberName brokerService getAdminView createDurableSubscriber clientId subscriberName
String clientId brokerService getAdminView addTopic createSubscriberSecurityException String subscriberName brokerService getAdminView createDurableSubscriber clientId subscriberName LOG info subscriberName createSubscriberSecurityException assertFalse createSubscriberSecurityException destroySubscriberSecurityException brokerService getAdminView destroyDurableSubscriber clientId subscriberName
createSubscriberSecurityException assertFalse createSubscriberSecurityException destroySubscriberSecurityException brokerService getAdminView destroyDurableSubscriber clientId subscriberName LOG info subscriberName destroySubscriberSecurityException assertFalse destroySubscriberSecurityException subscriberAlreadyDeleted brokerService getAdminView destroyDurableSubscriber clientId subscriberName
ObjectName name ObjectName objectName ObjectName name objectName
sendMessages messageCount
ObjectName name ObjectName objectName ObjectName name objectName
MessageConsumer consumer session createConsumer dest consumer message System out println message message getJMSDestination e e printStackTrace RuntimeException ObjectName queueViewMBeanName assertRegisteredObjectName domain getDestinationString QueueViewMBean queue MBeanServerInvocationHandler newProxyInstance mbeanServer queueViewMBeanName QueueViewMBean ObjectName dlqQueueViewMBeanName assertRegisteredObjectName domain SharedDeadLetterStrategy DEFAULT_DEAD_LETTER_QUEUE_NAME QueueViewMBean dlq MBeanServerInvocationHandler newProxyInstance mbeanServer dlqQueueViewMBeanName QueueViewMBean
e e printStackTrace RuntimeException ObjectName queueViewMBeanName assertRegisteredObjectName domain getDestinationString QueueViewMBean queue MBeanServerInvocationHandler newProxyInstance mbeanServer queueViewMBeanName QueueViewMBean ObjectName dlqQueueViewMBeanName assertRegisteredObjectName domain SharedDeadLetterStrategy DEFAULT_DEAD_LETTER_QUEUE_NAME QueueViewMBean dlq MBeanServerInvocationHandler newProxyInstance mbeanServer dlqQueueViewMBeanName QueueViewMBean LOG info dlq getQueueSize queue getQueueSize MESSAGE_COUNT dlq getQueueSize dlq retryMessages
connection connectionFactory createConnection useConnection connection ObjectName queueViewMBeanName assertRegisteredObjectName domain getDestinationString QueueViewMBean queue MBeanServerInvocationHandler newProxyInstance mbeanServer queueViewMBeanName QueueViewMBean String newDestination getSecondDestinationString queueSize queue getQueueSize assertTrue queueSize queue copyMatchingMessagesTo newDestination queueViewMBeanName assertRegisteredObjectName domain newDestination QueueViewMBean queueTwo MBeanServerInvocationHandler newProxyInstance mbeanServer queueViewMBeanName QueueViewMBean
connection connectionFactory createConnection numMessages useConnection connection numMessages ObjectName queueViewMBeanName assertRegisteredObjectName domain getDestinationString QueueViewMBean queueT MBeanServerInvocationHandler newProxyInstance mbeanServer queueViewMBeanName QueueViewMBean String newDestination getSecondDestinationString queueSize queueT getQueueSize assertTrue queueSize c queueT copyMatchingMessagesTo newDestination
connection connectionFactory createConnection numMessages useConnection connection numMessages ObjectName queueViewMBeanName assertRegisteredObjectName domain getDestinationString QueueViewMBean queueT MBeanServerInvocationHandler newProxyInstance mbeanServer queueViewMBeanName QueueViewMBean String newDestination getSecondDestinationString queueSize queueT getQueueSize assertTrue queueSize c queueT copyMatchingMessagesTo newDestination LOG info c queueViewMBeanName assertRegisteredObjectName domain newDestination QueueViewMBean queueD MBeanServerInvocationHandler newProxyInstance mbeanServer queueViewMBeanName QueueViewMBean
connection connectionFactory createConnection numMessages useConnection connection numMessages ObjectName queueViewMBeanName assertRegisteredObjectName domain getDestinationString QueueViewMBean queueT MBeanServerInvocationHandler newProxyInstance mbeanServer queueViewMBeanName QueueViewMBean String newDestination getSecondDestinationString queueSize queueT getQueueSize assertTrue queueSize c queueT copyMatchingMessagesTo newDestination LOG info c queueViewMBeanName assertRegisteredObjectName domain newDestination QueueViewMBean queueD MBeanServerInvocationHandler newProxyInstance mbeanServer queueViewMBeanName QueueViewMBean LOG info queueD getName queueD getQueueSize assertEquals queueD getQueueSize numMessages queueD getQueueSize
ObjectName queueViewMBeanName assertRegisteredObjectName domain getDestinationString QueueViewMBean queueT MBeanServerInvocationHandler newProxyInstance mbeanServer queueViewMBeanName QueueViewMBean String newDestination getSecondDestinationString queueSize queueT getQueueSize assertTrue queueSize c queueT copyMatchingMessagesTo newDestination LOG info c queueViewMBeanName assertRegisteredObjectName domain newDestination QueueViewMBean queueD MBeanServerInvocationHandler newProxyInstance mbeanServer queueViewMBeanName QueueViewMBean LOG info queueD getName queueD getQueueSize assertEquals queueD getQueueSize numMessages queueD getQueueSize LOG info queueT getName queueT getQueueSize assertEquals queueT getQueueSize numMessages queueT getQueueSize queueT purge queueD copyMatchingMessagesTo getDestinationString
String newDestination getSecondDestinationString queueSize queueT getQueueSize assertTrue queueSize c queueT copyMatchingMessagesTo newDestination LOG info c queueViewMBeanName assertRegisteredObjectName domain newDestination QueueViewMBean queueD MBeanServerInvocationHandler newProxyInstance mbeanServer queueViewMBeanName QueueViewMBean LOG info queueD getName queueD getQueueSize assertEquals queueD getQueueSize numMessages queueD getQueueSize LOG info queueT getName queueT getQueueSize assertEquals queueT getQueueSize numMessages queueT getQueueSize queueT purge queueD copyMatchingMessagesTo getDestinationString LOG info queueD getName queueD getQueueSize assertEquals queueD getQueueSize numMessages queueD getQueueSize
ObjectName brokerName assertRegisteredObjectName domain echo BrokerViewMBean broker MBeanServerInvocationHandler newProxyInstance mbeanServer brokerName BrokerViewMBean broker addTopic getDestinationString assertEquals broker getDurableTopicSubscribers length String topicName getDestinationString String selector ObjectName name1 broker createDurableSubscriber clientID topicName selector broker createDurableSubscriber clientID topicName selector assertEquals broker getInactiveDurableTopicSubscribers length assertNotNull name1
ObjectName queueViewMBeanName assertRegisteredObjectName domain QUEUE_WITH_OPTIONS QueueViewMBean queue MBeanServerInvocationHandler newProxyInstance mbeanServer queueViewMBeanName QueueViewMBean assertEquals QUEUE_WITH_OPTIONS queue getName String options queue getOptions
connection connectionFactory createConnection connection setClientID Session session connection createSession Session AUTO_ACKNOWLEDGE Destination queue session createQueue getDestinationString MessageConsumer queueConsumer session createConsumer queue MessageProducer producer session createProducer queue ObjectName brokerName assertRegisteredObjectName domain BrokerViewMBean broker MBeanServerInvocationHandler newProxyInstance mbeanServer brokerName BrokerViewMBean Thread sleep assertTrue broker getQueueSubscribers length ObjectName subscriptionName broker getQueueSubscribers
connection connectionFactory createConnection connection setClientID Session session connection createSession Session AUTO_ACKNOWLEDGE Destination queue session createQueue getDestinationString MessageConsumer queueConsumer session createConsumer queue MessageProducer producer session createProducer queue ObjectName brokerName assertRegisteredObjectName domain BrokerViewMBean broker MBeanServerInvocationHandler newProxyInstance mbeanServer brokerName BrokerViewMBean Thread sleep assertTrue broker getQueueSubscribers length ObjectName subscriptionName broker getQueueSubscribers LOG info subscriptionName SubscriptionViewMBean subscriberView MBeanServerInvocationHandler newProxyInstance mbeanServer subscriptionName SubscriptionViewMBean assertNotNull subscriberView ObjectName connectionName subscriberView getConnection
ObjectName brokerName assertRegisteredObjectName domain BrokerViewMBean brokerView MBeanServerInvocationHandler newProxyInstance mbeanServer brokerName BrokerViewMBean Map String String connectors brokerView getTransportConnectors
ObjectName brokerName assertRegisteredObjectName domain BrokerViewMBean brokerView MBeanServerInvocationHandler newProxyInstance mbeanServer brokerName BrokerViewMBean Map String String connectors brokerView getTransportConnectors LOG info connectors assertEquals connectors size ConnectorViewMBean connector getProxyToConnectionView assertNotNull connector String name connectors keySet iterator next toString brokerView removeConnector name connectors brokerView getTransportConnectors assertEquals connectors size name brokerView addConnector connector getProxyToConnectionView assertNotNull connector connectors brokerView getTransportConnectors
String s String encodedName JMXSupport encodeObjectNamePart s
Entry MessageConsumer MessageIdList consumertoAbort consumers entrySet iterator next consumertoAbort getValue setProcessingDelay c c setExceptionListener startProducers destination consumertoAbort getValue assertMessagesReceived ActiveMQDestination amqDest ActiveMQDestination destination ObjectName destinationViewMBean ObjectName amqDest isTopic amqDest getPhysicalName DestinationViewMBean queue DestinationViewMBean broker getManagementContext newProxyInstance destinationViewMBean DestinationViewMBean ObjectName slowConsumerPolicyMBeanName queue getSlowConsumerStrategy assertNotNull slowConsumerPolicyMBeanName AbortSlowConsumerStrategyViewMBean abortPolicy AbortSlowConsumerStrategyViewMBean broker getManagementContext newProxyInstance slowConsumerPolicyMBeanName AbortSlowConsumerStrategyViewMBean TimeUnit SECONDS sleep TabularData slowOnes abortPolicy getSlowConsumers assertEquals slowOnes size
c c setExceptionListener startProducers destination consumertoAbort getValue assertMessagesReceived ActiveMQDestination amqDest ActiveMQDestination destination ObjectName destinationViewMBean ObjectName amqDest isTopic amqDest getPhysicalName DestinationViewMBean queue DestinationViewMBean broker getManagementContext newProxyInstance destinationViewMBean DestinationViewMBean ObjectName slowConsumerPolicyMBeanName queue getSlowConsumerStrategy assertNotNull slowConsumerPolicyMBeanName AbortSlowConsumerStrategyViewMBean abortPolicy AbortSlowConsumerStrategyViewMBean broker getManagementContext newProxyInstance slowConsumerPolicyMBeanName AbortSlowConsumerStrategyViewMBean TimeUnit SECONDS sleep TabularData slowOnes abortPolicy getSlowConsumers assertEquals slowOnes size LOG info slowOnes CompositeData slowOne CompositeData slowOnes values iterator next
connections add c c start Session session c createSession Session CLIENT_ACKNOWLEDGE ActiveMQMessageConsumer messageconsumer ActiveMQMessageConsumer session createConsumer destination startProducers destination messageconsumer receive acknowledge assertNotNull messageconsumer receive assertNotNull messageconsumer receive assertNotNull messageconsumer receive socketProxy pause ActiveMQDestination amqDest ActiveMQDestination destination ObjectName destinationViewMBean ObjectName amqDest isTopic amqDest getPhysicalName DestinationViewMBean destView DestinationViewMBean broker getManagementContext newProxyInstance destinationViewMBean DestinationViewMBean
Connection conn createConnectionFactory createConnection conn setExceptionListener connections add conn Session sess conn createSession Session CLIENT_ACKNOWLEDGE MessageConsumer consumer sess createConsumer destination conn start startProducers destination TimeUnit SECONDS sleep
Connection conn createConnectionFactory createConnection conn setExceptionListener Session sess conn createSession Session CLIENT_ACKNOWLEDGE sess createConsumer destination conn start startProducers destination TimeUnit SECONDS sleep
connection start messageCount ActiveMQConnection amqConnection ActiveMQConnection connection rollbackCount amqConnection getRedeliveryPolicy getMaximumRedeliveries
connection start messageCount ActiveMQConnection amqConnection ActiveMQConnection connection rollbackCount amqConnection getRedeliveryPolicy getMaximumRedeliveries LOG info rollbackCount makeConsumer sendMessages i i messageCount i consumeAndRollback i Queue dlqQueue Queue createDlqDestination verifyIsDlq dlqQueue QueueViewMBean queueViewMBean getProxyToQueue dlqQueue getQueueName
i i messageCount i consumeAndRollback i Queue dlqQueue Queue createDlqDestination verifyIsDlq dlqQueue QueueViewMBean queueViewMBean getProxyToQueue dlqQueue getQueueName LOG info queueViewMBean getQueueSize queueViewMBean getExpiredCount messageCount makeDlqConsumer assertNull dlqConsumer receive QueueViewMBean sharedDlqViewMBean getProxyToQueue SharedDeadLetterStrategy DEFAULT_DEAD_LETTER_QUEUE_NAME
destination ActiveMQQueue connection start messageCount timeToLive deliveryMode DeliveryMode NON_PERSISTENT sendMessages sendMessages QueueViewMBean queueViewMBean getProxyToQueue
destination ActiveMQQueue messageCount connection start ActiveMQConnection amqConnection ActiveMQConnection connection rollbackCount amqConnection getRedeliveryPolicy getMaximumRedeliveries
connection start ActiveMQConnection amqConnection ActiveMQConnection connection rollbackCount amqConnection getRedeliveryPolicy getMaximumRedeliveries
Destination destination getDestination
dlqDestination createDlqDestination
dlqDestination createDlqDestination
PolicyEntry e3 PolicyEntry e3 setDestination ActiveMQQueue e3 setMemoryLimit e3 setPrioritizedMessages entries add e3 PolicyMap policyMap PolicyMap policyMap setPolicyEntries entries broker setDestinationPolicy policyMap broker start broker waitUntilStarted Assert assertNotNull broker ManagedRegionBroker rb ManagedRegionBroker broker getRegionBroker org apache activemq broker region Queue queue Queue rb addDestination ConnectionContext ActiveMQQueue DESTNAME Assert assertTrue DESTNAME queue isPrioritizedMessages limit queue getMemoryUsage getLimit
PolicyEntry e2 PolicyEntry e2 setDestination ActiveMQQueue e2 setMemoryLimit e2 setPrioritizedMessages entries add e2 PolicyMap policyMap PolicyMap policyMap setPolicyEntries entries broker setDestinationPolicy policyMap broker start broker waitUntilStarted Assert assertNotNull broker ManagedRegionBroker rb ManagedRegionBroker broker getRegionBroker org apache activemq broker region Queue queue Queue rb addDestination ConnectionContext ActiveMQQueue DESTNAME Assert assertTrue DESTNAME queue isPrioritizedMessages limit queue getMemoryUsage getLimit
List PolicyEntry entries ArrayList PolicyEntry PolicyEntry e1 PolicyEntry e1 setDestination ActiveMQQueue e1 setMemoryLimit QUEUE_LIMIT e1 setPrioritizedMessages entries add e1 PolicyMap policyMap PolicyMap policyMap setPolicyEntries entries broker setDestinationPolicy policyMap broker start broker waitUntilStarted ManagedRegionBroker rb ManagedRegionBroker broker getRegionBroker org apache activemq broker region Queue queue Queue rb addDestination ConnectionContext ActiveMQQueue DESTNAME Assert assertTrue DESTNAME queue isPrioritizedMessages limit queue getMemoryUsage getLimit
connection start ActiveMQConnection amqConnection ActiveMQConnection connection rollbackCount amqConnection getRedeliveryPolicy getMaximumRedeliveries
topic deliveryMode DeliveryMode PERSISTENT durableSubscriber messageCount connection start ActiveMQConnection amqConnection ActiveMQConnection connection rollbackCount amqConnection getRedeliveryPolicy getMaximumRedeliveries
topic deliveryMode DeliveryMode PERSISTENT durableSubscriber messageCount connection start ActiveMQConnection amqConnection ActiveMQConnection connection rollbackCount amqConnection getRedeliveryPolicy getMaximumRedeliveries LOG info rollbackCount sendMessages rollbackCount makeConsumer Message message consumer receive assertNotNull message session rollback
Enumeration messages dlqBrowser getEnumeration messages
String queueName getClass getName getName
messageCount connection start ActiveMQConnection amqConnection ActiveMQConnection connection rollbackCount amqConnection getRedeliveryPolicy getMaximumRedeliveries
dlqDestination createDlqDestination
org apache log4j Logger log4jLogger org apache log4j Logger getLogger RegionBroker AtomicBoolean failed AtomicBoolean
ActiveMQQueue q ActiveMQQueue brokerService getAdminView addQueue q getPhysicalName assertEquals brokerService getAdminView getQueues length ActiveMQConnectionFactory factory ActiveMQConnectionFactory Connection connection factory createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE
prioritizedMessages applyBrokerSpoolingPolicy prioritizedMessages createProducerAndSendMessages NUM_TO_SEND QueueViewMBean proxy getProxyToQueueViewMBean LOG info org apache log4j Logger log4jLogger org apache log4j Logger getLogger org apache activemq broker jmx QueueView AtomicBoolean gotPurgeLogMessage AtomicBoolean event event getMessage String String message String event getMessage message NUM_TO_SEND
session connection createSession Session CLIENT_ACKNOWLEDGE queue session createQueue MessageProducer producer session createProducer queue i i i TextMessage message session createTextMessage MESSAGE_TEXT i i i
MessageConsumer consumer MessageConsumer fConsumer consumer consumer
e printStackTrace consumerList add msg consumerList latch countDown i i i TextMessage msg session createTextMessage i senderList add msg producer send msg latch await TimeUnit MILLISECONDS producerConnection close consumerConnection close assertEquals latch getCount i i senderList i Message sent senderList get i
consumerList add msg consumerList latch countDown i i i TextMessage msg session createTextMessage i senderList add msg producer send msg latch await TimeUnit MILLISECONDS producerConnection close consumerConnection close assertEquals latch getCount i i senderList i Message sent senderList get i Message consumed consumerList get i
consumerList add msg consumerList latch countDown i i i TextMessage msg session createTextMessage i senderList add msg producer send msg latch await TimeUnit MILLISECONDS producerConnection close consumerConnection close assertEquals latch getCount i i senderList i Message sent senderList get i Message consumed consumerList get i
queueMessageStore registerIndexListener QueueStorePrefetch myCursor QueueStorePrefetch queue brokerService getBroker SystemUsage systemUsage SystemUsage systemUsage getMemoryUsage setLimit messageBytesSize myCursor setSystemUsage systemUsage myCursor setEnableAudit myCursor start assertTrue myCursor isUseCache myCursor isCacheEnabled ActiveMQTextMessage msg0 getMessage msg0 setMemoryUsage systemUsage getMemoryUsage queueMessageStore addMessage msg0 myCursor addMessageLast msg0 msg0 decrementReferenceCount myCursor MessageReference ref myCursor next
myCursor remove queueMessageStore removeMessage ref getMessageId e e printStackTrace systemUsage getMemoryUsage increaseUsage messageBytesSize ActiveMQTextMessage msg1 getMessage msg1 setMemoryUsage systemUsage getMemoryUsage queueMessageStore addMessage msg1 myCursor addMessageLast msg1 msg1 decrementReferenceCount b b myCursor MessageReference ref myCursor next
assertTrue underTest isUseCache underTest isCacheEnabled ConnectionContext contextNotInTx ConnectionContext i i i ActiveMQTextMessage msg getMessage i msg setMemoryUsage systemUsage getMemoryUsage queueMessageStore addMessage contextNotInTx msg underTest addMessageLast msg assertTrue underTest isCacheEnabled dequeueCount underTest setMaxBatchSize underTest reset underTest dequeueCount MessageReference ref underTest next ref decrementReferenceCount underTest remove
assertTrue underTest isUseCache underTest isCacheEnabled msg getMessage messages msg msg setMemoryUsage systemUsage getMemoryUsage msg getMessageId setFutureOrSequenceLong underTest addMessageLast msg assertTrue underTest isCacheEnabled assertEquals queueMessageStore batch get dequeueCount underTest setMaxBatchSize underTest reset underTest dequeueCount MessageReference ref underTest next ref decrementReferenceCount underTest remove
ActiveMQDestination destination ActiveMQQueue connection start Session session connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer1 session createConsumer destination MessageProducer producer session createProducer destination i i i TextMessage message session createTextMessage i message setStringProperty message setIntProperty i
ActiveMQDestination destination ActiveMQQueue connection start Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination TextMessage message session createTextMessage message setStringProperty
ActiveMQDestination destination ActiveMQQueue connection start Session session connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer1 session createConsumer destination MessageProducer producer session createProducer destination i i i TextMessage message session createTextMessage i message setStringProperty
message setStringProperty LOG info message producer send message i i i TextMessage m1 TextMessage consumer1 receive assertNotNull i m1 Connection connection1 factory createConnection userName password connection1 start Session session2 connection1 createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer2 session2 createConsumer destination Message m consumer2 receive assertNull m TextMessage message session createTextMessage message setStringProperty message setIntProperty
TextMessage m1 TextMessage consumer1 receive assertNotNull i m1 Connection connection1 factory createConnection userName password connection1 start Session session2 connection1 createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer2 session2 createConsumer destination Message m consumer2 receive assertNull m TextMessage message session createTextMessage message setStringProperty message setIntProperty LOG info message producer send message i i i message session createTextMessage i
COUNT AtomicInteger count AtomicInteger Connection connection createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createConsumer destination CountDownLatch latch CountDownLatch COUNT consumer message count incrementAndGet latch countDown assertTrue message TextMessage TextMessage tm TextMessage message
COUNT AtomicInteger count AtomicInteger Connection connection createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createConsumer destination CountDownLatch latch CountDownLatch COUNT consumer message count incrementAndGet latch countDown assertTrue message TextMessage TextMessage tm TextMessage message LOG info tm getText count get
latch countDown assertTrue message TextMessage TextMessage tm TextMessage message LOG info tm getText count get e LOG error e fail e getMessage connection start i i i MessageProducer producer session createProducer destination TextMessage message session createTextMessage i message setStringProperty ScheduledMessage AMQ_SCHEDULED_CRON producer send message
COUNT AtomicInteger count AtomicInteger Connection connection createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createConsumer destination CountDownLatch latch CountDownLatch COUNT consumer count incrementAndGet latch countDown
NUMBER AtomicInteger count AtomicInteger Connection connection createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createConsumer destination CountDownLatch latch CountDownLatch NUMBER consumer count incrementAndGet latch countDown
JobSchedulerViewMBean view getJobSchedulerMBean assertNotNull view assertTrue view getAllJobs isEmpty scheduleMessage assertFalse view getAllJobs isEmpty TabularData jobs view getAllJobs assertEquals jobs size key jobs String jobId List key get toString
JobSchedulerViewMBean view getJobSchedulerMBean assertNotNull view assertTrue view getAllJobs isEmpty scheduleMessage assertFalse view getAllJobs isEmpty before System currentTimeMillis toLate System currentTimeMillis String next view getNextScheduleTime nextTime JobSupport getDataTime next
scheduleMessage connection TimeUnit SECONDS toMillis Session session connection createSession Session AUTO_ACKNOWLEDGE Destination management session createTopic ScheduledMessage AMQ_SCHEDULER_MANAGEMENT_DESTINATION Destination browseDest session createTemporaryQueue MessageConsumer consumer session createConsumer destination CountDownLatch latch CountDownLatch COUNT consumer latch countDown MessageConsumer browser session createConsumer browseDest CountDownLatch browsedLatch CountDownLatch COUNT browser browsedLatch countDown
scheduleMessage connection TimeUnit SECONDS toMillis COUNT Session session connection createSession Session AUTO_ACKNOWLEDGE Destination requestBrowse session createTopic ScheduledMessage AMQ_SCHEDULER_MANAGEMENT_DESTINATION Destination browseDest session createTemporaryQueue MessageConsumer consumer session createConsumer destination CountDownLatch latch CountDownLatch COUNT consumer latch countDown MessageConsumer browser session createConsumer browseDest CountDownLatch browsedLatch CountDownLatch COUNT browser browsedLatch countDown
scheduleMessage connection TimeUnit SECONDS toMillis Session session connection createSession Session AUTO_ACKNOWLEDGE Destination requestBrowse session createTopic ScheduledMessage AMQ_SCHEDULER_MANAGEMENT_DESTINATION Destination browseDest session createTemporaryQueue MessageConsumer consumer session createConsumer destination CountDownLatch latch CountDownLatch COUNT consumer latch countDown MessageConsumer browser session createConsumer browseDest CountDownLatch browsedLatch CountDownLatch COUNT browser browsedLatch countDown
store setDirectory directory NUMBER store start List ByteSequence list ArrayList ByteSequence i i NUMBER i ByteSequence buff ByteSequence String i getBytes list add buff JobScheduler js store getJobScheduler js startDispatching count startTime period startTime ByteSequence job list js schedule count job startTime period List Job test js getAllJobs
list add buff JobScheduler js store getJobScheduler js startDispatching count startTime period startTime job list js schedule count job startTime period List Job test js getAllJobs LOG debug test size assertEquals list size test size store stop store start js store getJobScheduler test js getAllJobs
String jobId time CountDownLatch done CountDownLatch String str String scheduler schedule jobId ByteSequence str getBytes time size scheduler getAllJobs size assertEquals size scheduler String ByteSequence
schedulerStoreDir File basedir name getMethodName
IOHelper deleteFile schedulerStoreDir
fillUpSomeLogFiles jobCount schedulerStore getJobScheduler getAllJobs size
fillUpSomeLogFiles jobCount schedulerStore getJobScheduler getAllJobs size
JobSchedulerStoreImpl scheduler JobSchedulerStoreImpl scheduler setDirectory testDir scheduler setJournalMaxFileLength BrokerService broker createBroker scheduler broker start broker waitUntilStarted AtomicInteger count AtomicInteger Connection connection cf createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue MessageConsumer consumer session createConsumer queue CountDownLatch latch CountDownLatch NUMBER consumer
store setDirectory directory NUMBER store start List ByteSequence list ArrayList ByteSequence i i NUMBER i ByteSequence buff ByteSequence String i getBytes list add buff JobScheduler js store getJobScheduler js startDispatching count startTime period startTime ByteSequence job list js schedule count job startTime period List Job test js getAllJobs
list add buff JobScheduler js store getJobScheduler js startDispatching count startTime period startTime job list js schedule count job startTime period List Job test js getAllJobs LOG debug test size assertEquals list size test size store stop store start js store getJobScheduler test js getAllJobs
ProgressPrinter printer ProgressPrinter produceCount ActiveMQDestination destination ActiveMQQueue connection setUseCompression connection getPrefetchPolicy setAll connection start Session session connection createSession Session DUPS_OK_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode PERSISTENT
RedeliveryPolicyMap redeliveryPolicyMap RedeliveryPolicyMap RedeliveryPolicy defaultEntry RedeliveryPolicy defaultEntry setInitialRedeliveryDelay redeliveryPolicyMap setDefaultEntry defaultEntry underTest setRedeliveryPolicyMap redeliveryPolicyMap BrokerService brokerService BrokerService brokerService setSchedulerSupport broker BrokerService brokerService underTest installPlugin broker fail
brokerService setSchedulerSupport broker brokerService underTest installPlugin broker fail expected LOG info expected brokerService setSchedulerSupport underTest installPlugin broker fail expected
underTest installPlugin broker fail expected LOG info expected brokerService setSchedulerSupport underTest installPlugin broker fail expected LOG info expected defaultEntry setInitialRedeliveryDelay defaultEntry setRedeliveryDelay brokerService setSchedulerSupport underTest installPlugin broker
Connection connection createConnection connection start Session session connection createSession Session CLIENT_ACKNOWLEDGE Destination destination session createQueue CREATED_STATIC_FOR_PERSISTENT MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode PERSISTENT m Arrays fill m producer send session createTextMessage String m
connection start ConsumerBean messageList ConsumerBean messageList setVerbose Destination consumeDestination createConsumeDestination Session session connection createSession Session AUTO_ACKNOWLEDGE LOG info consumeDestination MessageConsumer c1 session createConsumer consumeDestination c1 setMessageListener messageList ActiveMQQueue sendDestination ActiveMQQueue getQueueName LOG info sendDestination MessageProducer producer session createProducer sendDestination assertNotNull producer total i i total i producer send session createTextMessage i
Thread sleep
AtomicLong numMessagesToSend AtomicLong messageCount purge startTime System currentTimeMillis executor produceMessages numMessagesToSend queue e e printStackTrace executor shutdown executor awaitTermination TimeUnit MINUTES endTime System currentTimeMillis seconds endTime startTime
produceMessages numMessagesToSend queue e e printStackTrace executor shutdown executor awaitTermination TimeUnit MINUTES endTime System currentTimeMillis seconds endTime startTime LOG info numThreads intValue seconds results put numThreads seconds LOG info brokerService getAdminView getTotalEnqueueCount brokerService stop brokerService waitUntilStopped
LinkedHashMap Integer Long resultsT LinkedHashMap Integer Long LinkedHashMap Integer Long resultsF LinkedHashMap Integer Long i i i concurrent startBroker i concurrent startTime System currentTimeMillis produceMessages AtomicLong messageCount target endTime System currentTimeMillis seconds endTime startTime
i i i concurrent startBroker i concurrent startTime System currentTimeMillis produceMessages AtomicLong messageCount target endTime System currentTimeMillis seconds endTime startTime LOG info i seconds concurrent resultsT put i seconds resultsF put i seconds brokerService stop brokerService waitUntilStopped LOG info resultsT resultsF
messagestoSend numMessages connection1 close e e printStackTrace i i i executorService execute runnable String prefix executorService execute doneOne await TimeUnit SECONDS i i i ActiveMQQueue toDelete ActiveMQQueue i ObjectName queueViewMBeanName ObjectName prefix toDelete getQueueName
ConsumerBean messageList1 ConsumerBean ConsumerBean messageList2 ConsumerBean ConsumerBean messageList3 ConsumerBean messageList1 setVerbose messageList2 setVerbose messageList3 setVerbose Session session connection createSession Session AUTO_ACKNOWLEDGE Destination producerDestination ActiveMQTopic Destination destination1 ActiveMQQueue Destination destination2 ActiveMQQueue Destination destination3 ActiveMQQueue
ConsumerBean messageList1 ConsumerBean ConsumerBean messageList2 ConsumerBean ConsumerBean messageList3 ConsumerBean messageList1 setVerbose messageList2 setVerbose messageList3 setVerbose Session session connection createSession Session AUTO_ACKNOWLEDGE Destination producerDestination ActiveMQTopic Destination destination1 ActiveMQQueue Destination destination2 ActiveMQQueue Destination destination3 ActiveMQQueue LOG info producerDestination
TestConsumer consumerAllFail messageList Hashtable String AtomicInteger TestProducer producerAllFail TestProducer queueFail thread producerAllFail consumerAllFail TestConsumer queueFail thread consumerAllFail Thread sleep thread producerAllFail Thread sleep producerAllFail getLatch await LOG info producerAllFail getLatch getCount
Thread sleep thread producerAllFail Thread sleep producerAllFail getLatch await LOG info producerAllFail getLatch getCount LOG info messageList size messageList size totalNumberMessages totalNumberMessages messageList size consumerAllFail getLatch await LOG info consumerAllFail getLatch getCount Iterator String keys messageList keySet iterator messageList String message keys next
threads add producer producer start ConsumerThread c1 ConsumerThread threads add c1 c1 start Thread sleep ConsumerThread c2 ConsumerThread threads add c2 c2 start totalReceived Thread sleep c1Counter c1 counter getAndSet
QueueSession session QueueSender sender Queue queue TextMessage message queueConnection connectionFactory createQueueConnection session queueConnection createQueueSession QueueSession AUTO_ACKNOWLEDGE queue session createQueue TEST_QUEUE_NAME sender session createSender queue sender setDeliveryMode DeliveryMode PERSISTENT message session createTextMessage String valueOf i sender send message session session commit i
ConcurrentMap String String messages ConcurrentHashMap String String Object lock Object CountDownLatch duplicateSignal CountDownLatch AtomicInteger messageCount AtomicInteger i i i duplicateSignal fail sendTextMessage TEST_QUEUE_NAME i i i i i TEST_QUEUE_NAME lock current messageCount incrementAndGet current
CountDownLatch duplicateSignal CountDownLatch AtomicInteger messageCount AtomicInteger i i i duplicateSignal fail sendTextMessage TEST_QUEUE_NAME i i i i i TEST_QUEUE_NAME message current messageCount incrementAndGet current logger info message getJMSMessageID TextMessage message getText message getJMSMessageID duplicateSignal countDown
current messageCount incrementAndGet current logger info message getJMSMessageID TextMessage message getText messages message getJMSMessageID duplicateSignal countDown logger fatal message getJMSMessageID fail message getJMSMessageID messages put message getJMSMessageID message getJMSMessageID threadPool submit receivers i i i i duplicateSignal fail
i i i ConsumerThread c1 ConsumerThread i threads add c1 c1 start assertTrue started await TimeUnit SECONDS producer produce numMessages threads add producer producer start allGood receivedLatch await TimeUnit SECONDS
Connection connection ActiveMQConnectionFactory factory ActiveMQConnectionFactory PRODUCER_BROKER_URL connection factory createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setTimeToLive connection start i i i id i TextMessage message session createTextMessage name getMethodName id message setIntProperty id producer send message id
ActiveMQConnectionFactory factory ActiveMQConnectionFactory PRODUCER_BROKER_URL connection factory createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setTimeToLive connection start i i i id i TextMessage message session createTextMessage name getMethodName id message setIntProperty id producer send message id log info id message
props put connectionUri props put queueName javax naming Context ctx InitialContext props QueueConnectionFactory factory QueueConnectionFactory ctx lookup QueueConnection conn factory createQueueConnection Queue queue Queue ctx lookup QueueSession session conn createQueueSession Session AUTO_ACKNOWLEDGE QueueReceiver receiver session createReceiver queue selectors System out println receiver getMessageSelector receiver message message TextMessage TextMessage txtMsg TextMessage message String msg txtMsg getText
props put props put connectionUri props put topicName javax naming Context ctx InitialContext props TopicConnectionFactory factory TopicConnectionFactory ctx lookup TopicConnection conn factory createTopicConnection Topic topic Topic ctx lookup TopicSession session conn createTopicSession Session AUTO_ACKNOWLEDGE TopicSubscriber receiver session createSubscriber topic selectors receiver message message TextMessage TextMessage txtMsg TextMessage message String msg txtMsg getText
ExecutorService executor Executors newSingleThreadExecutor Future Boolean future executor submit TeardownTask brokerLock broker LOG debug start System currentTimeMillis Boolean result future get TimeUnit SECONDS finish System currentTimeMillis
RegionBroker regionBroker RegionBroker broker getRegionBroker dest regionBroker DestinationStatistics stats dest getDestinationStatistics
Destination dest regionBroker getQueueRegion getDestinationMap DestinationStatistics stats dest getDestinationStatistics LOG info dest getName stats getEnqueues getCount stats getDequeues getCount assertEquals dest getName stats getEnqueues getCount stats getDequeues getCount Destination activeMQDlq regionBroker getQueueRegion getDestinationMap get ActiveMQQueue activeMQDlq countToExcuse org apache activemq command Message messages activeMQDlq browse org apache activemq command Message candidate messages Object cause candidate getProperty DLQ_DELIVERY_FAILURE_CAUSE_PROPERTY cause cause cause countToExcuse
LOG info broker stop broker waitUntilStopped e LOG error e exceptions add e LOG info createBroker configurer broker waitUntilStarted e
e LOG error e exceptions add e LOG info createBroker configurer broker waitUntilStarted e LOG error e exceptions add e timer timer schedule RestartTask brokerStopPeriod
AutoFailTestSupport dumpAllThreads LOG info threads receivers System currentTimeMillis expiry Receiver receiver receivers firstElement receiver receiver close receivers remove receiver connection connections connection close connections clear assertTrue System currentTimeMillis expiry
brokerURL Connection connection ActiveMQConnectionFactory factory ActiveMQConnectionFactory brokerURL connection factory createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setTimeToLive connection start i i i id i TextMessage message session createTextMessage id message setIntProperty id producer send message id
count Session session connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createConsumer destination consumer consumerReady countDown count LOG info consumerContinue await LOG info consumer
latch countDown
receivedMessages release
BrokerView brokerView brokers get broker getAdminView assertEquals brokerView getTotalEnqueueCount
broker getSystemUsage getStoreUsage isFull LOG info brokerView getStorePercentUsage assertTrue redeliveryConsumerLatch getCount redeliveryConsumerLatch await TimeUnit SECONDS assertTrue dlqConsumerLatch await TimeUnit SECONDS closeConsumer LOG info closeDlqConsumer Thread sleep justLogFiles s s endsWith numFiles KahaDBPersistenceAdapter broker getPersistenceAdapter getDirectory list justLogFiles length numFiles LOG info Arrays toString KahaDBPersistenceAdapter broker getPersistenceAdapter getDirectory list justLogFiles
dlqConnection ActiveMQConnection createConnection Session dlqSession dlqConnection createSession Session AUTO_ACKNOWLEDGE MessageConsumer dlqConsumer dlqSession createConsumer ActiveMQQueue dlqConsumer
sendMessage BrokerView brokerView broker getAdminView broker getSystemUsage getStoreUsage isFull LOG info brokerView getStorePercentUsage storePercentUsage broker getAdminView getStorePercentUsage assertTrue storePercentUsage minPercentUsageForStore assertTrue redeliveryConsumerLatch await TimeUnit SECONDS closeConsumer CountDownLatch received CountDownLatch messages consumerConnection ActiveMQConnection createConnection Session dlqSession consumerConnection createSession Session AUTO_ACKNOWLEDGE MessageConsumer dlqConsumer dlqSession createConsumer ActiveMQQueue dlqConsumer received
MessageConsumer consumer session createConsumer session createQueue QUEUE_NAME consumer message afterRestart await TextMessage txtMsg TextMessage message txtMsg producer send session createTextMessage TimeUnit SECONDS sleep producer send session createTextMessage LOG info twoNewMessages countDown txtMsg thirdMessageReceived countDown
CountDownLatch redelivery CountDownLatch ActiveMQConnectionFactory factory ActiveMQConnectionFactory broker getTransportConnectors get getConnectUri Connection connection factory createConnection String clientId clientIdPrefix connection setClientID clientId Session session connection createSession Session CLIENT_ACKNOWLEDGE Queue queue session createQueue queueName MessageConsumer consumer session createConsumer queue consumer
TopicConnection connection createConnection TopicSession session connection createTopicSession Session AUTO_ACKNOWLEDGE Topic topic session createTopic TOPICNAME TopicPublisher producer session createPublisher topic connection start producer setDeliveryMode DeliveryMode PERSISTENT tStamp System currentTimeMillis BytesMessage message session2 createBytesMessage i i i message setStringProperty message setIntProperty i producer publish message i
produceMessages LOG debug Thread sleep LOG debug conn1 close conn2 close LOG debug Thread sleep LOG debug activeateSubscribers LOG debug ObjectName subs broker getAdminView getDurableTopicSubscribers i i subs i ObjectName subName subs i DurableSubscriptionViewMBean sub DurableSubscriptionViewMBean broker getManagementContext newProxyInstance subName DurableSubscriptionViewMBean
startBroker makeAckChain File dataDir broker getPersistenceAdapter getDirectory broker stop broker waitUntilStopped File secondLastDataFile File dataDir
startBroker StagedConsumer consumer StagedConsumer numMessagesAvailable produceMessagesToConsumeMultipleDataFiles Message firstUnacked consumer receive
startBroker StagedConsumer consumer StagedConsumer numMessagesAvailable produceMessagesToConsumeMultipleDataFiles Message firstUnacked consumer receive LOG info firstUnacked getJMSMessageID Message secondUnacked consumer receive
startBroker StagedConsumer consumer StagedConsumer numMessagesAvailable produceMessagesToConsumeMultipleDataFiles Message firstUnacked consumer receive LOG info firstUnacked getJMSMessageID Message secondUnacked consumer receive LOG info secondUnacked getJMSMessageID numMessagesAvailable numMessagesAvailable produceMessagesToConsumeMultipleDataFiles
Collection DataFile files KahaDBPersistenceAdapter broker getPersistenceAdapter getStore getJournal getFileMap values
String osName System getProperty
openConsumer assertEquals broker getAdminView getStorePercentUsage sendMessage BrokerView brokerView broker getAdminView broker getSystemUsage getStoreUsage isFull LOG info brokerView getStorePercentUsage broker getAdminView getStorePercentUsage minPercentUsageForStore closeConsumer broker getSystemUsage getStoreUsage isFull
LOG info brokerView getStorePercentUsage broker getAdminView getStorePercentUsage minPercentUsageForStore closeConsumer broker getSystemUsage getStoreUsage isFull LOG info brokerView getStorePercentUsage broker getAdminView getStorePercentUsage minPercentUsageForStore sendMessage broker getAdminView destroyDurableSubscriber
dir dir String children dir list
queue session createQueue MessageProducer producer session createProducer queue i i i TextMessage message session createTextMessage MESSAGE_TEXT i i i
connection start ConsumerBean messageList ConsumerBean messageList setVerbose ActiveMQDestination consumeDestination createConsumeDestination Session session connection createSession Session AUTO_ACKNOWLEDGE LOG info consumeDestination MessageConsumer c1 session createConsumer consumeDestination c1 setMessageListener messageList ActiveMQQueue sendDestination ActiveMQQueue getQueueName LOG info sendDestination MessageProducer producer session createProducer sendDestination assertNotNull producer total i i total i producer send session createTextMessage i
LOG info consumeDestination MessageConsumer c1 session createConsumer consumeDestination c1 setMessageListener messageList ActiveMQQueue sendDestination ActiveMQQueue getQueueName LOG info sendDestination MessageProducer producer session createProducer sendDestination assertNotNull producer total i i total i producer send session createTextMessage i messageList assertMessagesArrived total LOG info messageList messageList flushMessages MessageConsumer c2 session createConsumer sendDestination c2 setMessageListener messageList
cur num_msg msg sess createTextMessage cur msg setIntProperty cur msg setStringProperty msg setJMSReplyTo resp_dest cur num_msg msg setBooleanProperty req_prod send msg cur cons_client waitShutdown cons_client LOG debug LOG debug tot_expected num_msg echoResponseFill cons_client tot_expected
msg setIntProperty cur msg setStringProperty msg setJMSReplyTo resp_dest cur num_msg msg setBooleanProperty req_prod send msg cur cons_client waitShutdown cons_client LOG debug LOG debug tot_expected num_msg echoResponseFill cons_client tot_expected LOG info tot_expected
Connection conn Session sess Destination cons_dest num_msg num_msg
String String num_msg Connection conn Session sess String topic_name Destination cons_dest num_msg
num_msg Connection conn Session sess Destination cons_dest num_msg
String String num_msg Connection conn Session sess String queue_name Destination cons_dest num_msg
Thread start1 Thread start2 testError start1 Thread broker1 start ex LOG error ex start2 Thread broker2 start ex
messageCount connection start QueueViewMBean dlqView getProxyToDLQ ActiveMQConnection amqConnection ActiveMQConnection connection rollbackCount amqConnection getRedeliveryPolicy getMaximumRedeliveries
Destination destination getDestination
dlqDestination createDlqDestination
consumer ActiveMQMessageConsumer consumerSession createConsumer dest Random random Random i i messageCount i Message message producerSession createTextMessage i producer send message DeliveryMode PERSISTENT random nextInt producerSession commit producer close CountDownLatch latch CountDownLatch messageCount StringBuffer failureMessage StringBuffer consumer lowestPrioritySeen firstMessage Message msg currentPriority msg getJMSPriority
group numThreads group activeCount Thread threads Thread numThreads numThreads group enumerate threads i i numThreads i Thread thread threads i
consumer consumer close e trackException e session session close e trackException e connection connection close e trackException e
ctx ctx close e trackException e trackException s e LOG error s e error e Random random Random List ClientThread threads LinkedList ClientThread i i i threads add ClientThread tg i thread threads thread start ExecutorService doTheInterrupts Executors newFixedThreadPool threads size
group numThreads group activeCount Thread threads Thread numThreads numThreads group enumerate threads i i numThreads i Thread thread threads i
produceSingleMessage org apache log4j Logger log4jLogger org apache log4j Logger getLogger AtomicBoolean failed AtomicBoolean event event getThrowableInformation event getThrowableInformation getThrowable InterruptedException InterruptedException ie InterruptedException event getThrowableInformation getThrowable ie
logger info consumer sessionWithListener createConsumer destination consumer
logger info consumer sessionWithListener createConsumer destination consumer Message message logger info message Session session destination session createQueue MessageConsumer consumer session createConsumer destination Message message consumer receive
consumer sessionWithListener createConsumer destination consumer Message message logger info message Session session destination session createQueue MessageConsumer consumer session createConsumer destination Message message consumer receive logger info message
Session session destination session createQueue MessageConsumer consumer session createConsumer destination Message message consumer receive logger info message e logger debug e session close
Connection consumerConnection factory createConnection consumerConnection setClientID Session consumerMQSession consumerConnection createSession Session CLIENT_ACKNOWLEDGE TopicSubscriber activeConsumer TopicSubscriber consumerMQSession createDurableSubscriber destination consumerConnection start Session session producerConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setDeliveryMode deliveryMode BrokerView brokerView broker getAdminView assertEquals brokerView getDurableTopicSubscribers length LOG info brokerView getDurableTopicSubscribers length brokerView destroyDurableSubscriber fail
connection start session connection createSession ActiveMQSession INDIVIDUAL_ACKNOWLEDGE Queue queue session createQueue LinkedBlockingQueue Message workQueue LinkedBlockingQueue Message MessageConsumer consumer1 session createConsumer queue MessageConsumer consumer2 session createConsumer queue MessageProducer producer session createProducer queue Message message consumer1 receiveNoWait message workQueue add message
Message message consumer1 receiveNoWait message workQueue add message e LOG error e consumer1Thread start Message message consumer2 receive message workQueue add message e
consumer1Thread start consumer2Thread Message message consumer2 receive message workQueue add message e LOG error e consumer2Thread start
e LOG error e consumer2Thread start producerThread producer send session createTextMessage TimeUnit MILLISECONDS sleep pause nextInt e LOG error e producerThread start
getMessage QueueViewMBean queueView getProxyToQueueViewMBean CompositeData messages queueView browse messageID String messages get assertNotNull messageID assertNotNull queueView getMessage messageID
ActiveMQConnectionFactory connectionFactory ActiveMQConnectionFactory connectionUri connectionFactory getPrefetchPolicy setAll Connection connection connectionFactory createConnection connection setClientID getClass getName connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createTopic MessageConsumer consumer session createDurableSubscriber Topic destination BrokerView view brokerService getAdminView view getDurableTopicSubscribers ObjectName subName view getDurableTopicSubscribers DurableSubscriptionViewMBean sub DurableSubscriptionViewMBean brokerService getManagementContext newProxyInstance subName DurableSubscriptionViewMBean assertEquals sub getEnqueueCounter
Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createTopic MessageConsumer consumer session createDurableSubscriber Topic destination BrokerView view brokerService getAdminView view getDurableTopicSubscribers ObjectName subName view getDurableTopicSubscribers DurableSubscriptionViewMBean sub DurableSubscriptionViewMBean brokerService getManagementContext newProxyInstance subName DurableSubscriptionViewMBean assertEquals sub getEnqueueCounter LOG info sub getEnqueueCounter consumer receive consumer receive consumer receive consumer receive consumer receive Thread sleep
QueueViewMBean queueView getProxyToQueueViewMBean assertEquals queueView getInFlightCount message message acknowledge TimeUnit SECONDS sleep assertEquals queueView getInFlightCount producer send session createTextMessage queueView getInFlightCount queueView getInFlightCount
assertEquals queueView getInFlightCount message message acknowledge TimeUnit SECONDS sleep assertEquals queueView getInFlightCount producer send session createTextMessage queueView getInFlightCount queueView getInFlightCount
message message acknowledge TimeUnit SECONDS sleep assertEquals queueView getInFlightCount producer send session createTextMessage queueView getInFlightCount queueView getInFlightCount LOG info queueView getDequeueCount
message message acknowledge TimeUnit SECONDS sleep assertEquals queueView getInFlightCount producer send session createTextMessage queueView getInFlightCount queueView getInFlightCount LOG info queueView getDequeueCount LOG info queueView getDispatchCount
message acknowledge TimeUnit SECONDS sleep assertEquals queueView getInFlightCount producer send session createTextMessage queueView getInFlightCount queueView getInFlightCount LOG info queueView getDequeueCount LOG info queueView getDispatchCount LOG info queueView getEnqueueCount
assertEquals queueView getInFlightCount session commit TimeUnit SECONDS sleep assertEquals queueView getInFlightCount producer send session createTextMessage session commit queueView getInFlightCount queueView getInFlightCount
session commit TimeUnit SECONDS sleep assertEquals queueView getInFlightCount producer send session createTextMessage session commit queueView getInFlightCount queueView getInFlightCount
session commit TimeUnit SECONDS sleep assertEquals queueView getInFlightCount producer send session createTextMessage session commit queueView getInFlightCount queueView getInFlightCount LOG info queueView getDequeueCount
session commit TimeUnit SECONDS sleep assertEquals queueView getInFlightCount producer send session createTextMessage session commit queueView getInFlightCount queueView getInFlightCount LOG info queueView getDequeueCount LOG info queueView getDispatchCount
session commit TimeUnit SECONDS sleep assertEquals queueView getInFlightCount producer send session createTextMessage session commit queueView getInFlightCount queueView getInFlightCount LOG info queueView getDequeueCount LOG info queueView getDispatchCount LOG info queueView getEnqueueCount
Session session connection createSession Session CLIENT_ACKNOWLEDGE connection start MessageProducer producer session createProducer queue MessageConsumer consumer session createConsumer queue producer send session createTextMessage DeliveryMode PERSISTENT producer send session createTextMessage TimeUnit SECONDS sleep QueueViewMBean queueView getProxyToQueueViewMBean assertEquals queueView getInFlightCount consumer
message LOG debug message message acknowledge TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount producer send session createTextMessage queueView getInFlightCount
message LOG debug message message acknowledge TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount producer send session createTextMessage queueView getInFlightCount
LOG debug message message acknowledge TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount producer send session createTextMessage queueView getInFlightCount queueView getInFlightCount
LOG debug message message acknowledge TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount producer send session createTextMessage queueView getInFlightCount queueView getInFlightCount
message acknowledge TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount producer send session createTextMessage queueView getInFlightCount queueView getInFlightCount LOG info queueView getDequeueCount
MessageProducer producer session createProducer queue MessageConsumer consumer session createConsumer queue producer send session createTextMessage DeliveryMode PERSISTENT producer send session createTextMessage TimeUnit SECONDS sleep QueueViewMBean queueView getProxyToQueueViewMBean assertEquals queueView getInFlightCount AtomicInteger msgCount AtomicInteger consumer msgCount
assertEquals queueView getInFlightCount AtomicInteger msgCount AtomicInteger message msgCount LOG debug message message acknowledge TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount
TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount message LOG debug message message acknowledge
TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount message LOG debug message message acknowledge producer send session createTextMessage
TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount message LOG debug message message acknowledge producer send session createTextMessage
TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount message LOG debug message message acknowledge producer send session createTextMessage
TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount message LOG debug message message acknowledge producer send session createTextMessage
message message acknowledge TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount producer send session createTextMessage queueView getInFlightCount queueView getInFlightCount
message acknowledge TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount producer send session createTextMessage queueView getInFlightCount queueView getInFlightCount
message acknowledge TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount producer send session createTextMessage queueView getInFlightCount queueView getInFlightCount LOG info queueView getDequeueCount
TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount producer send session createTextMessage queueView getInFlightCount queueView getInFlightCount LOG info queueView getDequeueCount LOG info queueView getDispatchCount
TimeUnit SECONDS sleep queueView getInFlightCount queueView getInFlightCount producer send session createTextMessage queueView getInFlightCount queueView getInFlightCount LOG info queueView getDequeueCount LOG info queueView getDispatchCount
ArrayList Message messages ArrayList Message Message received received messages add received messages size TimeUnit SECONDS sleep received acknowledge assertEquals messageCount messages size ArrayList Message dlqMessages ArrayList Message received dlqMessages add received assertEquals data length dlqMessages size QueueViewMBean queueView getProxyToQueueViewMBean
ArrayList Message messages ArrayList Message Message received received messages add received messages size TimeUnit SECONDS sleep received acknowledge assertEquals messageCount messages size ArrayList Message dlqMessages ArrayList Message received dlqMessages add received assertEquals data length dlqMessages size QueueViewMBean queueView getProxyToQueueViewMBean
Message received received messages add received messages size TimeUnit SECONDS sleep received acknowledge assertEquals messageCount messages size ArrayList Message dlqMessages ArrayList Message received dlqMessages add received assertEquals data length dlqMessages size QueueViewMBean queueView getProxyToQueueViewMBean LOG info queueView getDequeueCount
received messages add received messages size TimeUnit SECONDS sleep received acknowledge assertEquals messageCount messages size ArrayList Message dlqMessages ArrayList Message received dlqMessages add received assertEquals data length dlqMessages size QueueViewMBean queueView getProxyToQueueViewMBean LOG info queueView getDequeueCount LOG info queueView getDispatchCount
prefecthPolicy setAll factory setPrefetchPolicy prefecthPolicy Connection connection factory createConnection connection start MessageConsumer consumer connection createSession Session AUTO_ACKNOWLEDGE createConsumer queue Thread sleep RECEIVE_POLL_PERIOD Message message consumer receive message counter incrementAndGet counter counter
i session createTextMessage payload i producer setMessageCount messageCount ConsumerThread consumer ConsumerThread consumerSess destination consumer setBreakOnNull consumer setMessageCount messageCount producer start producer join consumer start consumer join assertEquals producer getMessageCount consumer getReceived fileCount getFileCount kahaDbDir
BrokerService brokerService BrokerService connectionUri brokerService addConnector brokerUrl getPublishableConnectString brokerService setPersistent brokerService setUseJmx brokerService setKeepDurableSubsActive brokerService setAdvisorySupport brokerService start LOG info
Connection connection ActiveMQConnectionFactory factory ActiveMQConnectionFactory connectionUri factory setWatchTopicAdvisories connection factory createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE Topic topic session createTopic topicName MessageProducer producer session createProducer topic producer setDeliveryMode DeliveryMode PERSISTENT producer setPriority Message DEFAULT_PRIORITY producer setTimeToLive Message DEFAULT_TIME_TO_LIVE seq seq seq TextMessage msg session createTextMessage String valueOf seq producer send msg
Boolean TRUE Boolean Boolean ActiveMQConnectionFactory factory Connection connection Session session Topic topic TopicSubscriber consumer Boolean factory ActiveMQConnectionFactory connectionUri factory setWatchTopicAdvisories connect TextMessage msg TextMessage consumer receive
connection start Session session connection createSession Session SESSION_TRANSACTED Destination test_data_destination session createQueue System currentTimeMillis MessageConsumer consumer session createConsumer test_data_destination LOG info MessageProducer producer session createProducer test_data_destination producer send session createTextMessage session commit producer send session createTextMessage LOG info consumer close consumer session createConsumer test_data_destination LOG info Message message consumer receive message
createBroker i startAllBrokers waitForBridgeFormation numBrokers verifyPeerBrokerInfos numBrokers List ConsumerState consumerStates startAllGWConsumers numBrokers startAllGWFanoutConsumers numBrokers LOG info TimeUnit SECONDS sleep LOG info startTime System currentTimeMillis produce numMessages ConsumerState tally consumerStates expected numMessages tally destination isComposite tally destination getCompositeDestinations length
startAllBrokers waitForBridgeFormation numBrokers verifyPeerBrokerInfos numBrokers List ConsumerState consumerStates startAllGWConsumers numBrokers startAllGWFanoutConsumers numBrokers LOG info TimeUnit SECONDS sleep LOG info startTime System currentTimeMillis produce numMessages ConsumerState tally consumerStates expected numMessages tally destination isComposite tally destination getCompositeDestinations length LOG info tally brokerName tally destination tally accumulator get
startTime System currentTimeMillis produce numMessages tally expected numMessages tally destination isComposite tally destination getCompositeDestinations length LOG info tally brokerName tally destination tally accumulator get tally accumulator get expected LOG info tally brokerName tally destination tally accumulator get expected tally expected tally accumulator get expected dumpQueueStat tally expected startConsumer tally brokerName tally destination
sumTotal Collection BrokerItem brokerList brokers values BrokerItem i brokerList i BrokerService brokerService i next broker objectName brokerService objectName QueueViewMBean qViewMBean QueueViewMBean brokerService getManagementContext newProxyInstance objectName QueueViewMBean
compositeDest append ActiveMQQueue compositeQ ActiveMQQueue compositeDest toString id id id ActiveMQConnectionFactory connectionFactory ActiveMQConnectionFactory portBase id connectionFactory setWatchTopicAdvisories QueueConnection queueConnection connectionFactory createQueueConnection queueConnection start QueueSession queueSession queueConnection createQueueSession Session SESSION_TRANSACTED MessageProducer producer queueSession createProducer compositeQ queueSession ActiveMQQueue message producer send message queueSession commit
accumulators put destination AtomicInteger consumerState accumulator accumulators get destination message consumerSleepTime TimeUnit MILLISECONDS sleep consumerSleepTime e e printStackTrace consumerState accumulator incrementAndGet consumerState expected remove ActiveMQMessage message getProperty e e printStackTrace
brokerItem BrokerService broker brokerItem broker RegionBroker regionBroker RegionBroker broker getRegionBroker
createBroker i startAllBrokers waitForBridgeFormation numBrokers verifyPeerBrokerInfos numBrokers List ConsumerState consumerStates startAllGWConsumers numBrokers startAllGWFanoutConsumers numBrokers LOG info TimeUnit SECONDS sleep LOG info startTime System currentTimeMillis produce numMessages ConsumerState tally consumerStates expected numMessages tally destination isComposite tally destination getCompositeDestinations length
startAllBrokers waitForBridgeFormation numBrokers verifyPeerBrokerInfos numBrokers List ConsumerState consumerStates startAllGWConsumers numBrokers startAllGWFanoutConsumers numBrokers LOG info TimeUnit SECONDS sleep LOG info startTime System currentTimeMillis produce numMessages ConsumerState tally consumerStates expected numMessages tally destination isComposite tally destination getCompositeDestinations length LOG info tally brokerName tally destination tally accumulator get
List ConsumerState consumerStates startAllGWConsumers numBrokers startAllGWFanoutConsumers numBrokers LOG info TimeUnit SECONDS sleep LOG info startTime System currentTimeMillis produce numMessages ConsumerState tally consumerStates expected numMessages tally destination isComposite tally destination getCompositeDestinations length LOG info tally brokerName tally destination tally accumulator get tally accumulator get expected LOG info tally brokerName tally destination tally accumulator get expected tally expected
compositeDest append ActiveMQQueue compositeQ ActiveMQQueue compositeDest toString id id id ActiveMQConnectionFactory connectionFactory ActiveMQConnectionFactory portBase id connectionFactory setWatchTopicAdvisories QueueConnection queueConnection connectionFactory createQueueConnection queueConnection start QueueSession queueSession queueConnection createQueueSession Session SESSION_TRANSACTED MessageProducer producer queueSession createProducer compositeQ queueSession ActiveMQQueue message producer send message queueSession commit
accumulators put destination AtomicInteger consumerState accumulator accumulators get destination message consumerSleepTime TimeUnit MILLISECONDS sleep consumerSleepTime e e printStackTrace consumerState accumulator incrementAndGet consumerState expected remove ActiveMQMessage message getProperty e e printStackTrace
AtomicInteger toSend AtomicInteger numMessages i i i id i numBrokers ActiveMQConnectionFactory connectionFactory ActiveMQConnectionFactory portBase id connectionFactory setWatchTopicAdvisories QueueConnection queueConnection connectionFactory createQueueConnection queueConnection start QueueSession queueSession queueConnection createQueueSession Session AUTO_ACKNOWLEDGE MessageProducer producer queueSession createProducer val val toSend ActiveMQQueue compositeQ ActiveMQQueue
brokerItem BrokerService broker brokerItem broker RegionBroker regionBroker RegionBroker broker getRegionBroker
PolicyEntry policy PolicyEntry policy setExpireMessagesPeriod policy setMemoryLimit memoryLimit policy setProducerFlowControl PolicyMap pMap PolicyMap pMap setDefaultEntry policy broker setDestinationPolicy pMap broker messageSend messageSend messageSend getProperty Integer num Integer messageSend getProperty TransactionBroker transactionBroker TransactionBroker broker getBroker getAdaptor TransactionBroker transactionBroker messageSend
policy setMemoryLimit memoryLimit policy setProducerFlowControl PolicyMap pMap PolicyMap pMap setDefaultEntry policy broker setDestinationPolicy pMap broker messageSend messageSend messageSend getProperty Integer num Integer messageSend getProperty TransactionBroker transactionBroker TransactionBroker broker getBroker getAdaptor TransactionBroker transactionBroker messageSend getTransactionId LOG error num messageSend getMessageId messageSend getTransactionId num
PolicyMap pMap PolicyMap pMap setDefaultEntry policy broker setDestinationPolicy pMap broker messageSend messageSend messageSend getProperty Integer num Integer messageSend getProperty TransactionBroker transactionBroker TransactionBroker broker getBroker getAdaptor TransactionBroker transactionBroker messageSend getTransactionId LOG error num messageSend getMessageId messageSend getTransactionId num LOG error num messageSend getMessageId slowSendResume await TimeUnit SECONDS
broker setDestinationPolicy pMap broker messageSend messageSend messageSend getProperty Integer num Integer messageSend getProperty TransactionBroker transactionBroker TransactionBroker broker getBroker getAdaptor TransactionBroker transactionBroker messageSend getTransactionId LOG error num messageSend getMessageId messageSend getTransactionId num LOG error num messageSend getMessageId slowSendResume await TimeUnit SECONDS LOG error num messageSend getMessageId num
messageSend messageSend getProperty Integer num Integer messageSend getProperty TransactionBroker transactionBroker TransactionBroker broker getBroker getAdaptor TransactionBroker transactionBroker messageSend getTransactionId LOG error num messageSend getMessageId messageSend getTransactionId num LOG error num messageSend getMessageId slowSendResume await TimeUnit SECONDS LOG error num messageSend getMessageId num LOG error num messageSend getMessageId slowSendResume countDown TimeUnit SECONDS sleep
sessionVector add send i expected add i i i i id i sessionVector get id commit fail exceptions add fail DestinationViewMBean queueViewMBean DestinationViewMBean broker getManagementContext newProxyInstance broker getAdminView getQueues DestinationViewMBean TimeUnit SECONDS sleep
Session send id messageSize transacted Connection connection factory createConnection connection start Session session connection createSession transacted transacted Session SESSION_TRANSACTED Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination BytesMessage bytesMessage session createBytesMessage bytesMessage writeBytes messageSize bytesMessage setIntProperty id producer send bytesMessage
messagesToSend Connection connection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue destinationName sendMessages messagesToSend QueueBrowser browser session createBrowser queue Enumeration enumeration browser getEnumeration received enumeration Message m Message enumeration nextElement assertNotNull m
ActiveMQConnectionFactory factory ActiveMQConnectionFactory connectionURI ActiveMQConnection connection ActiveMQConnection factory createConnection connection start connections original openFileDescriptorCount
ActiveMQConnection connection ActiveMQConnection factory createConnection connection start connections original openFileDescriptorCount LOG info original CountDownLatch done CountDownLatch connections connections ActiveMQConnection connection ActiveMQConnectionFactory factory ActiveMQConnectionFactory connectionURI connection ActiveMQConnection factory createConnection connection start
CountDownLatch done CountDownLatch connections connections ActiveMQConnection connection ActiveMQConnectionFactory factory ActiveMQConnectionFactory connectionURI connection ActiveMQConnection factory createConnection connection start e LOG debug getStack e connection close e
connection start Session producerSession connection createSession Session SESSION_TRANSACTED MessageProducer producer producerSession createProducer producerSession createQueue TextMessage producerMessage producerSession createTextMessage producer send producerMessage producer close producerSession commit producerSession close Session consumerSession connection createSession Session SESSION_TRANSACTED MessageConsumer consumer consumerSession createConsumer consumerSession createQueue Message consumerMessage consumer receive String txId consumerMessage getStringProperty assertNotNull txId
ActiveMQQueue queue ActiveMQQueue ActiveMQConnection producerConnection ActiveMQConnection factory createConnection producerConnection setUseAsyncSend producerConnection start Session producerSession producerConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer producerSession createProducer queue producer setDeliveryMode DeliveryMode PERSISTENT i i i String msgStr provideMessageText i producer send producerSession createTextMessage msgStr i
producer send producerSession createTextMessage msgStr LOG info msgStr substring producerConnection close LOG info broker getSystemUsage getMemoryUsage getPercentUsage Connection connection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE QueueBrowser browser session createBrowser queue Enumeration enumeration browser getEnumeration browsed enumeration TextMessage m TextMessage enumeration nextElement browsed browsed
brokerName ManagementContext context brokers get brokerName broker getManagementContext QueueViewMBean queueViewMBean QueueViewMBean context newProxyInstance brokers get brokerName broker getAdminView getQueues QueueViewMBean brokerName currentCount queueViewMBean getQueueSize
brokerName ManagementContext context brokers get brokerName broker getManagementContext QueueViewMBean queueViewMBean QueueViewMBean context newProxyInstance brokers get brokerName broker getAdminView getQueues QueueViewMBean brokerName currentCount queueViewMBean getQueueSize LOG info brokerName queueViewMBean currentCount currentCount
brokerName ManagementContext context brokers get brokerName broker getManagementContext brokerName QueueViewMBean queueViewMBean QueueViewMBean context newProxyInstance brokers get brokerName broker getAdminView getQueues QueueViewMBean currentCount queueViewMBean getConsumerCount
brokerName ManagementContext context brokers get brokerName broker getManagementContext brokerName QueueViewMBean queueViewMBean QueueViewMBean context newProxyInstance brokers get brokerName broker getAdminView getQueues QueueViewMBean currentCount queueViewMBean getConsumerCount LOG info brokerName queueViewMBean currentCount currentCount
producer close consumer session createDurableSubscriber Topic destination brokerView getDurableTopicSubscribers length sub getDispatchedCounter assertEquals sub getEnqueueCounter assertEquals sub getDequeueCounter assertEquals sub getPendingQueueSize assertEquals sub getDispatchedCounter assertEquals sub getDispatchedQueueSize
brokerView getDurableTopicSubscribers length sub getDispatchedCounter assertEquals sub getEnqueueCounter assertEquals sub getDequeueCounter assertEquals sub getPendingQueueSize assertEquals sub getDispatchedCounter assertEquals sub getDispatchedQueueSize LOG info sub getPendingQueueSize assertNotNull consumer receive assertNotNull consumer receive
producer setDeliveryMode DeliveryMode PERSISTENT LevelDBStoreViewMBean levelDBView getLevelDBStoreMBean assertNotNull levelDBView levelDBView compact SIZE MSG_COUNT CountDownLatch done CountDownLatch MSG_COUNT buffer SIZE i i SIZE i buffer i i i MSG_COUNT i BytesMessage message session createBytesMessage message writeBytes buffer producer send message i
buffer i i i i BytesMessage message session createBytesMessage message writeBytes buffer producer send message i LOG info i session commit session commit LOG info MessageConsumer consumer session createConsumer destination consumer message
LOG info ActiveMQConnectionFactory factory ActiveMQConnectionFactory connectionURI
LOG info ActiveMQConnectionFactory factory ActiveMQConnectionFactory connectionURI i i i LOG info i Connection connection factory createConnection connection setClientID connection start
connection Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue name toString MessageConsumer consumer session createConsumer destination MessageProducer producer session createProducer destination BytesMessage message session createBytesMessage sendTime System currentTimeMillis message setLongProperty sendTime producer send message
connection Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue name toString MessageConsumer consumer session createConsumer destination MessageProducer producer session createProducer destination StreamMessage message session createStreamMessage sendTime System currentTimeMillis message setLongProperty sendTime producer send message
ActiveMQObjectMessage ActiveMQObjectMessage copy ActiveMQObjectMessage
consumersStarted await TimeUnit SECONDS assertEquals consumersStarted getCount Destination producerDestination session createTopic PRODUCER_DESTINATION_NAME MessageProducer producer session createProducer producerDestination messageIndex i i i i LOG debug consumerA close i LOG debug consumerB close String messageText messageIndex java util Date toString TextMessage message session createTextMessage messageText message setIntProperty i
i LOG debug consumerB close String messageText messageIndex java util Date toString TextMessage message session createTextMessage messageText message setIntProperty i LOG debug messageText producer send message LOG debug consumerA session createConsumer consumerQueue CONSUMER_A_SELECTOR consumerA setMessageListener listenerA LOG debug consumerB session createConsumer consumerQueue CONSUMER_B_SELECTOR consumerB setMessageListener listenerB consumerAtoConsumeCount await TimeUnit SECONDS
broker BrokerFactory createBroker uri VirtualDestinationInterceptor interceptor VirtualDestinationInterceptor VirtualTopic virtualTopic VirtualTopic virtualTopic setName virtualTopic setSelectorAware VirtualDestination virtualDestinations virtualTopic interceptor setVirtualDestinations virtualDestinations broker setDestinationInterceptors DestinationInterceptor interceptor SubQueueSelectorCacheBrokerPlugin subQueueSelectorCacheBrokerPlugin SubQueueSelectorCacheBrokerPlugin BrokerPlugin updatedPlugins subQueueSelectorCacheBrokerPlugin broker setPlugins updatedPlugins broker setUseJmx broker start broker waitUntilStarted
message toConsume countDown message TextMessage TextMessage textMessage TextMessage message
Connection connection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer bigQueue producer setDeliveryMode deliveryMode BytesMessage bytesMessage session createBytesMessage bytesMessage writeBytes messageSize producer send bigQueue bytesMessage QueueViewMBean queueViewMBean QueueViewMBean broker getManagementContext newProxyInstance broker getAdminView getQueues QueueViewMBean LOG info queueViewMBean getName queueViewMBean getEnqueueCount connection close assertFalse queueViewMBean isCacheEnabled Queue underTest Queue RegionBroker broker getRegionBroker getQueueRegion getDestinationMap get bigQueue Message browsed underTest browse
MessageProducer producer session createProducer bigQueue producer setDeliveryMode deliveryMode BytesMessage bytesMessage session createBytesMessage bytesMessage writeBytes messageSize producer send bigQueue bytesMessage QueueViewMBean queueViewMBean QueueViewMBean broker getManagementContext newProxyInstance broker getAdminView getQueues QueueViewMBean LOG info queueViewMBean getName queueViewMBean getEnqueueCount connection close assertFalse queueViewMBean isCacheEnabled Queue underTest Queue RegionBroker broker getRegionBroker getQueueRegion getDestinationMap get bigQueue Message browsed underTest browse LOG info browsed length assertEquals maxBrowsePageSize browsed length browsed underTest browse
producer send bigQueue bytesMessage QueueViewMBean queueViewMBean QueueViewMBean broker getManagementContext newProxyInstance broker getAdminView getQueues QueueViewMBean LOG info queueViewMBean getName queueViewMBean getEnqueueCount connection close assertFalse queueViewMBean isCacheEnabled Queue underTest Queue RegionBroker broker getRegionBroker getQueueRegion getDestinationMap get bigQueue Message browsed underTest browse LOG info browsed length assertEquals maxBrowsePageSize browsed length browsed underTest browse LOG info browsed length assertEquals maxBrowsePageSize browsed length Runtime getRuntime gc free Runtime getRuntime freeMemory
LOG info queueViewMBean getName queueViewMBean getEnqueueCount connection close assertFalse queueViewMBean isCacheEnabled Queue underTest Queue RegionBroker broker getRegionBroker getQueueRegion getDestinationMap get bigQueue Message browsed underTest browse LOG info browsed length assertEquals maxBrowsePageSize browsed length browsed underTest browse LOG info browsed length assertEquals maxBrowsePageSize browsed length Runtime getRuntime gc free Runtime getRuntime freeMemory LOG info free LOG info Runtime getRuntime freeMemory
ActiveMQXAConnection xaConnection ActiveMQXAConnection cf createConnection xaConnection start XASession session xaConnection createXASession XAResource resource session getXAResource Xid tid createXid resource start tid XAResource TMNOFLAGS MessageProducer producer session createProducer session createQueue getClass getName Message message session createTextMessage producer send message resource end tid XAResource TMSUCCESS LOG debug ret resource prepare tid XAResource XA_OK ret resource commit tid
xaConnection start XASession session xaConnection createXASession XAResource resource session getXAResource Xid tid createXid resource start tid XAResource TMNOFLAGS MessageProducer producer session createProducer session createQueue getClass getName Message message session createTextMessage producer send message resource end tid XAResource TMSUCCESS LOG debug ret resource prepare tid XAResource XA_OK ret resource commit tid xae LOG info xae getMessage
receivedMessageCount ActiveMQConnectionFactory consumerFactory ActiveMQConnectionFactory Connection consumerConnection consumerFactory createConnection consumerConnection setClientID consumerConnection start Session consumerSession consumerConnection createSession Session CLIENT_ACKNOWLEDGE MessageConsumer messageConsumer consumerSession createConsumer QUEUE_NAME TextMessage textMsg TextMessage messageConsumer receive textMsg textMsg TextMessage messageConsumer receive textMsg receivedMessageCount receivedMessageCount
ExportQueueConsumer consumer LOG info publisherMessagesPerThread publisherThreadCount LOG info publisher ExportQueuePublisher activemqURL activemqQueues publisherMessagesPerThread publisherThreadCount LOG info consumer ExportQueueConsumer activemqURL activemqQueues consumerThreadsPerQueue consumerBatchSize publisherMessagesPerThread publisherThreadCount totalStart System currentTimeMillis LOG info publisher start LOG info consumer start distinctPublishedCount LOG info publisher waitForCompletion List publishedIds publisher getIDs
LOG info publisherMessagesPerThread publisherThreadCount LOG info publisher ExportQueuePublisher activemqURL activemqQueues publisherMessagesPerThread publisherThreadCount LOG info consumer ExportQueueConsumer activemqURL activemqQueues consumerThreadsPerQueue consumerBatchSize publisherMessagesPerThread publisherThreadCount totalStart System currentTimeMillis LOG info publisher start LOG info consumer start distinctPublishedCount LOG info publisher waitForCompletion List publishedIds publisher getIDs distinctPublishedCount TreeSet publishedIds size
consumer start distinctPublishedCount LOG info publisher waitForCompletion List publishedIds publisher getIDs distinctPublishedCount TreeSet publishedIds size LOG info publishedIds size distinctPublishedCount LOG info TimeUnit MILLISECONDS toSeconds System currentTimeMillis totalStart endWait System currentTimeMillis consumerWaitForConsumption consumer System currentTimeMillis endWait secs endWait System currentTimeMillis LOG info secs Thread sleep
consumer start distinctPublishedCount LOG info publisher waitForCompletion List publishedIds publisher getIDs distinctPublishedCount TreeSet publishedIds size LOG info publishedIds size distinctPublishedCount LOG info TimeUnit MILLISECONDS toSeconds System currentTimeMillis totalStart endWait System currentTimeMillis consumerWaitForConsumption consumer System currentTimeMillis endWait secs endWait System currentTimeMillis LOG info secs Thread sleep
secs endWait System currentTimeMillis LOG info secs Thread sleep LOG info consumer completed LOG info TimeUnit MILLISECONDS toSeconds System currentTimeMillis totalStart consumer shutdown TimeUnit SECONDS sleep LOG info String List String entry consumer List String idList entry getValue distinctConsumed TreeSet String idList size StringBuilder sb StringBuilder sb append entry getKey idList size distinctConsumed diff distinctPublishedCount distinctConsumed
ExportQueueConsumer consumer LOG info publisherMessagesPerThread publisherThreadCount LOG info publisher ExportQueuePublisher activemqURL activemqQueues publisherMessagesPerThread publisherThreadCount LOG info consumer ExportQueueConsumer activemqURL activemqQueues consumerThreadsPerQueue consumerBatchSize publisherMessagesPerThread publisherThreadCount LOG info publisher start LOG info consumer start distinctPublishedCount LOG info publisher waitForCompletion List publishedIds publisher getIDs distinctPublishedCount TreeSet publishedIds size
consumer ExportQueueConsumer activemqURL activemqQueues consumerThreadsPerQueue consumerBatchSize publisherMessagesPerThread publisherThreadCount LOG info publisher start LOG info consumer start distinctPublishedCount LOG info publisher waitForCompletion List publishedIds publisher getIDs distinctPublishedCount TreeSet publishedIds size LOG info publishedIds size distinctPublishedCount endWait System currentTimeMillis consumerWaitForConsumption consumer System currentTimeMillis endWait secs endWait System currentTimeMillis
secs endWait System currentTimeMillis LOG info secs Thread sleep LOG info consumer completed consumer shutdown LOG info String List String entry consumer List String idList entry getValue distinctConsumed TreeSet String idList size StringBuilder sb StringBuilder sb append entry getKey idList size distinctConsumed diff distinctPublishedCount distinctConsumed sb append diff diff
ExportQueueConsumer consumer LOG info publisherMessagesPerThread publisherThreadCount LOG info publisher ExportQueuePublisher activemqURL activemqQueues publisherMessagesPerThread publisherThreadCount LOG info consumer ExportQueueConsumer activemqURL activemqQueues consumerThreadsPerQueue consumerBatchSize publisherMessagesPerThread publisherThreadCount LOG info publisher start LOG info consumer start distinctPublishedCount LOG info publisher waitForCompletion List String publishedIds publisher getIDs distinctPublishedCount TreeSet String publishedIds size
consumer ExportQueueConsumer activemqURL activemqQueues consumerThreadsPerQueue consumerBatchSize publisherMessagesPerThread publisherThreadCount LOG info publisher start LOG info consumer start distinctPublishedCount LOG info publisher waitForCompletion List String publishedIds publisher getIDs distinctPublishedCount TreeSet String publishedIds size LOG info publishedIds size distinctPublishedCount endWait System currentTimeMillis consumerWaitForConsumption consumer System currentTimeMillis endWait secs endWait System currentTimeMillis
secs endWait System currentTimeMillis LOG info secs Thread sleep LOG info consumer completed consumer shutdown LOG info String List String entry consumer List String idList entry getValue distinctConsumed TreeSet String idList size StringBuilder sb StringBuilder sb append entry getKey idList size distinctConsumed diff distinctPublishedCount distinctConsumed sb append diff diff
ActiveMQConnection connection createConnection RedeliveryPolicy noRedelivery RedeliveryPolicy noRedelivery setMaximumRedeliveries connection setRedeliveryPolicy noRedelivery connection start Session session connection createSession Session SESSION_TRANSACTED MessageConsumer consumer session createConsumer dest Message m m consumer
getQueueSize queueSize QueueViewMBean queueViewMBean QueueViewMBean brokerService getManagementContext newProxyInstance BrokerMBeanSupport createDestinationName brokerService getBrokerObjectName dest QueueViewMBean queueSize queueViewMBean getQueueSize
Connection connection createConnectionFactory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE i i i destination i session createTemporaryQueue
errorDetectorAppender event event getLevel isGreaterOrEqual Level ERROR hasErrorInLogger set org apache log4j Logger getRootLogger addAppender errorDetectorAppender Connection connection createConnectionFactory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Topic destination session createTopic
event event getLevel isGreaterOrEqual Level ERROR hasErrorInLogger set org apache log4j Logger getRootLogger addAppender errorDetectorAppender Connection connection createConnectionFactory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Topic destination session createTopic LOG debug destination MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode NON_PERSISTENT
Connection connection createConnectionFactory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Topic destination session createTopic LOG debug destination MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode NON_PERSISTENT producer setTimeToLive LOG debug producer i TextMessage msg session createTextMessage i producer send msg
LOG debug producer i Thread TextMessage msg session createTextMessage i producer send msg Thread sleep e Thread currentThread interrupt LOG debug i i e e e e
Random rn Random NUMBER_OF_RUNS NUMBER_OF_RUNS AtomicInteger numberOfMessagesReceived AtomicInteger
Random rn Random NUMBER_OF_RUNS run run NUMBER_OF_RUNS run AtomicInteger numberOfMessagesReceived AtomicInteger LOG info run NUMBER_OF_RUNS Connection connection createConnectionFactory createConnection connection start Session session connection createSession Session DUPS_OK_ACKNOWLEDGE Topic destination session createTopic
NUMBER_OF_RUNS run run NUMBER_OF_RUNS run AtomicInteger numberOfMessagesReceived AtomicInteger LOG info run NUMBER_OF_RUNS Connection connection createConnectionFactory createConnection connection start Session session connection createSession Session DUPS_OK_ACKNOWLEDGE Topic destination session createTopic LOG debug destination MessageConsumer consumer session createConsumer destination consumer LOG debug numberOfMessagesReceived getAndIncrement
LOG debug numberOfMessagesReceived getAndIncrement LOG debug consumer Thread sleep rn nextInt Thread currentThread interrupt LOG debug consumer close session close connection close assertFalse hasFailureInProducer get assertFalse hasErrorInLogger get
conn start connections add conn e exceptions add e JmsUtils closeConnection conn assertEquals connector getConnections size startupLatch countDown TransportConnector connector connector exceptions isEmpty
JmsUtils closeConnection conn assertEquals connector getConnections size startupLatch countDown TransportConnector connector connector exceptions isEmpty LOG info exceptions size connector getConnections size exceptions size maxConnections connector getConnections size maxConnections
message setPersistent message setTransactionId txid connection send message connection send createPrepareTransaction connectionInfo txid message createMessage producerInfo destination message setPersistent connection send message StubConnection connectionC createConnection ConnectionInfo connectionInfoC createConnectionInfo SessionInfo sessionInfoC createSessionInfo connectionInfoC ConsumerInfo consumerInfo createConsumerInfo sessionInfoC destination connectionC send connectionInfoC connectionC send sessionInfoC connectionC send consumerInfo Message m receiveMessage connectionC TimeUnit SECONDS toMillis
ConnectionInfo connectionInfoC createConnectionInfo SessionInfo sessionInfoC createSessionInfo connectionInfoC ConsumerInfo consumerInfo createConsumerInfo sessionInfoC destination connectionC send connectionInfoC connectionC send sessionInfoC connectionC send consumerInfo Message m receiveMessage connectionC TimeUnit SECONDS toMillis LOG info m assertNotNull m assertNull m getTransactionId assertNull receiveMessage connectionC assertNoMessagesLeft connectionC LOG info txid connection request createCommitTransaction2Phase connectionInfo txid m receiveMessage connectionC TimeUnit SECONDS toMillis
message createMessage producerInfo destination message setPersistent TextMessage message setText payload connection request message assertTrue proxy isCacheEnabled StubConnection connectionC createConnection ConnectionInfo connectionInfoC createConnectionInfo SessionInfo sessionInfoC createSessionInfo connectionInfoC ConsumerInfo consumerInfo createConsumerInfo sessionInfoC destination connectionC send connectionInfoC connectionC send sessionInfoC connectionC send consumerInfo Message m m receiveMessage connectionC TimeUnit SECONDS toMillis
SessionInfo sessionInfoC createSessionInfo connectionInfoC ConsumerInfo consumerInfo createConsumerInfo sessionInfoC destination connectionC send connectionInfoC connectionC send sessionInfoC connectionC send consumerInfo Message m m receiveMessage connectionC TimeUnit SECONDS toMillis LOG info m assertNotNull m assertNull m getTransactionId connectionC request createAck consumerInfo m MessageAck STANDARD_ACK_TYPE LOG info txid connection request createCommitTransaction2Phase connectionInfo txid
Session session connection createSession Session CLIENT_ACKNOWLEDGE Queue queue session createQueue name getMethodName MessageProducer producer session createProducer queue producer setDeliveryMode DeliveryMode NON_PERSISTENT QueueViewMBean queueView getProxyToQueue name getMethodName payload Arrays fill payload CountDownLatch done CountDownLatch AtomicInteger counter AtomicInteger done queueView queueView getQueueSize queueSize queueView getQueueSize
Message message consumer receive message counter incrementAndGet message acknowledge LOG warn consumer close purge start BytesMessage message session createBytesMessage message writeBytes payload producer send message
purge start i i i BytesMessage message session createBytesMessage message writeBytes payload producer send message LOG info i done countDown purge join purge fail queueView getDequeueCount counter get
LOG info connectionUri payload ActiveMQConnectionFactory factory ActiveMQConnectionFactory connectionUri ActiveMQConnection connection ActiveMQConnection factory createConnection connection start
ActiveMQQueue compositeSendTo ActiveMQQueue ActiveMQConnectionFactory connectionFactory ActiveMQConnectionFactory brokerUrl connectionFactory setWatchTopicAdvisories Connection connection connectionFactory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE session createProducer compositeSendTo send session createTextMessage dest compositeSendTo Message message session createConsumer dest receive
produceSomeMessages MSG_COUNT QueueViewMBean queueView getProxyToQueue getDestinationName assertEquals MSG_COUNT queueView getQueueSize connection createConnection Session session connection createSession ActiveMQSession INDIVIDUAL_ACKNOWLEDGE Queue queue session createQueue getDestinationName MessageConsumer consumer session createConsumer queue connection start done CountDownLatch MSG_COUNT consumer
MessageConsumer consumer session createConsumer queue connection start done CountDownLatch MSG_COUNT consumer message LOG debug message done countDown done await TimeUnit SECONDS consumer close assertEquals MSG_COUNT queueView getQueueSize consumer session createConsumer queue done CountDownLatch MSG_COUNT consumer message
produceSomeMessages MSG_COUNT QueueViewMBean queueView getProxyToQueue getDestinationName assertEquals MSG_COUNT queueView getQueueSize connection createConnection Session session connection createSession ActiveMQSession INDIVIDUAL_ACKNOWLEDGE Queue queue session createQueue getDestinationName MessageConsumer consumer session createConsumer queue connection start MSG_COUNT Message message consumer receive assertNotNull message
connection createConnection Session session connection createSession ActiveMQSession INDIVIDUAL_ACKNOWLEDGE Queue queue session createQueue getDestinationName MessageConsumer consumer session createConsumer queue connection start MSG_COUNT Message message consumer receive assertNotNull message LOG debug message consumer close assertEquals MSG_COUNT queueView getQueueSize consumer session createConsumer queue MSG_COUNT Message message consumer receive assertNotNull message
sendMessage connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue name getMethodName MessageConsumer consumer session createConsumer destination ActiveMQObjectMessage msg ActiveMQObjectMessage consumer receive AMQ5921MessagePayload payload AMQ5921MessagePayload msg getObject
MessageProducer producer session createProducer queue session createProducer dlq MSG_COUNT producer send session createMessage DeliveryMode PERSISTENT Message DEFAULT_PRIORITY QueueViewMBean queueView getProxyToQueue dlq getQueueName queueView getQueueSize MSG_COUNT LOG info Deque String browsed LinkedList String CompositeData elements queueView browse assertEquals MSG_COUNT elements length CompositeData element elements String messageID String element get
LOG info Deque String browsed LinkedList String CompositeData elements queueView browse assertEquals MSG_COUNT elements length CompositeData element elements String messageID String element get LOG debug messageID browsed add messageID String removedMsgId browsed removeFirst assertTrue queueView removeMessage removedMsgId assertEquals MSG_COUNT queueView getQueueSize elements queueView browse assertEquals MSG_COUNT elements length CompositeData element elements
Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode PERSISTENT TextMessage txtMessage session createTextMessage txtMessage setText producer send txtMessage DeliveryMode PERSISTENT QueueViewMBean view getProxyToQueue LOG info view getQueueSize LOG info
sendMessages LOG info msgCount getProxyToQueue QUEUE_NAME getQueueSize ITERATIONS ITERATIONS
count LOG info Session session cx createSession Session SESSION_TRANSACTED MessageProducer producer session createProducer queue BytesMessage message session createBytesMessage message writeBytes count count producer send message LOG info exceptionCount incrementAndGet
Session session connection createSession Session AUTO_ACKNOWLEDGE Topic topic session createTopic topicFilter MessageConsumer consumer session createDurableSubscriber topic testName getMethodName assertNotNull consumer Topic advisoryTopic AdvisorySupport getSlowConsumerAdvisoryTopic ActiveMQDestination createDestination topicA ActiveMQDestination TOPIC_TYPE session connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer advisoryConsumer session createConsumer advisoryTopic MessageProducer producer session createProducer producer send session createTopic topicA session createMessage BytesMessage m session createBytesMessage m writeBytes Topic newTopic session createTopic topicPrefix UUID randomUUID toString
Session session connection createSession Session SESSION_TRANSACTED MessageProducer producer session createProducer queue TextMessage textMessage session createTextMessage textMessage setText producer send textMessage
org apache log4j Logger log4jLogger org apache log4j Logger getLogger MessageDatabase AtomicBoolean failed AtomicBoolean File journalDataDir KahaDBPersistenceAdapter broker getPersistenceAdapter getStore getJournal getDirectory
MessageConsumer messageConsumer createConsumer sendMessages MESSAGES_TO_SEND BrokerViewMBean brokerView getBrokerView broker
MessageConsumer messageConsumer createConsumer sendMessages MESSAGES_TO_SEND BrokerViewMBean brokerView getBrokerView broker LOG info brokerView getTempPercentUsage
MessageConsumer messageConsumer createConsumer sendMessages MESSAGES_TO_SEND BrokerViewMBean brokerView getBrokerView broker LOG info brokerView getTempPercentUsage LOG info brokerView getTempPercentUsage brokerView getTempPercentUsage tempPercentUsageWithConsumer brokerView getTempPercentUsage assertTrue tempPercentUsageWithConsumer messageConsumer close
ConnectionFactory connectionFactory ActiveMQConnectionFactory TRANSPORT_URL Connection connection ActiveMQConnection connectionFactory createConnection connection start String blob String Session producerSession connection createSession Session SESSION_TRANSACTED MessageProducer jmsProducer producerSession createProducer producerSession createTopic DESTINATION Message sendMessage producerSession createTextMessage blob jmsProducer send sendMessage producerSession commit numberOfMessageSent LOG info numberOfMessageSent numberOfMessageSent
Connection connection ActiveMQConnection connectionFactory createConnection connection start String blob String Session producerSession connection createSession Session SESSION_TRANSACTED MessageProducer jmsProducer producerSession createProducer producerSession createTopic DESTINATION Message sendMessage producerSession createTextMessage blob jmsProducer send sendMessage producerSession commit numberOfMessageSent LOG info numberOfMessageSent numberOfMessageSent ex LOG info ex
id RedeliveryPolicy redeliveryPolicy RedeliveryPolicy redeliveryPolicy setInitialRedeliveryDelay redeliveryPolicy setMaximumRedeliveries ActiveMQConnection consumerConnection ActiveMQConnection createConnection consumerConnection setRedeliveryPolicy redeliveryPolicy consumerConnection start Session consumerSession consumerConnection createSession Session SESSION_TRANSACTED MessageConsumer consumer consumerSession createConsumer consumerSession createQueue id
ConsumerObject consumer1 getConsumer ConsumerObject consumer2 getConsumer ActiveMQConnection producerConnection ActiveMQConnection createConnection producerConnection start Session session producerConnection createSession Session CLIENT_ACKNOWLEDGE Destination dest session createTopic MessageProducer producer session createProducer dest TextMessage msg session createTextMessage producer setDeliveryMode DeliveryMode NON_PERSISTENT producer send msg Message message1 consumer1 getConsumer receive assertNotNull message1
ConsumerObject consumer1 getConsumer ConsumerObject consumer2 getConsumer ActiveMQConnection producerConnection ActiveMQConnection createConnection producerConnection start Session session producerConnection createSession Session CLIENT_ACKNOWLEDGE Destination dest session createTopic MessageProducer producer session createProducer dest TextMessage msg session createTextMessage producer setDeliveryMode DeliveryMode NON_PERSISTENT producer send msg Message message1 consumer1 getConsumer receive assertNotNull message1 LOG info message1 Message message2 consumer2 getConsumer receive assertNotNull message2
Destination destination session createQueue MessageConsumer advisoryConsumer session createConsumer AdvisorySupport getSlowConsumerAdvisoryTopic destination MessageConsumer consumer session createConsumer destination Message message advisoryConsumer receive message message advisoryConsumer receive assertNotNull message connection close QueueViewMBean queue getProxyToQueue Queue destination getQueueName ObjectName slowConsumerPolicyMBeanName queue getSlowConsumerStrategy assertNotNull slowConsumerPolicyMBeanName AbortSlowConsumerStrategyViewMBean abortPolicy AbortSlowConsumerStrategyViewMBean brokerService getManagementContext newProxyInstance slowConsumerPolicyMBeanName AbortSlowConsumerStrategyViewMBean TabularData slowOnes abortPolicy getSlowConsumers
LOG info
Connection consumerConnection factory createConnection ActiveMQConnection consumerConnection setWatchTopicAdvisories consumerConnection setClientID consumerName Session consumerSession consumerConnection createSession Session CLIENT_ACKNOWLEDGE Topic topic consumerSession createTopic topicName consumerConnection start MessageConsumer consumer consumerSession createDurableSubscriber topic consumerName counsumerStarted countDown Message msg msg consumer receive msg receivedCount incrementAndGet
assertTrue received acked e e printStackTrace exceptions add e ExecutorService executor Executors newFixedThreadPool numConsumers numConsumers executor execute consumer assertTrue counsumerStarted await TimeUnit SECONDS Connection producerConnection factory createConnection ActiveMQConnection producerConnection setWatchTopicAdvisories Session producerSession producerConnection createSession Session AUTO_ACKNOWLEDGE Topic topic producerSession createTopic topicName MessageProducer producer producerSession createProducer topic producerConnection start
consumerConnection start consumerConnection close broker stop broker createBroker configurePersistence broker broker start Connection producerConnection factory createConnection Session producerSession producerConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer producerSession createProducer topic producerConnection start BytesMessage msg producerSession createBytesMessage msg writeBytes payload producer send msg
i i LOG info i producerConnection close broker stop broker createBroker configurePersistence broker broker start consumerConnection factory createConnection consumerConnection setClientID CONSUMER_NAME consumerConnection start consumerSession consumerConnection createSession Session AUTO_ACKNOWLEDGE consumer consumerSession createDurableSubscriber topic CONSUMER_NAME i i i Message msg consumer receive
produceMessages Thread sleep produceMessages ArrayList Integer browseList browseQueue produceMessages browseList browseQueue ArrayList Integer consumeList consumeMessages browseList consumeList
produceMessages Thread sleep produceMessages ArrayList Integer browseList browseQueue produceMessages browseList browseQueue ArrayList Integer consumeList consumeMessages browseList consumeList LOG info browseList size
produceMessages Thread sleep produceMessages ArrayList Integer browseList browseQueue produceMessages browseList browseQueue ArrayList Integer consumeList consumeMessages browseList consumeList LOG info browseList size LOG info consumeList size
produceMessages Thread sleep produceMessages ArrayList Integer browseList browseQueue produceMessages browseList browseQueue ArrayList Integer consumeList consumeMessages browseList consumeList LOG info browseList size LOG info consumeList size LOG info browseList
connection2 createConnection connection2 start session2 connection2 createSession Session AUTO_ACKNOWLEDGE producer2 session2 createProducer producer2 setDeliveryMode deliveryMode Thread sleep BytesMessage message session2 createBytesMessage message writeBytes MSIZE message setStringProperty message setIntProperty COUNT_PROPERY_NAME count message setJMSType producer2 send consumerDestination2 message Thread sleep
start connection3 createConnection connection3 setClientID connection3 start consumeSession3 connection3 createSession Session CLIENT_ACKNOWLEDGE consumer3 consumeSession3 createDurableSubscriber Topic consumerDestination2 getName connection3 close count connection3 createConnection connection3 setClientID connection3 start consumeSession3 connection3 createSession Session CLIENT_ACKNOWLEDGE consumer3 consumeSession3 createDurableSubscriber Topic consumerDestination2 getName Message msg
producer send s createTextMessage s commit assertNotNull broker getDestination ActiveMQQueue DESTINATION_NAME assertNotNull broker getDestination ActiveMQQueue DESTINATION_NAME_2 ObjectName objectName ObjectName BrokerViewMBean brokerViewMBean BrokerViewMBean broker getManagementContext newProxyInstance objectName BrokerViewMBean String pathToDataDir brokerViewMBean getDataDirectory broker stop corruptTxStoreJournalAndTruncate pathToDataDir org apache log4j Logger log4jLogger org apache log4j Logger getLogger MultiKahaDBTransactionStore AtomicBoolean foundSomeCorruption AtomicBoolean AtomicBoolean ignoringCorruption AtomicBoolean
String pathToDataDir LOG info pathToDataDir RandomAccessFile randomAccessFile RandomAccessFile String format pathToDataDir ByteSequence header ByteSequence Journal BATCH_CONTROL_RECORD_HEADER data ByteSequence bs ByteSequence data randomAccessFile read data data length offset bs indexOf header offset bs indexOf header offset offset bs indexOf header offset
String pathToDataDir LOG info pathToDataDir RandomAccessFile randomAccessFile RandomAccessFile String format pathToDataDir ByteSequence header ByteSequence Journal BATCH_CONTROL_RECORD_HEADER data ByteSequence bs ByteSequence data randomAccessFile read data data length offset bs indexOf header offset bs indexOf header offset offset bs indexOf header offset LOG info offset offset Journal BATCH_CONTROL_RECORD_SIZE offset offset fill
factory setPrefetchPolicy prefetch Connection consumerConnection factory createConnection consumerConnection start Session consumerSession consumerConnection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer consumerSession createConsumer bigDestination Connection producerConnection factory createConnection producerConnection start fillWithBigCount Session session producerConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer producer setDeliveryMode deliveryMode idx idx fillWithBigCount idx Message message session createTextMessage String bigBuf idx producer send bigDestination message messagesSent incrementAndGet
Message message session createTextMessage String bigBuf idx producer send bigDestination message messagesSent incrementAndGet LOG info idx broker getSystemUsage getMemoryUsage getPercentUsage toSend Session session producerConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setDeliveryMode deliveryMode idx idx toSend idx Message message session createTextMessage String buf idx producer send destination message messagesSent incrementAndGet
messagesSent incrementAndGet LOG info idx broker getSystemUsage getMemoryUsage getPercentUsage ex ex printStackTrace producingThread start Session session producerConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setDeliveryMode deliveryMode idx idx idx Message message session createTextMessage String buf idx producer send destination message
producingThread start Session session producerConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setDeliveryMode deliveryMode idx idx idx Message message session createTextMessage String buf idx producer send destination message messagesSent incrementAndGet LOG info idx broker getSystemUsage getMemoryUsage getPercentUsage ex ex printStackTrace
ex ex printStackTrace producingThreadTwo start assertTrue LOG info broker getSystemUsage getMemoryUsage getPercentUsage messagesSent messagesSent get LOG info count Message m count count assertTrue m consumer receive messageReceiveTimeout LOG info count m broker getSystemUsage getMemoryUsage getPercentUsage
Connection conn createJmsConnection Session session conn createSession Session AUTO_ACKNOWLEDGE Queue queue session createQueue MessageProducer producer session createProducer queue BytesMessage bm session createBytesMessage bm writeBytes producer send bm session commit memoryUsagePercent broker getSystemUsage getMemoryUsage getPercentUsage
startPercentage broker getAdminView getMemoryPercentUsage
startPercentage broker getAdminView getMemoryPercentUsage LOG info startPercentage
xenaToHaloCtr hectorSender send payload xenaToHaloCtr lock lock notifyAll possiblySleep xenaToHaloCtr troyToHaloCtr xenaSender send payload troyToHaloCtr lock
xenaToHaloCtr hectorSender send payload xenaToHaloCtr lock lock notifyAll possiblySleep xenaToHaloCtr troyToHaloCtr xenaSender send payload troyToHaloCtr lock lock notifyAll
message session createTextMessage text producer send message LOG trace message getJMSMessageID message session createTextMessage text producer send message LOG trace message getJMSMessageID consumer setMessageListener listener sleep connection start listener getCounter listener getCounter
producer setDeliveryMode DeliveryMode NON_PERSISTENT String text Thread currentThread getName hashCode TextMessage message message session createTextMessage text producer send message LOG trace message getJMSMessageID message session createTextMessage text producer send message LOG trace message getJMSMessageID sleep counter counter counter assertNotNull consumer receive
message session createTextMessage text producer send message LOG trace message getJMSMessageID message session createTextMessage text producer send message LOG trace message getJMSMessageID message session createTextMessage text producer send message LOG trace message getJMSMessageID sleep counter counter counter assertNotNull consumer receive
log info Destination destination session createQueue DESTINATION MessageProducer messageProducer session createProducer destination i i i Message message session createTextMessage createMessageText i message setStringProperty messageProducer send message
Destination destination session createQueue DESTINATION MessageConsumer messageConsumer session createConsumer destination Message message messageConsumer receive
BrokerService broker createBroker broker waitUntilStarted CountDownLatch gotTimeoutException CountDownLatch sendTimeout numberOfMessageSent sendMessages broker gotTimeoutException sendTimeout assertTrue gotTimeoutException await sendTimeout TimeUnit MILLISECONDS consumeMessages broker numberOfMessageSent QueueView queueView getQueueView broker DESTINATION queueSize queueView getQueueSize memoryUsage queueView getCursorMemoryUsage
BrokerService broker createBroker broker waitUntilStarted CountDownLatch gotTimeoutException CountDownLatch sendTimeout numberOfMessageSent sendMessages broker gotTimeoutException sendTimeout assertTrue gotTimeoutException await sendTimeout TimeUnit MILLISECONDS consumeMessages broker numberOfMessageSent QueueView queueView getQueueView broker DESTINATION queueSize queueView getQueueSize memoryUsage queueView getCursorMemoryUsage LOG info queueSize
ActiveMQConnectionFactory connectionFactory newConnectionFactory broker connectionFactory setSendTimeout sendTimeeOut Connection connection ActiveMQConnection connectionFactory createConnection connection start Session producerSession connection createSession Session SESSION_TRANSACTED MessageProducer jmsProducer producerSession createProducer producerSession createQueue DESTINATION Message sendMessage producerSession createTextMessage createTextMessage jmsProducer send sendMessage producerSession commit numberOfMessageSent LOG info numberOfMessageSent numberOfMessageSent
connectionFactory setSendTimeout sendTimeeOut Connection connection ActiveMQConnection connectionFactory createConnection connection start Session producerSession connection createSession Session SESSION_TRANSACTED MessageProducer jmsProducer producerSession createProducer producerSession createQueue DESTINATION Message sendMessage producerSession createTextMessage createTextMessage jmsProducer send sendMessage producerSession commit numberOfMessageSent LOG info numberOfMessageSent numberOfMessageSent ex LOG info ex
broker numberOfMessageConsumed ActiveMQConnectionFactory connectionFactory newConnectionFactory broker Connection connection ActiveMQConnection connectionFactory createConnection connection start Session consumerSession connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer jmsConsumer consumerSession createConsumer consumerSession createQueue DESTINATION jmsConsumer receive numberOfMessageConsumed LOG info numberOfMessageConsumed numberOfMessageConsumed ex LOG info ex
acks acksReceived incrementAndGet latch get countDown acks
Connection connection factory createConnection connection start Session session connection createSession Session SESSION_TRANSACTED Destination destinationQ1 session createQueue TEST_QUEUE_ONE Destination destinationQ2 session createQueue TEST_QUEUE_TWO MessageProducer producerQ1 session createProducer destinationQ1 producerQ1 setDeliveryMode DeliveryMode PERSISTENT Message m session createTextMessage LOG info producerQ1 send m session commit MessageConsumer consumerQ1 session createConsumer destinationQ1 LOG info TextMessage textMessage TextMessage consumerQ1 receive
Destination destinationQ2 session createQueue TEST_QUEUE_TWO MessageProducer producerQ1 session createProducer destinationQ1 producerQ1 setDeliveryMode DeliveryMode PERSISTENT Message m session createTextMessage LOG info producerQ1 send m session commit MessageConsumer consumerQ1 session createConsumer destinationQ1 LOG info TextMessage textMessage TextMessage consumerQ1 receive LOG info textMessage assertFalse textMessage getJMSRedelivered session rollback LOG info TextMessage textMessage2 TextMessage consumerQ1 receive
broker setUseJmx broker setDeleteAllMessagesOnStartup broker addConnector setName broker start ActiveMQConnectionFactory factory ActiveMQConnectionFactory broker getTransportConnectors get getPublishableConnectString Connection connection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer ActiveMQQueue getDestinationName idx idx idx Message message session createTextMessage idx producer send message
producingThread setPriority Thread MAX_PRIORITY producingThread start Thread sleep Thread Thread Session session connection createSession Session CLIENT_ACKNOWLEDGE MessageConsumer consumer session createConsumer ActiveMQQueue getDestinationName diff messagesCount Message msg consumer receive messageReceiveTimeout msg LOG warn messagesCount
producingThread setPriority Thread MAX_PRIORITY producingThread start Thread sleep Thread Thread Session session connection createSession Session CLIENT_ACKNOWLEDGE MessageConsumer consumer session createConsumer ActiveMQQueue getDestinationName diff messagesCount Message msg consumer receive messageReceiveTimeout msg LOG warn messagesCount
Session session connection createSession Session CLIENT_ACKNOWLEDGE MessageConsumer consumer session createConsumer ActiveMQQueue getDestinationName diff messagesCount Message msg consumer receive messageReceiveTimeout msg LOG warn messagesCount String text TextMessage msg getText currentMsgIdx Integer parseInt text LOG debug text messagesCount msg acknowledge
producerConnection start CountDownLatch producerHasSentTenMessages CountDownLatch Thread Thread Session session producerConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setDeliveryMode deliveryMode idx idx idx Message message session createTextMessage String buf idx producer send message messagesSent incrementAndGet producerHasSentTenMessages countDown Thread sleep idx idx
idx idx LOG info idx LOG info broker getSystemUsage getTempUsage getUsage producer close session close ex ex printStackTrace producingThread start assertTrue producerHasSentTenMessages await TimeUnit SECONDS count Message m m count count count
ex ex printStackTrace producingThread start assertTrue producerHasSentTenMessages await TimeUnit SECONDS count Message m m count count count LOG info count m messagesConsumed incrementAndGet Thread sleep
producingThread start assertTrue producerHasSentTenMessages await TimeUnit SECONDS count Message m m count count count LOG info count m messagesConsumed incrementAndGet Thread sleep LOG info LOG info count
Message m m count count count LOG info count m messagesConsumed incrementAndGet Thread sleep LOG info LOG info count m count count count LOG info count m
broker getSystemUsage setSendFailIfNoSpace destination ActiveMQQueue ActiveMQConnectionFactory factory ActiveMQConnectionFactory connectionUri ActiveMQConnection producerConnection ActiveMQConnection factory createConnection producerConnection setAlwaysSyncSend producerConnection start Session session producerConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode NON_PERSISTENT Message message session createTextMessage String buf messagesSent toString producer send message messagesSent incrementAndGet messagesSent
ActiveMQConnection producerConnection ActiveMQConnection factory createConnection producerConnection setAlwaysSyncSend producerConnection start Session session producerConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode NON_PERSISTENT Message message session createTextMessage String buf messagesSent toString producer send message messagesSent incrementAndGet messagesSent get LOG info messagesSent get LOG info broker getSystemUsage getTempUsage getUsage
Message message session createTextMessage String buf messagesSent toString producer send message messagesSent incrementAndGet messagesSent get LOG info messagesSent get LOG info broker getSystemUsage getTempUsage getUsage ex LOG info ex messagesSent get Connection consumerConnection factory createConnection consumerConnection start Session consumerSession consumerConnection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer consumerSession createConsumer destination consumer messagesConsumed incrementAndGet messagesConsumed get
broker getSystemUsage setSendFailIfNoSpace destination ActiveMQQueue ActiveMQConnectionFactory factory ActiveMQConnectionFactory brokerUri ActiveMQConnection producerConnection ActiveMQConnection factory createConnection producerConnection setAlwaysSyncSend producerConnection start Session session producerConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode NON_PERSISTENT Message message session createTextMessage String buf messagesSent toString producer send message messagesSent incrementAndGet messagesSent
producerConnection setAlwaysSyncSend producerConnection start Session session producerConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode NON_PERSISTENT Message message session createTextMessage String buf messagesSent toString producer send message messagesSent incrementAndGet messagesSent get LOG info messagesSent get LOG info broker getSystemUsage getTempUsage getUsage assertTrue messagesSent get
broker getSystemUsage setSendFailIfNoSpace destination ActiveMQQueue ActiveMQConnectionFactory factory ActiveMQConnectionFactory brokerUri ActiveMQConnection producerConnection ActiveMQConnection factory createConnection producerConnection setAlwaysSyncSend producerConnection start Session session producerConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode NON_PERSISTENT Message message session createTextMessage String buf messagesSent toString producer send message messagesSent incrementAndGet messagesSent
producerConnection setAlwaysSyncSend producerConnection start Session session producerConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode NON_PERSISTENT Message message session createTextMessage String buf messagesSent toString producer send message messagesSent incrementAndGet messagesSent get LOG info messagesSent get LOG info broker getSystemUsage getTempUsage getUsage assertTrue messagesSent get messagesSent get
producer send message messagesSent incrementAndGet messagesSent get LOG info messagesSent get LOG info broker getSystemUsage getTempUsage getUsage ex assertTrue messagesSent get messagesSent get LOG info ex messagesSent get Connection consumerConnection factory createConnection consumerConnection start Session consumerSession consumerConnection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer consumerSession createConsumer destination consumer messagesConsumed incrementAndGet messagesConsumed get
startPercentage broker getAdminView getMemoryPercentUsage
startPercentage broker getAdminView getMemoryPercentUsage LOG info startPercentage
ExecutorService sendExecutor Executors newSingleThreadExecutor sendExecutor sendMessages sendExecutor shutdown sendExecutor awaitTermination TimeUnit MINUTES allMessagesReceived messagesReceivedCountDown await TimeUnit MINUTES allMessagesReceived LOG info LOG info broker getSystemUsage getMemoryUsage LOG info broker getSystemUsage getStoreUsage LOG info messagesSentCountDown getCount
producer send shortRetainQueue message session commit MessageConsumer consumer session createConsumer shortRetainQueue consumer receive session commit LOG info broker getSystemUsage getMemoryUsage LOG info broker getSystemUsage getStoreUsage consumerStartLatch countDown producer send queue message session commit messagesSentCountDown countDown
xenaToHaloCtr hectorSender send xenaToHaloCtr lock lock notifyAll troyToHaloCtr xenaSender send troyToHaloCtr lock
xenaToHaloCtr hectorSender send xenaToHaloCtr lock lock notifyAll troyToHaloCtr xenaSender send troyToHaloCtr lock lock notifyAll
org apache log4j Logger serviceLogger org apache log4j Logger getLogger TransportConnection getName serviceLogger setLevel Level TRACE broker createBroker broker deleteAllMessages broker start broker waitUntilStarted LOG info String failoverTransportURL transportUrl sendMessage MY_TEST_Q failoverTransportURL ArrayList Long dbSeq dbMessageCount checkOnStoreConnection
org apache log4j Logger serviceLogger org apache log4j Logger getLogger TransportConnection getName serviceLogger setLevel Level TRACE broker createBroker broker deleteAllMessages broker start broker waitUntilStarted LOG info String failoverTransportURL transportUrl sendMessage MY_TEST_Q failoverTransportURL ArrayList Long dbSeq dbMessageCount checkOnStoreConnection LOG info dbSeq List TextMessage consumedMessages consumeMessages MY_TEST_Q failoverTransportURL assertEquals consumedMessages size dbSeq dbMessageCount checkOnStoreConnection
TextMessage queue transportURL Connection connection LOG debug ActiveMQConnectionFactory factory ActiveMQConnectionFactory transportURL connection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue queue ArrayList TextMessage consumedMessages ArrayList TextMessage MessageConsumer messageConsumer session createConsumer destination TextMessage textMessage TextMessage messageConsumer receive
Connection connection ActiveMQConnectionFactory factory ActiveMQConnectionFactory transportURL connection factory createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue queue MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode PERSISTENT TextMessage m session createTextMessage LOG debug producer send m LOG debug m setText producer send m ArrayList Long dbSeq dbMessageCount checkOnStoreConnection
ActiveMQConnection persistentConn ActiveMQConnection createConnection persistentConn start Session session persistentConn createSession Session SESSION_TRANSACTED MessageProducer producer session createProducer destination
BufferedReader br BufferedReader InputStreamReader System in BrokerService brokerService Connection connection logger info brokerService BrokerService brokerService setBrokerName brokerService setUseJmx
i i i Message msg session createTextMessage i producer send msg logger info ThreadExplorer show System out println String key br readLine e e printStackTrace br close logger info brokerService getBrokerName connection close brokerService stop sleep
e e printStackTrace br close logger info brokerService getBrokerName connection close brokerService stop sleep logger info ThreadExplorer show e e printStackTrace logger info numTh ThreadExplorer active numTh
String String String me
msg1 setJMSPriority jmsPriority msg1 setJMSTimestamp jmsTimestamp msg1 setReadOnlyProperties ActiveMQMessage msg2 ActiveMQMessage msg1 copy msg2 assertEquals msg1 getJMSMessageID msg2 getJMSMessageID assertTrue msg1 getJMSCorrelationID equals msg2 getJMSCorrelationID assertTrue msg1 getJMSDestination equals msg2 getJMSDestination assertTrue msg1 getJMSReplyTo equals msg2 getJMSReplyTo assertTrue msg1 getJMSDeliveryMode msg2 getJMSDeliveryMode assertTrue msg1 getJMSRedelivered msg2 getJMSRedelivered assertTrue msg1 getJMSType equals msg2 getJMSType assertTrue msg1 getJMSExpiration msg2 getJMSExpiration assertTrue msg1 getJMSPriority msg2 getJMSPriority assertTrue msg1 getJMSTimestamp msg2 getJMSTimestamp
ActiveMQMessage message ActiveMQMessage message setProducerId ProducerId SessionId ConnectionId ConnectionId message setMessageId MessageId message getProducerId message setCommandId message setGroupID message setGroupSequence message setCorrelationId message setContent ByteSequence message setTimestamp System currentTimeMillis message setDestination ActiveMQQueue p start System currentTimeMillis p marshalAndUnmarshall message wireFormat end System currentTimeMillis
BrokerService broker BrokerFactory createBroker
ActiveMQConnectionFactory factory ActiveMQConnectionFactory Connection connection factory createConnection BrokerService broker BrokerRegistry getInstance lookup
List ObjectInstance queueList JmxMBeansUtil queryMBeans createJmxConnection ObjectInstance oi queueList ObjectName queueName oi getObjectName
expectedWithCount expectedWithoutCount expectedAllCount QueueBrowser withPropertyBrowser requestServerSession createBrowser theQueue MSG_SEL_WITH_PROPERTY QueueBrowser withoutPropertyBrowser requestServerSession createBrowser theQueue MSG_SEL_WITHOUT_PROPERTY QueueBrowser allBrowser requestServerSession createBrowser theQueue withCount getMessageCount withPropertyBrowser withoutCount getMessageCount withoutPropertyBrowser allCount getMessageCount allBrowser withPropertyBrowser close withoutPropertyBrowser close allBrowser close assertEquals expectedWithCount withCount expectedWithCount withCount assertEquals expectedWithoutCount withoutCount expectedWithoutCount withoutCount assertEquals expectedAllCount allCount expectedAllCount allCount
addMessages validateCounts MESSAGE_COUNT MESSAGE_COUNT MESSAGE_COUNT List String tokens Arrays asList String String token tokens List ObjectInstance queueList JmxMBeansUtil queryMBeans createJmxConnection token ObjectInstance queue queueList ObjectName queueName queue getObjectName QueueViewMBean proxy MBeanServerInvocationHandler newProxyInstance createJmxConnection queueName QueueViewMBean removed proxy removeMatchingMessages MSG_SEL_WITH_PROPERTY
purgeCommand setJmxUseLocal List String tokens ArrayList String tokens add tokens add MSG_SEL_COMPLEX addMessages validateCounts MESSAGE_COUNT MESSAGE_COUNT MESSAGE_COUNT purgeCommand execute tokens QueueBrowser withPropertyBrowser requestServerSession createBrowser theQueue MSG_SEL_COMPLEX QueueBrowser allBrowser requestServerSession createBrowser theQueue withCount getMessageCount withPropertyBrowser allCount getMessageCount allBrowser withPropertyBrowser close allBrowser close assertEquals withCount withCount assertEquals MESSAGE_COUNT allCount MESSAGE_COUNT allCount
context setFormatter CommandShellOutputFormatter System out purgeCommand setCommandContext context purgeCommand setJmxUseLocal List String tokens ArrayList String tokens add tokens add MSG_SEL_COMPLEX_SQL_AND addMessages validateCounts MESSAGE_COUNT MESSAGE_COUNT MESSAGE_COUNT purgeCommand execute tokens QueueBrowser withPropertyBrowser requestServerSession createBrowser theQueue MSG_SEL_COMPLEX_SQL_AND QueueBrowser allBrowser requestServerSession createBrowser theQueue withCount getMessageCount withPropertyBrowser allCount getMessageCount allBrowser withPropertyBrowser close allBrowser close
purgeCommand setJmxUseLocal List String tokens ArrayList String tokens add tokens add MSG_SEL_COMPLEX_SQL_OR addMessages validateCounts MESSAGE_COUNT MESSAGE_COUNT MESSAGE_COUNT purgeCommand execute tokens QueueBrowser withPropertyBrowser requestServerSession createBrowser theQueue MSG_SEL_COMPLEX_SQL_OR QueueBrowser allBrowser requestServerSession createBrowser theQueue withCount getMessageCount withPropertyBrowser allCount getMessageCount allBrowser withPropertyBrowser close allBrowser close assertEquals withCount withCount assertEquals allCount allCount
String uri String text Connection connection args printUsage System exit idx String arg args arg args printUsage System exit uri args idx String queueName args idx
String text Connection connection args printUsage System exit idx String arg args arg args printUsage System exit uri args idx String queueName args idx LOG info uri
String destinationName Context jndiContext ConnectionFactory connectionFactory Connection connection Session session Destination destination MessageConsumer consumer args LOG info System exit destinationName args LOG info destinationName jndiContext InitialContext
MessageConsumer consumer args LOG info System exit destinationName args LOG info destinationName jndiContext InitialContext e LOG info e toString System exit connectionFactory ConnectionFactory jndiContext lookup destination Destination jndiContext lookup destinationName e
destination Destination jndiContext lookup destinationName e LOG info e toString System exit connection connectionFactory createConnection session connection createSession Session AUTO_ACKNOWLEDGE consumer session createConsumer destination connection start Message m consumer receive m m TextMessage TextMessage message TextMessage m LOG info message getText
MessageProducer producer String destinationName numMsgs args args LOG info System exit destinationName args LOG info destinationName args numMsgs Integer args intValue numMsgs jndiContext InitialContext
destinationName args LOG info destinationName args numMsgs Integer args intValue numMsgs jndiContext InitialContext e LOG info e toString System exit connectionFactory ConnectionFactory jndiContext lookup destination Destination jndiContext lookup destinationName e
LOG info e toString System exit connectionFactory ConnectionFactory jndiContext lookup destination Destination jndiContext lookup destinationName e LOG info e System exit connection connectionFactory createConnection session connection createSession Session AUTO_ACKNOWLEDGE producer session createProducer destination TextMessage message session createTextMessage i i i message setText i
Context jndiContext QueueConnectionFactory queueConnectionFactory QueueConnection queueConnection QueueSession queueSession Queue queue QueueReceiver queueReceiver TextMessage message args LOG info System exit queueName args LOG info queueName jndiContext InitialContext
TextMessage message args LOG info System exit queueName args LOG info queueName jndiContext InitialContext e LOG info e toString System exit queueConnectionFactory QueueConnectionFactory jndiContext lookup queue Queue jndiContext lookup queueName e
queue Queue jndiContext lookup queueName e LOG info e toString System exit queueConnection queueConnectionFactory createQueueConnection queueSession queueConnection createQueueSession Session AUTO_ACKNOWLEDGE queueReceiver queueSession createReceiver queue queueConnection start Message m queueReceiver receive m m TextMessage message TextMessage m LOG info message getText
QueueSender queueSender TextMessage message numMsgs args args LOG info System exit queueName args LOG info queueName args numMsgs Integer args intValue numMsgs jndiContext InitialContext
queueName args LOG info queueName args numMsgs Integer args intValue numMsgs jndiContext InitialContext e LOG info e toString System exit queueConnectionFactory QueueConnectionFactory jndiContext lookup queue Queue jndiContext lookup queueName e
LOG info e toString System exit queueConnectionFactory QueueConnectionFactory jndiContext lookup queue Queue jndiContext lookup queueName e LOG info e System exit queueConnection queueConnectionFactory createQueueConnection queueSession queueConnection createQueueSession Session AUTO_ACKNOWLEDGE queueSender queueSession createSender queue message queueSession createTextMessage i i i message setText i
String String destination Session consumerSession connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer messageConsumer consumerSession createConsumer ActiveMQQueue destination Message message String messageID message messageConsumer receive message
ObjectName name ObjectName objectName ObjectName name objectName
ActiveMQBytesMessage bm ActiveMQBytesMessage bm writeBytes getBytes Object result OpenTypeSupport convert bm
LOG info sendMessage restartBroker receiveMessage totalMessageCount getTotalMessageCount totalMessageCount
Connection conn connectionFactory createConnection conn start Session session conn createSession Session AUTO_ACKNOWLEDGE Destination queue session createQueue TESTQUEUE TextMessage msg session createTextMessage MessageProducer producer session createProducer queue producer send queue msg
Message Connection conn connectionFactory createConnection Message msg conn start Session session conn createSession Session AUTO_ACKNOWLEDGE Destination queue session createQueue TESTQUEUE MessageConsumer consumer session createConsumer queue msg consumer receive TimeUnit SECONDS toMillis msg
ObjectName brokerViewMBeanName ObjectName BrokerViewMBean brokerMBean BrokerViewMBean brokerService getManagementContext newProxyInstance brokerViewMBeanName BrokerViewMBean
InitialContext context InitialContext assertTrue context ActiveMQConnectionFactory connectionFactory ActiveMQConnectionFactory context lookup assertTrue connectionFactory
InitialContext context InitialContext assertTrue context ActiveMQXAConnectionFactory connectionFactory ActiveMQXAConnectionFactory context lookup assertTrue connectionFactory
Binding binding Object object binding getObject assertTrue object object Context Context childContext Context object NamingEnumeration Binding iter childContext listBindings iter Binding destinationBinding iter next
BoundaryStatisticImpl stat BoundaryStatisticImpl assertStatistic stat assertEquals stat getLowerBound assertEquals stat getUpperBound
CountStatisticImpl stat CountStatisticImpl stat setEnabled assertStatistic stat assertEquals stat getCount stat increment assertEquals stat getCount stat increment assertEquals stat getCount stat decrement assertEquals stat getCount Thread sleep stat increment assertLastTimeNotStartTime stat
assertEquals stat getHighWaterMark stat setCurrent assertEquals stat getCurrent assertEquals stat getLowWaterMark assertEquals stat getHighWaterMark stat setCurrent assertEquals stat getCurrent assertEquals stat getLowWaterMark assertEquals stat getHighWaterMark Thread sleep stat setCurrent assertEquals stat getCurrent assertEquals stat getLowWaterMark assertEquals stat getHighWaterMark assertLastTimeNotStartTime stat
assertEquals stat getCount assertEquals stat getMinTime assertEquals stat getMaxTime stat addTime assertEquals stat getCount assertEquals stat getMinTime assertEquals stat getMaxTime stat addTime assertEquals stat getCount assertEquals stat getMinTime assertEquals stat getMaxTime assertEquals stat getTotalTime Thread sleep stat addTime assertLastTimeNotStartTime stat
destinationInfo1 createDestinationInfo connection1 connectionInfo1 ActiveMQDestination QUEUE_TYPE connection1 request createMessage producerInfo destinationInfo1 DeliveryMode NON_PERSISTENT Object messages browseQueueWithJmx localBroker assertEquals sendNumMessages messages length StubConnection connection2 createRemoteConnection ConnectionInfo connectionInfo2 createConnectionInfo SessionInfo sessionInfo2 createSessionInfo connectionInfo2 connection2 send connectionInfo2 connection2 send sessionInfo2 ActiveMQDestination destinationInfo2 createDestinationInfo connection2 connectionInfo2 ActiveMQDestination QUEUE_TYPE ConsumerInfo consumerInfo2 createConsumerInfo sessionInfo2 destinationInfo2 connection2 send consumerInfo2 Message message1 receiveMessage connection2 assertNotNull message1
Object broker Hashtable String String params Hashtable String String params put broker getBrokerName params put params put params put queueName ObjectName queueObjectName ObjectName getInstance amqDomain params ManagementContext mgmtCtx broker getManagementContext QueueViewMBean queueView QueueViewMBean mgmtCtx newProxyInstance queueObjectName QueueViewMBean Object messages queueView browse
brokerService Object bridges brokerService getNetworkConnectors get bridges values toArray bridges
brokerService Object bridges brokerService getNetworkConnectors get bridges values toArray bridges LOG info brokerService Arrays toString bridges DemandForwardingBridgeSupport demandForwardingBridgeSupport DemandForwardingBridgeSupport bridges ConcurrentMap ConsumerId DemandSubscription forwardingBridges demandForwardingBridgeSupport getLocalSubscriptionMap
brokerService Object bridges brokerService getNetworkConnectors get bridges values toArray bridges LOG info brokerService Arrays toString bridges DemandForwardingBridgeSupport demandForwardingBridgeSupport DemandForwardingBridgeSupport bridges ConcurrentMap ConsumerId DemandSubscription forwardingBridges demandForwardingBridgeSupport getLocalSubscriptionMap LOG info brokerService demandForwardingBridgeSupport forwardingBridges forwardingBridges DemandSubscription forwardingBridges values
Set all mBeanServer queryNames
bridgeIdentity getBridgeId
BrokerService broker0 createBroker NetworkConnector networkConnector broker0 addNetworkConnector urlString urlString networkConnector setDuplex networkConnector setStaticBridge networkConnector setStaticallyIncludedDestinations Arrays ActiveMQDestination asList ActiveMQQueue dest broker0 start publish broker0 getVmConnectorURI BrokerService broker1 createBroker broker1 addConnector urlString broker1 addConnection context info addConnection context info info info
brokerB start AtomicBoolean done AtomicBoolean ExecutorService executorService Executors newCachedThreadPool executorService done brokerA createBroker brokerA setBrokerName brokerA setBrokerObjectName ObjectName brokerA getManagementContext getJmxDomainName JMXSupport encodeObjectNamePart KahaDBPersistenceAdapter brokerA getPersistenceAdapter getLocker setLockAcquireSleepInterval brokerA start brokerA waitUntilStopped brokerA1 waitUntilStarted
from LOG info from SslContext setCurrentSslContext sslContext ConnectionFactory consFactory createConnectionFactory from Connection consConn consFactory createConnection consConn start Session consSession consConn createSession Session AUTO_ACKNOWLEDGE ActiveMQDestination destination ActiveMQDestination consSession createQueue DESTINATION_NAME MessageConsumer consumer consSession createConsumer destination
to from LOG info from SslContext setCurrentSslContext sslContext ConnectionFactory consFactory createConnectionFactory from Connection consConn consFactory createConnection consConn start Session consSession consConn createSession Session AUTO_ACKNOWLEDGE ActiveMQDestination destination ActiveMQDestination consSession createQueue DESTINATION_NAME MessageConsumer consumer consSession createConsumer destination LOG info to sendMessageTo destination to Message message consumer receive
broker result BrokerView view broker getAdminView view ObjectName subs broker getAdminView getInactiveDurableTopicSubscribers subs
MessageProducer remoteProducer remoteSession createProducer MessageConsumer remoteConsumer remoteSession createConsumer included remoteConsumer msg TextMessage textMsg TextMessage msg String payload textMsg getText textMsg getJMSMessageID Destination replyTo replyTo msg getJMSReplyTo textMsg clearBody textMsg setText payload
MessageProducer remoteProducer remoteSession createProducer MessageConsumer remoteConsumer remoteSession createConsumer included remoteConsumer msg TextMessage textMsg TextMessage msg String payload textMsg getText textMsg getJMSMessageID Destination replyTo replyTo msg getJMSReplyTo textMsg clearBody textMsg setText payload LOG info textMsg getText remoteProducer send replyTo textMsg
msg TextMessage textMsg TextMessage msg String payload textMsg getText textMsg getJMSMessageID Destination replyTo replyTo msg getJMSReplyTo textMsg clearBody textMsg setText payload LOG info textMsg getText remoteProducer send replyTo textMsg LOG info textMsg getJMSMessageID replyToNonExistDest incrementAndGet
LOG info textMsg getJMSMessageID e e printStackTrace e LOG warn e e printStackTrace Queue tempQueue localSession createTemporaryQueue MessageProducer requestProducer localSession createProducer included requestProducer setDeliveryMode DeliveryMode NON_PERSISTENT MessageConsumer requestConsumer localSession createConsumer tempQueue MessageConsumer dlqconsumer remoteSession createConsumer ActiveMQQueue SharedDeadLetterStrategy DEFAULT_DEAD_LETTER_QUEUE_NAME dlqconsumer
LOG info message getJMSMessageID e e printStackTrace remoteDLQCount incrementAndGet Thread sleep done System currentTimeMillis MESSAGE_COUNT i MESSAGE_COUNT remoteDLQCount done System currentTimeMillis i MESSAGE_COUNT String payload i i TextMessage msg localSession createTextMessage payload msg setJMSReplyTo tempQueue requestProducer send msg
groupId System currentTimeMillis brokers BrokerService BROKER_COUNT brokers
TransportConnector transportConnector remote addConnector remote start BrokerService local BrokerService local setSslContext sslContext local setUseJmx local setPersistent NetworkConnector networkConnector local addNetworkConnector remote getTransportConnectorByScheme getPublishableConnectString replace local start assertTrue networkConnector activeBridges isEmpty networkConnector activeBridges toArray DurableConduitBridge getRemoteBrokerName AtomicReference DurableConduitBridge bridge AtomicReference DurableConduitBridge networkConnector activeBridges iterator next assertTrue bridge get getRemoteBrokerName equals
String payload textMsg getText Destination replyTo replyTo msg getJMSReplyTo textMsg clearBody textMsg setText payload remoteProducer send replyTo textMsg e e printStackTrace TopicRequestor requestor TopicRequestor TopicSession localSession included Thread sleep i i i TextMessage msg localSession createTextMessage i TextMessage result TextMessage requestor request msg assertNotNull result
brokerService Object bridges brokerService getNetworkConnectors get bridges values toArray bridges
brokerService Object bridges brokerService getNetworkConnectors get bridges values toArray bridges LOG info brokerService Arrays toString bridges DemandForwardingBridgeSupport demandForwardingBridgeSupport DemandForwardingBridgeSupport bridges ConcurrentMap ConsumerId DemandSubscription forwardingBridges demandForwardingBridgeSupport getLocalSubscriptionMap
brokerService Object bridges brokerService getNetworkConnectors get bridges values toArray bridges LOG info brokerService Arrays toString bridges DemandForwardingBridgeSupport demandForwardingBridgeSupport DemandForwardingBridgeSupport bridges ConcurrentMap ConsumerId DemandSubscription forwardingBridges demandForwardingBridgeSupport getLocalSubscriptionMap LOG info brokerService demandForwardingBridgeSupport forwardingBridges forwardingBridges DemandSubscription forwardingBridges values
MessageProducer producer localSession createProducer included i i i Message test localSession createTextMessage i producer send test Thread sleep localConsumer localSession createDurableSubscriber included consumerName LOG info localConsumer i i i assertNotNull i localConsumer receive Thread sleep doTearDown doSetUp Thread sleep LOG info MessageConsumer remoteConsumer remoteSession createDurableSubscriber included consumerName
available ActiveMQMessage message message ActiveMQMessage available
i i i TextMessage msg requestServerSession createTextMessage i TextMessage result TextMessage requestor request msg assertNotNull result
i i i TextMessage msg requestServerSession createTextMessage i
i i i TextMessage msg requestServerSession createTextMessage i LOG info msg TextMessage result TextMessage requestor request msg assertNotNull result
msg TextMessage textMsg TextMessage msg String payload textMsg getText Destination replyTo replyTo msg getJMSReplyTo textMsg clearBody textMsg setText payload
ByteArrayOutputStream buffer ByteArrayOutputStream DataOutputStream ds DataOutputStream buffer Object expected createObject
ByteArrayOutputStream buffer ByteArrayOutputStream DataOutputStream ds DataOutputStream buffer Object expected createObject LOG info expected openWireformat marshal expected ds ds close ByteArrayInputStream in ByteArrayInputStream buffer toByteArray DataInputStream dis DataInputStream in Object actual openWireformat unmarshal dis assertBeansEqual HashSet Object expected actual
comparedObjects add expected Class Object type expected getClass assertEquals type actual getClass BeanInfo beanInfo Introspector getBeanInfo type PropertyDescriptor descriptors beanInfo getPropertyDescriptors i i descriptors i PropertyDescriptor descriptor descriptors i Method method descriptor getReadMethod method String name descriptor getName Object expectedValue Object actualValue expectedValue method invoke expected EMPTY_ARGUMENTS actualValue method invoke actual EMPTY_ARGUMENTS
numberValues i i numberValues i value numberValues i SessionId object SessionId object setConnectionId connectionId object setValue value writeObject object ds writeInt endOfStreamMarker ds close ByteArrayInputStream in ByteArrayInputStream buffer toByteArray DataInputStream dis DataInputStream in i i numberValues i value numberValues i String expected Long toHexString value
ConnectionFactory factory createConnectionFactory List Connection list ArrayList Connection Connection connection factory createConnection connection start list add connection
assertNotNull connection session connection createSession javax jms Session CLIENT_ACKNOWLEDGE assertNotNull session topic session createTopic TOPIC_NAME assertNotNull topic publisher session createProducer topic assertNotNull publisher MapMessage msg session createMapMessage assertNotNull msg msg setString loop loop loop loop msg setInt loop publisher send msg DELIVERY_MODE DELIVERY_PRIORITY Message DEFAULT_TIME_TO_LIVE loop
connection connectionFactory createConnection USERNAME DEFAULT_PASSWORD assertNotNull connection connection setClientID CLIENTID connection start session connection createSession javax jms Session AUTO_ACKNOWLEDGE assertNotNull session topic session createTopic TOPIC_NAME assertNotNull topic subscriber session createDurableSubscriber topic SUBID assertNotNull subscriber loop loop loop loop subscriber receive loop
connection start session connection createSession javax jms Session AUTO_ACKNOWLEDGE assertNotNull session destination session createQueue QUEUE_NAME assertNotNull destination publisher session createProducer destination assertNotNull publisher MapMessage msg session createMapMessage assertNotNull msg msg setString loop loop loop loop msg setInt loop publisher send msg DELIVERY_MODE DELIVERY_PRIORITY Message DEFAULT_TIME_TO_LIVE loop
ConnectionFactory factory createConnectionFactory Connection connection factory createConnection i i i Session session connection createSession Session AUTO_ACKNOWLEDGE Destination dest session createTemporaryTopic session createConsumer dest MessageProducer mp session createProducer dest Message msg session createTextMessage i mp send msg session close releaseDestination dest i
LOG info ClassPathXmlApplicationContext context1 BrokerFactoryBean brokerFactory BrokerFactoryBean ClassPathResource config assertNotNull brokerFactory Thread currentThread setContextClassLoader NetworkedSyncTest getClassLoader context1 ClassPathXmlApplicationContext config broker1 BrokerService context1 getBean broker1 LOG info broker1 start LOG info broker1 waitUntilStopped
LOG info broker1 waitUntilStopped e LOG error e getMessage e Thread currentThread setContextClassLoader NetworkedSyncTest getClassLoader context1 ClassPathXmlApplicationContext config broker2 BrokerService context1 getBean broker2 LOG info broker2 start LOG info broker2 waitUntilStopped
e printStackTrace connection start session connection createSession Session AUTO_ACKNOWLEDGE Topic destination session createTopic producer session createProducer destination producer setDeliveryMode DeliveryMode PERSISTENT counter String text Thread currentThread getName hashCode counter TextMessage message session createTextMessage text producer send message counter counter LOG info counter
connection e e printStackTrace connection start session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createTopic consumer session createDurableSubscriber Topic destination counter Message message2 consumer receive message2 TextMessage TextMessage textMessage TextMessage message2 textMessage getText
consumerBroker createConsumerBroker consumerBindAddress producerBroker producerBroker createProducerBroker producerBindAddress consumerFactory createConnectionFactory consumerBindAddress consumerFactory setDispatchAsync ActiveMQPrefetchPolicy policy ActiveMQPrefetchPolicy policy setQueuePrefetch consumerFactory setPrefetchPolicy policy producerFactory createConnectionFactory producerBindAddress Connection con consumerFactory createConnection Session session con createSession Session AUTO_ACKNOWLEDGE producers PerfProducer numberofProducers numberOfDestinations consumers PerfConsumer numberOfConsumers numberOfDestinations k k numberOfDestinations k Destination destination createDestination session destinationName k
broker broker createBroker bindAddress factory createConnectionFactory clientURI Connection con factory createConnection Session session con createSession Session AUTO_ACKNOWLEDGE LOG info numberofProducers numberOfConsumers numberOfDestinations totalNumberOfConsumers numberOfConsumers numberOfDestinations totalNumberOfProducers numberofProducers numberOfDestinations producers PerfProducer totalNumberOfProducers consumers PerfConsumer totalNumberOfConsumers consumerCount producerCount k k numberOfDestinations k Destination destination createDestination session destinationName k
onMessage msg onMessage msg
Integer expectedConnectionCount
Object filter parse assertTrue filter BooleanFunctionCallExpr
BooleanExpression filter parse assertTrue filter XPathExpression
String values i i values i String value values i
String String url factory getBrokerURL
message messages messages add message
messageCount maxRemainingMessageCount Math max messageCount messages size
messageCount maxWaitTime maxRemainingMessageCount Math max messageCount messages size LOG info maxRemainingMessageCount start System currentTimeMillis endTime start maxWaitTime maxRemainingMessageCount messages messages wait messageCount System currentTimeMillis endTime e LOG info e maxRemainingMessageCount Math max messageCount messages size end System currentTimeMillis start
i i i String text i
Thread currentThread setContextClassLoader SpringTest getClassLoader context ClassPathXmlApplicationContext config consumer SpringConsumer context getBean assertTrue consumer consumer start Thread sleep consumer flushMessages producer SpringProducer context getBean assertTrue producer producer start consumer waitForMessagesToArrive producer getMessageCount List Message messages consumer flushMessages LOG info Message iter messages iter Object message iter next
BytesMessage session maxMessageSize BytesMessage message session createBytesMessage Random randomSize Random size randomSize nextInt maxMessageSize
ActiveMQQueue queue ActiveMQQueue sess createQueue ProducerThread lowPri ProducerThread queue MSG_NUM LOW_PRI ProducerThread highPri ProducerThread queue MSG_NUM HIGH_PRI lowPri start highPri start lowPri join highPri join MessageConsumer queueConsumer sess createConsumer queue MSG_NUM Message msg queueConsumer receive
Message priority String text priority Message msg sess createTextMessage text
ActiveMQTopic topic ActiveMQTopic sess createTopic String subName TopicSubscriber sub sess createDurableSubscriber topic subName sub close ProducerThread lowPri ProducerThread topic MSG_NUM LOW_PRI ProducerThread highPri ProducerThread topic MSG_NUM HIGH_PRI lowPri start highPri start lowPri join highPri join closeFrequency MSG_NUM sub sess createDurableSubscriber topic subName MSG_NUM Message msg sub receive
sub close ProducerThread lowPri ProducerThread topic MSG_NUM LOW_PRI ProducerThread highPri ProducerThread topic MSG_NUM HIGH_PRI lowPri start highPri start lowPri join highPri join closeFrequency MSG_NUM sub sess createDurableSubscriber topic subName i i MSG_NUM i Message msg sub receive LOG debug i msg msg getJMSMessageID assertNotNull i msg assertEquals i i MSG_NUM HIGH_PRI LOW_PRI msg getJMSPriority i i closeFrequency
sess conn createSession Session AUTO_ACKNOWLEDGE ActiveMQTopic topic ActiveMQTopic sess createTopic String subName TopicSubscriber sub sess createDurableSubscriber topic subName sub close numToProduce dups numToProduce ProducerThread producerThread ProducerThread topic numToProduce LOW_PRI producerThread run LOG info sub sess createDurableSubscriber topic subName batchSize lowLowCount numToProduce Message msg sub receive
producerThread run LOG info producerThread setMessagePriority HIGH_PRI producerThread setMessageCount producerThread run LOG info producerThread setMessagePriority LOW_PRI producerThread setMessageCount producerThread run lowLowCount LOG info msg sub receive assertNotNull msg
producerThread run LOG info producerThread setMessagePriority LOW_PRI producerThread setMessageCount producerThread run lowLowCount LOG info msg sub receive assertNotNull msg LOG info msg assertEquals HIGH_PRI msg getJMSPriority msg sub receive assertNotNull msg
producerThread setMessagePriority LOW_PRI producerThread setMessageCount producerThread run lowLowCount LOG info msg sub receive assertNotNull msg LOG info msg assertEquals HIGH_PRI msg getJMSPriority i msg sub receive assertNotNull msg LOG info i msg assertEquals HIGH_PRI msg getJMSPriority i i lowLowCount i
String subName TopicSubscriber sub sess createDurableSubscriber topic subName sub close ProducerThread producerThread ProducerThread topic HIGH_PRI producerThread run producerThread setMessagePriority HIGH_PRI producerThread setMessageCount producerThread run producerThread setMessagePriority LOW_PRI producerThread setMessageCount producerThread run LOG info sub sess createDurableSubscriber topic subName Message msg sub receive assertNotNull msg
producerThread run producerThread setMessagePriority LOW_PRI producerThread setMessageCount producerThread run LOG info sub sess createDurableSubscriber topic subName Message msg sub receive assertNotNull msg LOG info msg getJMSMessageID msg getJMSPriority assertEquals HIGH_PRI msg getJMSPriority producerThread setMessagePriority LOW_PRI producerThread setMessageCount producerThread run msg sub receive assertNotNull msg
LOG info sub sess createDurableSubscriber topic subName Message msg sub receive assertNotNull msg LOG info msg getJMSMessageID msg getJMSPriority assertEquals HIGH_PRI msg getJMSPriority producerThread setMessagePriority LOW_PRI producerThread setMessageCount producerThread run msg sub receive assertNotNull msg LOG info msg getJMSMessageID msg getJMSPriority assertEquals HIGH_PRI msg getJMSPriority msg sub receive assertNotNull msg
LOG info msg getJMSMessageID msg getJMSPriority assertEquals HIGH_PRI msg getJMSPriority producerThread setMessagePriority LOW_PRI producerThread setMessageCount producerThread run msg sub receive assertNotNull msg LOG info msg getJMSMessageID msg getJMSPriority assertEquals HIGH_PRI msg getJMSPriority msg sub receive assertNotNull msg LOG info msg assertEquals LOW_PRI msg getJMSPriority msg sub receive assertNotNull msg
backlog ActiveMQQueue queue ActiveMQQueue sess createQueue ProducerThread lowPri ProducerThread queue backlog LOW_PRI ProducerThread highPri ProducerThread queue HIGH_PRI lowPri start lowPri join highPri start highPri join LOG info MessageConsumer queueConsumer sess createConsumer queue Message msg queueConsumer receive
File lockFile File testFolder getRoot String jvmProp LockFile getName lockFile getCanonicalPath System getProperties put jvmProp jvmProp CountDownLatch locked CountDownLatch ExecutorService executorService Executors newSingleThreadExecutor AtomicLong acquireTime AtomicLong executorService underTest start acquireTime set System currentTimeMillis locked countDown e e printStackTrace
String receive session MessageConsumer consumer session createConsumer destination String result TextMessage message TextMessage consumer receive message
persistOutcome tx txid persistenceAdapter stop e LOG error e exceptions add e persistenceAdapter setTransactionStore transactionStore brokerService start ExecutorService executorService Executors newCachedThreadPool executorService sendMessages
count WireFormat wireFormat OpenWireFormat java sql Connection conn JDBCPersistenceAdapter broker getPersistenceAdapter getDataSource getConnection PreparedStatement statement conn prepareStatement ResultSet result statement executeQuery LOG info result id result getLong String xid result getString org apache activemq command Message message org apache activemq command Message wireFormat unmarshal ByteSequence result getBytes
session messagesReceived Destination destination session createQueue MessageConsumer consumer session createConsumer destination Message message
messagesExpected session messagesReceived messagesExpected Destination destination session createQueue MessageConsumer consumer session createConsumer destination Message message LOG debug messagesReceived messagesExpected message consumer receive
javax jms Connection connection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode PERSISTENT
gotError set broker createBroker broker start broker waitUntilStarted
Destination dest ActiveMQQueue ActiveMQConnectionFactory amq ActiveMQConnectionFactory broker getTransportConnectorByScheme getPublishableConnectString amq setWatchTopicAdvisories broker
connection amq createConnection connection e e printStackTrace RedeliveryPolicy queuePolicy RedeliveryPolicy queuePolicy setMaximumRedeliveries ActiveMQConnection connection setRedeliveryPolicy queuePolicy connection start session connection createSession Session SESSION_TRANSACTED consumer session createConsumer dest consumed Message message consumer receive message consumed decrementAndGet
amq dest Connection connection amq createConnection connection e e printStackTrace connection start Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer dest counter TextMessage message session createTextMessage producer send message counter counter
allowing jdbcPersistenceAdapter getLocker will returnValue locker allowing locker keepAlive when jdbcConn is will returnValue allowing locker keepAlive when jdbcConn is will returnValue allowing jdbcPersistenceAdapter checkpoint with then jdbcConn is allowing brokerService stop then broker is LeaseLockerIOExceptionHandler underTest LeaseLockerIOExceptionHandler underTest setBrokerService brokerService
broker createBroker withJMX broker start broker waitUntilStarted dataSource stopDB TimeUnit SECONDS sleep checkTransportConnectorStopped dataSource restartDB LOG debug checkTransportConnectorStarted
ProducerThread medHighPri ProducerThread topic MSG_NUM MED_HIGH_PRI ProducerThread highPri ProducerThread topic MSG_NUM HIGH_PRI lowPri start highPri start medPri start medHighPri start lowPri join highPri join medPri join medHighPri join closeFrequency MSG_NUM priorities HIGH_PRI MED_HIGH_PRI MED_PRI LOW_PRI sub sess createDurableSubscriber topic subName MSG_NUM Message msg sub receive
medPri start medHighPri start lowPri join highPri join medPri join medHighPri join closeFrequency MSG_NUM priorities HIGH_PRI MED_HIGH_PRI MED_PRI LOW_PRI sub sess createDurableSubscriber topic subName i i MSG_NUM i Message msg sub receive LOG debug i msg msg getJMSMessageID msg getJMSPriority assertNotNull i msg assertEquals i priorities i MSG_NUM msg getJMSPriority i i closeFrequency
maxPriority AtomicInteger messageCounts AtomicInteger maxPriority messageIds maxPriority Vector ProducerThread producers Vector ProducerThread priority priority maxPriority priority producers add ProducerThread topic MSG_NUM priority messageCounts priority AtomicInteger messageIds priority ProducerThread producer producers producer start closeFrequency MSG_NUM HashMap String String dups HashMap String String sub consumerSession createDurableSubscriber topic subName MSG_NUM maxPriority Message msg sub receive
messageIds priority producer producer start closeFrequency MSG_NUM HashMap String String dups HashMap String String sub consumerSession createDurableSubscriber topic subName i i MSG_NUM i Message msg sub receive LOG debug i msg msg getJMSMessageID msg getJMSPriority assertNotNull i Arrays toString messageCounts msg assertNull msg getJMSMessageID dups put msg getJMSMessageID subName messageCounts msg getJMSPriority incrementAndGet assertEquals msg messageIds msg getJMSPriority ActiveMQMessage msg getMessageId getProducerSequenceId messageIds msg getJMSPriority i i closeFrequency
TopicSubscriber sub consumerSession createDurableSubscriber topic subName sub close TO_SEND Vector Message duplicates Vector Message dups TO_SEND start max sum MessageProducer messageProducer sess createProducer topic TextMessage message sess createTextMessage i i TO_SEND i priority i message setText i priority message setIntProperty i message setJMSPriority priority i i
max sum MessageProducer messageProducer sess createProducer topic TextMessage message sess createTextMessage i i i priority i message setText i priority message setIntProperty i message setJMSPriority priority i i LOG info max message getText start System currentTimeMillis messageProducer send message DeliveryMode PERSISTENT message getJMSPriority duration System currentTimeMillis start max Math max max duration duration max
start System currentTimeMillis messageProducer send message DeliveryMode PERSISTENT message getJMSPriority duration System currentTimeMillis start max Math max max duration duration max LOG info max i message getText sum duration LOG info TO_SEND max noConsumerAve sum TO_SEND sub consumerSession createDurableSubscriber topic subName AtomicInteger count AtomicInteger sub message count incrementAndGet
LOG info count get TextMessage message getText message getIntProperty message getJMSMessageID seqNo message getIntProperty dups seqNo dups seqNo LOG error TextMessage message getText message getJMSMessageID duplicates add message e e printStackTrace LOG info sum max i i i priority i message setText i priority
LOG error TextMessage message getText message getJMSMessageID duplicates add message e e printStackTrace LOG info sum max i i i priority i message setText i priority message setIntProperty i message setJMSPriority priority i i LOG info max message getText
e e printStackTrace LOG info sum max i i i priority i message setText i priority message setIntProperty i message setJMSPriority priority i i LOG info max message getText start System currentTimeMillis messageProducer send message DeliveryMode PERSISTENT message getJMSPriority duration System currentTimeMillis start
TopicSubscriber sub consumerSession createDurableSubscriber topic subName sub close MessageProducer messageProducer sess createProducer topic Message message sess createTextMessage messageProducer send message DeliveryMode PERSISTENT Message DEFAULT_PRIORITY message sess createTextMessage messageProducer send message message sess createTextMessage messageProducer send message message assertEquals messageTableCount TimeUnit SECONDS sleep sub consumerSession createDurableSubscriber topic subName message sub receive assertNotNull message
message sess createTextMessage messageProducer send message message assertEquals messageTableCount TimeUnit SECONDS sleep sub consumerSession createDurableSubscriber topic subName message sub receive assertNotNull message LOG info message waitForAck jdbc cleanup assertEquals messageTableCount message sub receive assertNotNull message
ActiveMQQueue queue ActiveMQQueue ActiveMQConnectionFactory factory ActiveMQConnectionFactory factory setWatchTopicAdvisories Connection conn factory createConnection conn start Session sess conn createSession Session AUTO_ACKNOWLEDGE MessageProducer producer sess createProducer queue producer setTimeToLive String payLoad String numMessages numMessages producer send sess createTextMessage payLoad expired brokerService getDestination queue getDestinationStatistics getExpired getCount
WireFormat wireFormat OpenWireFormat java sql Connection conn JDBCPersistenceAdapter broker getPersistenceAdapter getDataSource getConnection PreparedStatement statement conn prepareStatement ResultSet result statement executeQuery result id result getLong Message message Message wireFormat unmarshal ByteSequence result getBytes
Message WireFormat wireFormat OpenWireFormat java sql Connection conn JDBCPersistenceAdapter service getPersistenceAdapter getDataSource getConnection PreparedStatement statement conn prepareStatement ResultSet result statement executeQuery ArrayList Message results ArrayList Message result id result getLong Message message Message wireFormat unmarshal ByteSequence result getBytes
session messagesReceived Destination destination session createQueue MessageConsumer consumer session createConsumer destination XAResource resource session getXAResource resource recover XAResource TMSTARTRSCAN resource recover XAResource TMNOFLAGS Xid tid createXid Message message
messagesExpected session messagesReceived messagesExpected Destination destination session createQueue MessageConsumer consumer session createConsumer destination XAResource resource session getXAResource resource recover XAResource TMSTARTRSCAN resource recover XAResource TMNOFLAGS Xid tid createXid Message message LOG debug messagesReceived messagesExpected resource start tid XAResource TMNOFLAGS message consumer receive
Message message LOG debug messagesReceived messagesExpected resource start tid XAResource TMNOFLAGS message consumer receive LOG info message resource end tid XAResource TMSUCCESS message resource commit tid resource prepare tid resource commit tid messagesReceived
LOG debug messagesReceived messagesExpected resource start tid XAResource TMNOFLAGS message consumer receive LOG info message resource end tid XAResource TMSUCCESS message resource commit tid resource prepare tid resource commit tid messagesReceived e LOG debug e
resource end tid XAResource TMSUCCESS resource commit tid resource prepare tid resource commit tid messagesReceived e LOG debug e LOG debug tid resource rollback tid
resource commit tid resource prepare tid resource commit tid messagesReceived e LOG debug e LOG debug tid resource rollback tid ex LOG debug ex tid resource forget tid
lockerB start lockedSet add lockerB printLockTable connection e e printStackTrace TimeUnit SECONDS sleep assertTrue lockedSet isEmpty assertFalse lockerA keepAlive assertFalse lockerB keepAlive LOG info fakeId statement connection prepareStatement jdbc getStatements getLeaseUpdateStatement
factory ActiveMQXAConnectionFactory connectionUri factory setWatchTopicAdvisories sendMessages ActiveMQXAConnection activeMQXAConnection ActiveMQXAConnection factory createXAConnection activeMQXAConnection start XASession xaSession activeMQXAConnection createXASession Destination destination xaSession createQueue MessageConsumer consumer xaSession createConsumer destination XAResource resource xaSession getXAResource resource recover XAResource TMSTARTRSCAN resource recover XAResource TMNOFLAGS Xid tid createXid resource start tid XAResource TMNOFLAGS Message message consumer receive
sendMessages messagesExpected ActiveMQXAConnection activeMQXAConnection ActiveMQXAConnection factory createXAConnection activeMQXAConnection start XASession xaSession activeMQXAConnection createXASession Destination destination xaSession createQueue MessageConsumer consumer xaSession createConsumer destination XAResource resource xaSession getXAResource resource recover XAResource TMSTARTRSCAN resource recover XAResource TMNOFLAGS Xid tid createXid resource start tid XAResource TMNOFLAGS messagesReceived messagesExpected Message message
activeMQXAConnection start XASession xaSession activeMQXAConnection createXASession Destination destination xaSession createQueue MessageConsumer consumer xaSession createConsumer destination XAResource resource xaSession getXAResource resource recover XAResource TMSTARTRSCAN resource recover XAResource TMNOFLAGS Xid tid createXid resource start tid XAResource TMNOFLAGS messagesReceived messagesExpected Message message LOG debug messagesReceived messagesExpected message consumer receive
MessageConsumer consumer xaSession createConsumer destination XAResource resource xaSession getXAResource resource recover XAResource TMSTARTRSCAN resource recover XAResource TMNOFLAGS Xid tid createXid resource start tid XAResource TMNOFLAGS messagesReceived messagesExpected Message message LOG debug messagesReceived messagesExpected message consumer receive LOG info message messagesReceived
XASession xaSession activeMQXAConnection createXASession Destination destination xaSession createQueue MessageConsumer consumer xaSession createConsumer destination XAResource resource xaSession getXAResource resource recover XAResource TMSTARTRSCAN resource recover XAResource TMNOFLAGS assertEquals proxy getInFlightCount assertEquals proxy getQueueSize assertEquals proxy cursorSize Xid tid createXid resource start tid XAResource TMNOFLAGS Message message message consumer receive
MessageConsumer consumer xaSession createConsumer destination XAResource resource xaSession getXAResource resource recover XAResource TMSTARTRSCAN resource recover XAResource TMNOFLAGS assertEquals proxy getInFlightCount assertEquals proxy getQueueSize assertEquals proxy cursorSize Xid tid createXid resource start tid XAResource TMNOFLAGS Message message message consumer receive LOG info message
XASession xaSession activeMQXAConnection createXASession Destination destination xaSession createQueue MessageConsumer consumer xaSession createConsumer destination XAResource resource xaSession getXAResource resource recover XAResource TMSTARTRSCAN resource recover XAResource TMNOFLAGS dumpMessages Xid tid createXid resource start tid XAResource TMNOFLAGS messagesReceived Message message LOG debug messagesReceived messagesExpected message consumer receive
XAResource resource xaSession getXAResource resource recover XAResource TMSTARTRSCAN resource recover XAResource TMNOFLAGS dumpMessages Xid tid createXid resource start tid XAResource TMNOFLAGS messagesReceived Message message LOG debug messagesReceived messagesExpected message consumer receive LOG info message messagesReceived
consumer close consumer xaSession createDurableSubscriber destination sendMessagesTo destination XAResource resource xaSession getXAResource resource recover XAResource TMSTARTRSCAN resource recover XAResource TMNOFLAGS dumpMessages Xid tid createXid resource start tid XAResource TMNOFLAGS messagesReceived Message message LOG debug messagesReceived messagesExpected message consumer receive
XAResource resource xaSession getXAResource resource recover XAResource TMSTARTRSCAN resource recover XAResource TMNOFLAGS dumpMessages Xid tid createXid resource start tid XAResource TMNOFLAGS messagesReceived Message message LOG debug messagesReceived messagesExpected message consumer receive LOG info message messagesReceived
consumer close consumer xaSession createDurableSubscriber destination sendMessagesTo destination XAResource resource xaSession getXAResource resource recover XAResource TMSTARTRSCAN resource recover XAResource TMNOFLAGS dumpMessages Xid tid createXid resource start tid XAResource TMNOFLAGS messagesReceived Message message LOG debug messagesReceived messagesExpected message consumer receive
XAResource resource xaSession getXAResource resource recover XAResource TMSTARTRSCAN resource recover XAResource TMNOFLAGS dumpMessages Xid tid createXid resource start tid XAResource TMNOFLAGS messagesReceived Message message LOG debug messagesReceived messagesExpected message consumer receive LOG info message messagesReceived
expected clientId subName destination drained ActiveMQConnectionFactory factory ActiveMQConnectionFactory connectionUri expected factory setWatchTopicAdvisories javax jms Connection connection factory createConnection connection setClientID clientId connection start Session session connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createDurableSubscriber destination subName Message message message consumer drained
factory ActiveMQXAConnectionFactory connectionUri factory setWatchTopicAdvisories sendMessages ActiveMQXAConnection activeMQXAConnection ActiveMQXAConnection factory createXAConnection activeMQXAConnection start XASession xaSession activeMQXAConnection createXASession Destination destination xaSession createQueue MessageConsumer consumer xaSession createConsumer destination XAResource resource xaSession getXAResource Xid tid createXid resource start tid XAResource TMNOFLAGS Message message message consumer receive
sendMessages i i i ActiveMQXAConnection activeMQXAConnection ActiveMQXAConnection factory createXAConnection activeMQXAConnection start XASession xaSession activeMQXAConnection createXASession Destination destination xaSession createQueue MessageConsumer consumer xaSession createConsumer destination XAResource resource xaSession getXAResource Xid tid createXid resource start tid XAResource TMNOFLAGS Message message message consumer receive LOG info i message
ActiveMQXAConnectionFactory activeMQXAConnectionFactory ActiveMQXAConnectionFactory connectionUri activeMQXAConnectionFactory setWatchTopicAdvisories activeMQXAConnection ActiveMQXAConnection activeMQXAConnectionFactory createXAConnection activeMQXAConnection start xaSession activeMQXAConnection createXASession xaResource xaSession getXAResource xids xaResource recover XAResource TMSTARTRSCAN xaResource recover XAResource TMNOFLAGS i i xids i xaResource rollback xids i MessageConsumer consumer2 session createConsumer ActiveMQQueue LOG info Message message regularReceiveWith receiveFactory assertNotNull message LOG info message
branch2 Arrays copyOf branch branch length branch2 getFormatId tid getFormatId getGlobalTransactionId tid getGlobalTransactionId branch2 resource start tid XAResource TMNOFLAGS messagesReceived Message message
getFormatId tid getFormatId getGlobalTransactionId tid getGlobalTransactionId branch2 resource start tid XAResource TMNOFLAGS messagesReceived Message message messagesExpected LOG debug messagesReceived messagesExpected message consumer receive
getGlobalTransactionId tid getGlobalTransactionId branch2 resource start tid XAResource TMNOFLAGS messagesReceived Message message messagesExpected LOG debug messagesReceived messagesExpected message consumer receive LOG info message messagesReceived
branch2 Arrays copyOf branch branch length branch2 getFormatId tid getFormatId getGlobalTransactionId tid getGlobalTransactionId branch2 resource start tid XAResource TMNOFLAGS messagesReceived Message message
getFormatId tid getFormatId getGlobalTransactionId tid getGlobalTransactionId branch2 resource start tid XAResource TMNOFLAGS messagesReceived Message message messagesExpected LOG debug messagesReceived messagesExpected message consumer receive
getGlobalTransactionId tid getGlobalTransactionId branch2 resource start tid XAResource TMNOFLAGS messagesReceived Message message messagesExpected LOG debug messagesReceived messagesExpected message consumer receive LOG info message messagesReceived
branch2 Arrays copyOf branch branch length branch2 getFormatId tid getFormatId getGlobalTransactionId tid getGlobalTransactionId branch2 resource start tid XAResource TMNOFLAGS messagesReceived Message message
getFormatId tid getFormatId getGlobalTransactionId tid getGlobalTransactionId branch2 resource start tid XAResource TMNOFLAGS messagesReceived Message message messagesExpected LOG debug messagesReceived messagesExpected message consumer receive
getGlobalTransactionId tid getGlobalTransactionId branch2 resource start tid XAResource TMNOFLAGS messagesReceived Message message messagesExpected LOG debug messagesReceived messagesExpected message consumer receive LOG info message messagesReceived
factory destination javax jms Connection connection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer setDeliveryMode DeliveryMode PERSISTENT
WireFormat wireFormat OpenWireFormat java sql Connection conn JDBCPersistenceAdapter broker getPersistenceAdapter getDataSource getConnection PreparedStatement statement conn prepareStatement ResultSet result statement executeQuery LOG info result id result getLong org apache activemq command Message message org apache activemq command Message wireFormat unmarshal ByteSequence result getBytes String xid result getString LOG info id message getMessageId getBrokerSequenceId xid message statement close statement conn prepareStatement result statement executeQuery LOG info result
LOG info dest1 dest2
LOG info dest1 dest2
LOG info dest1 dest2
LOG info dest1 dest2
assertTrue master isStarted File lockFile File kahaDataDir assertTrue
executorService publishMessages sharedCount e exceptions add e executorService shutdown executorService awaitTermination TimeUnit MINUTES assertTrue executorService isTerminated assertTrue exceptions exceptions isEmpty totalSent toSend payloadString length duration System currentTimeMillis start stopBroker
publishMessages sharedCount e exceptions add e executorService shutdown executorService awaitTermination TimeUnit MINUTES assertTrue executorService isTerminated assertTrue exceptions exceptions isEmpty totalSent toSend payloadString length duration System currentTimeMillis start stopBroker LOG info duration LOG info toSend duration
e exceptions add e executorService shutdown executorService awaitTermination TimeUnit MINUTES assertTrue executorService isTerminated assertTrue exceptions exceptions isEmpty totalSent toSend payloadString length duration System currentTimeMillis start stopBroker LOG info duration LOG info toSend duration LOG info totalSent LOG info kahaDBPersistenceAdapter getStore getJournal length LOG info kahaDBPersistenceAdapter getStore getPageFile getDiskSize
executorService publishMessages sharedCount e exceptions add e executorService shutdown executorService awaitTermination TimeUnit MINUTES assertTrue executorService isTerminated assertTrue exceptions exceptions isEmpty totalSent toSend payloadString length broker getAdminView gc duration System currentTimeMillis start stopBroker
publishMessages sharedCount e exceptions add e executorService shutdown executorService awaitTermination TimeUnit MINUTES assertTrue executorService isTerminated assertTrue exceptions exceptions isEmpty totalSent toSend payloadString length broker getAdminView gc duration System currentTimeMillis start stopBroker LOG info duration LOG info toSend duration
e exceptions add e executorService shutdown executorService awaitTermination TimeUnit MINUTES assertTrue executorService isTerminated assertTrue exceptions exceptions isEmpty totalSent toSend payloadString length broker getAdminView gc duration System currentTimeMillis start stopBroker LOG info duration LOG info toSend duration LOG info totalSent LOG info kahaDBPersistenceAdapter getStore getJournal length
LOG info kahaIndexDir assertTrue kahaDataDir exists assertTrue kahaIndexDir exists kahaIndexDir
produceMessages LOG info kahaIndexDir assertTrue kahaDataDir exists assertTrue kahaIndexDir exists String destName nameFromDestinationFilter queue String kahaIndexDir destName String
produceMessages queueA done set BaseDestination baseDestinationA BaseDestination broker getRegionBroker getDestinationMap get queueA baseDestinationA baseDestinationA getDestinationStatistics getMessages getCount BaseDestination baseDestinationA BaseDestination broker getRegionBroker getDestinationMap get queueA enqueues enqueues baseDestinationA getDestinationStatistics getEnqueues getCount
File dataDir File File useUpSpace File dataDir useUpSpace LOG info RandomAccessFile filler RandomAccessFile useUpSpace filler setLength filler close File toDelete File dataDir filler RandomAccessFile toDelete filler setLength filler close broker setDataDirectoryFile dataDir broker start AtomicLong consumed AtomicLong consume consumed
filler close File toDelete File dataDir filler RandomAccessFile toDelete filler setLength filler close broker setDataDirectoryFile dataDir broker start AtomicLong consumed AtomicLong consume consumed LOG info consumed broker getPersistenceAdapter checkpoint AtomicLong sent AtomicLong produce sent
broker setDataDirectoryFile dataDir broker start AtomicLong consumed AtomicLong consume consumed LOG info consumed broker getPersistenceAdapter checkpoint AtomicLong sent AtomicLong produce sent LOG info sent LOG info sent System out println read System in read System err println read
consume consumed LOG info consumed broker getPersistenceAdapter checkpoint AtomicLong sent AtomicLong produce sent LOG info sent LOG info sent System out println read System in read System err println read LOG info sent produce sent
broker getPersistenceAdapter checkpoint AtomicLong sent AtomicLong produce sent LOG info sent LOG info sent System out println read System in read System err println read LOG info sent produce sent LOG info sent
deleteAllMessages service BrokerService service setBrokerName service setDeleteAllMessagesOnStartup deleteAllMessages service setPersistent KahaDBPersistenceAdapter pa KahaDBPersistenceAdapter File dataFile File pa setDirectory dataFile pa setJournalMaxFileLength pa setPreallocationScope Journal PreallocationScope ENTIRE_JOURNAL name pa setCheckpointInterval TimeUnit SECONDS toMillis pa setCleanupInterval TimeUnit SECONDS toMillis File dataFile
counter msg end start System currentTimeMillis size end start msg BytesMessage consumer receive msg counter consumed end System currentTimeMillis size msg getBodyLength LOG info counter end start size end start
LOG info messageSize start System currentTimeMillis AtomicBoolean stop AtomicBoolean stop set produced stop end start System currentTimeMillis produceCount end start stop BytesMessage bm session createBytesMessage bm writeBytes messageSize producer send bm
brokerService BrokerService brokerService setUseJmx SystemUsage usage brokerService getSystemUsage usage getMemoryUsage setLimit String body String Destination destination Queue brokerService ActiveMQQueue DestinationStatistics brokerService start underTest FilePendingMessageCursor brokerService getBroker underTest setSystemUsage usage LOG info PageFile pageFile PListImpl underTest getDiskList getPageFile
brokerService BrokerService brokerService setUseJmx SystemUsage usage brokerService getSystemUsage usage getMemoryUsage setLimit String body String Destination destination Queue brokerService ActiveMQQueue DestinationStatistics brokerService start underTest FilePendingMessageCursor brokerService getBroker underTest setSystemUsage usage LOG info PageFile pageFile PListImpl underTest getDiskList getPageFile LOG info pageFile getPageCount
brokerService BrokerService brokerService setUseJmx SystemUsage usage brokerService getSystemUsage usage getMemoryUsage setLimit String body String Destination destination Queue brokerService ActiveMQQueue DestinationStatistics brokerService start underTest FilePendingMessageCursor brokerService getBroker underTest setSystemUsage usage LOG info PageFile pageFile PListImpl underTest getDiskList getPageFile LOG info pageFile getPageCount LOG info pageFile getFreePageCount
mqMessage setStringProperty body mqMessage setMessageId MessageId i mqMessage setMemoryUsage usage getMemoryUsage mqMessage setRegionDestination destination underTest addMessageLast IndirectMessageReference mqMessage assertFalse usage getTempUsage underTest isFull underTest reset receivedCount underTest MessageReference ref underTest next underTest remove ref decrementReferenceCount assertEquals receivedCount ref getMessageId getProducerSequenceId assertEquals receivedCount numMessages LOG info pageFile getPageCount
mqMessage setMessageId MessageId i mqMessage setMemoryUsage usage getMemoryUsage mqMessage setRegionDestination destination underTest addMessageLast IndirectMessageReference mqMessage assertFalse usage getTempUsage underTest isFull underTest reset receivedCount underTest MessageReference ref underTest next underTest remove ref decrementReferenceCount assertEquals receivedCount ref getMessageId getProducerSequenceId assertEquals receivedCount numMessages LOG info pageFile getPageCount LOG info pageFile getFreePageCount
assertFalse usage getTempUsage underTest isFull underTest reset receivedCount underTest MessageReference ref underTest next underTest remove ref decrementReferenceCount assertEquals receivedCount ref getMessageId getProducerSequenceId assertEquals receivedCount numMessages LOG info pageFile getPageCount LOG info pageFile getFreePageCount LOG info pageFile getPageContentSize assertEquals initialPageCount pageFile getPageCount pageFile getFreePageCount LOG info underTest destroy
assertFalse usage getTempUsage underTest isFull underTest reset receivedCount underTest MessageReference ref underTest next underTest remove ref decrementReferenceCount assertEquals receivedCount ref getMessageId getProducerSequenceId assertEquals receivedCount numMessages LOG info pageFile getPageCount LOG info pageFile getFreePageCount LOG info pageFile getPageContentSize assertEquals initialPageCount pageFile getPageCount pageFile getFreePageCount LOG info underTest destroy
underTest reset receivedCount underTest MessageReference ref underTest next underTest remove ref decrementReferenceCount assertEquals receivedCount ref getMessageId getProducerSequenceId assertEquals receivedCount numMessages LOG info pageFile getPageCount LOG info pageFile getFreePageCount LOG info pageFile getPageContentSize assertEquals initialPageCount pageFile getPageCount pageFile getFreePageCount LOG info underTest destroy LOG info pageFile getPageCount
lists i store getPList String valueOf i Thread currentThread setName threadName executor Executors newFixedThreadPool String threadName Thread currentThread getName i i i PList candidate lists i numLists Thread currentThread setName candidate getName candidate Object locator candidate addLast String valueOf i payload getFirst candidate assertTrue candidate remove locator
i i i Message message createMessage i configureMessage message
message TextMessage textMessage TextMessage message String text textMessage getText
LOG info connection session connection createSession Session AUTO_ACKNOWLEDGE consumeSession createConsumerSession LOG info session LOG info consumeSession producer session createProducer producer setDeliveryMode deliveryMode LOG info producer deliveryMode DeliveryMode PERSISTENT consumerDestination session createTopic getConsumerSubject producerDestination session createTopic getProducerSubject consumerDestination session createQueue getConsumerSubject producerDestination session createQueue getProducerSubject LOG info consumerDestination consumerDestination getClass
assertMessagesReceivedAreValid receivedMessages assertMessagesReceivedAreValid receivedMessages message receivedMessages String userID message getStringProperty
receivedMessages assertMessagesReceivedAreValid receivedMessages message receivedMessages String userID String message getObjectProperty
i i i Message message createMessage i configureMessage message message setStringProperty
i i i Message message createMessage i configureMessage message message setStringProperty
setUp setUp connectionFactory createConnectionFactory LOG info sendConnection createSendConnection LOG info sendConnection start LOG info receiveConnection createReceiveConnection LOG info receiveConnection start
setUp setUp connectionFactory createConnectionFactory LOG info sendConnection createSendConnection LOG info sendConnection start LOG info receiveConnection createReceiveConnection LOG info receiveConnection start LOG info sendConnection
setUp setUp connectionFactory createConnectionFactory LOG info sendConnection createSendConnection LOG info sendConnection start LOG info receiveConnection createReceiveConnection LOG info receiveConnection start LOG info sendConnection LOG info receiveConnection session sendConnection createSession Session AUTO_ACKNOWLEDGE receiveSession receiveConnection createSession Session AUTO_ACKNOWLEDGE
setUp connectionFactory createConnectionFactory LOG info sendConnection createSendConnection LOG info sendConnection start LOG info receiveConnection createReceiveConnection LOG info receiveConnection start LOG info sendConnection LOG info receiveConnection session sendConnection createSession Session AUTO_ACKNOWLEDGE receiveSession receiveConnection createSession Session AUTO_ACKNOWLEDGE LOG info session
sendConnection createSendConnection LOG info sendConnection start LOG info receiveConnection createReceiveConnection LOG info receiveConnection start LOG info sendConnection LOG info receiveConnection session sendConnection createSession Session AUTO_ACKNOWLEDGE receiveSession receiveConnection createSession Session AUTO_ACKNOWLEDGE LOG info session LOG info receiveSession producer session createProducer producer setDeliveryMode deliveryMode
LOG info receiveConnection session sendConnection createSession Session AUTO_ACKNOWLEDGE receiveSession receiveConnection createSession Session AUTO_ACKNOWLEDGE LOG info session LOG info receiveSession producer session createProducer producer setDeliveryMode deliveryMode LOG info producer deliveryMode DeliveryMode PERSISTENT consumerDestination session createTopic getConsumerSubject producerDestination session createTopic getProducerSubject consumerDestination session createQueue getConsumerSubject producerDestination session createQueue getProducerSubject LOG info consumerDestination consumerDestination getClass
Session session connection createSession Session AUTO_ACKNOWLEDGE Queue tempQueue session createTemporaryQueue String name tempQueue getQueueName
Session session connection createSession Session AUTO_ACKNOWLEDGE Topic tempTopic session createTemporaryTopic String name tempTopic getTopicName
index message Object value message getObjectProperty assertEquals data index value Map map Map message getObjectProperty assertNotNull map assertEquals map get assertEquals Integer map get assertEquals Long map get value map get assertTrue value Map map Map value assertEquals map get value map get assertTrue value List List list List value
assertEquals data index value Map map Map message getObjectProperty assertNotNull map assertEquals map get assertEquals Integer map get assertEquals Long map get value map get assertTrue value Map map Map value assertEquals map get value map get assertTrue value List List list List value LOG debug list assertEquals list size
assertNotNull map assertEquals map get assertEquals Integer map get assertEquals Long map get value map get assertTrue value Map map Map value assertEquals map get value map get assertTrue value List List list List value LOG debug list assertEquals list size LOG debug map list List message getObjectProperty
MapMessage mapMessage MapMessage message Object value mapMessage getObject assertEquals data index value Map map Map mapMessage getObject assertNotNull map assertEquals map get assertEquals Integer valueOf map get assertEquals Long valueOf map get value map get assertTrue value Map map Map value assertEquals map get value map get assertTrue value List List list List value
assertEquals data index value Map map Map mapMessage getObject assertNotNull map assertEquals map get assertEquals Integer valueOf map get assertEquals Long valueOf map get value map get assertTrue value Map map Map value assertEquals map get value map get assertTrue value List List list List value LOG debug list assertEquals list size
assertNotNull map assertEquals map get assertEquals Integer valueOf map get assertEquals Long valueOf map get value map get assertTrue value Map map Map value assertEquals map get value map get assertTrue value List List list List value LOG debug list assertEquals list size LOG debug map list List mapMessage getObject
String uri getBrokerXml
String uri getBrokerXml
Session session connection createSession Session SESSION_TRANSACTED MessageConsumer consumer session createConsumer destination Message message consumer receive String id message getJMSMessageID assertNotNull message
Session session connection createSession Session SESSION_TRANSACTED MessageConsumer consumer session createConsumer destination Message message consumer receive String id message getJMSMessageID assertNotNull message
Session session connection createSession Session SESSION_TRANSACTED MessageConsumer consumer session createConsumer destination Message message consumer receive String id message getJMSMessageID assertNotNull message
ActiveMQQueue dest ActiveMQQueue messageTextPrefix initMessagePrefix URI tcpBrokerUri URISupport removeQuery broker getTransportConnectors get getConnectUri
Destination dest ActiveMQQueue messageTextPrefix initMessagePrefix sendMessages dest URI tcpBrokerUri URISupport removeQuery broker getTransportConnectors get getConnectUri
ActiveMQQueue dest ActiveMQQueue messageTextPrefix initMessagePrefix sendMessages dest URI stompBrokerUri URISupport removeQuery broker getTransportConnectors get getConnectUri
frame stompConnection receiveFrame assertTrue frame startsWith frame dest getQueueName Stomp NULL stompConnection sendFrame frame proxy pause TimeUnit SECONDS sleep TimeUnit SECONDS sleep proxy goOn frame stompConnection receiveFrame assertTrue frame startsWith i i i stompConnection send dest getPhysicalName i fail
allowing managementContext registerMBean with any Object with equal ObjectName allowing managementContext registerMBean with any Object with equal ObjectName allowing managementContext registerMBean with any Object with equal ObjectName allowing managementContext registerMBean with any Object with equal ObjectName allowing managementContext registerMBean with any Object with equal ObjectName allowing managementContext registerMBean with any Object with equal ObjectName allowing managementContext registerMBean with any Object with equal ObjectName allowing managementContext registerMBean with any Object with equal ObjectName allowing managementContext getObjectInstance with equal ObjectName atLeast maxReconnects of managementContext registerMBean with any Object with NetworkBridgeObjectNameMatcher ObjectName ObjectName proxy getUrl getPort Object invocation LOG info invocation getParameter mbeanRegistered release ObjectInstance ObjectName invocation getParameter
Thread t threads existingNames add t getName idleThreadCount threads length LOG info idleThreadCount noConnectionToCreate ActiveMQConnectionFactory factory ActiveMQConnectionFactory group LOG info Connection connection factory createConnection connection setClientID connection close Thread sleep threads getThreads Thread t threads existingNames t getName
Connection connection cf createConnection connection start Session session connection createSession MessageConsumer consumer session createConsumer session createQueue QUEUE_NAME count Message message consumer receive message
i i i Message message consumer receive assertNotNull message i restartDone bs stop bs BrokerService bs setPersistent bs setUseJmx bs addConnector tcpUri bs start restartDone assertEquals i message getIntProperty PROPERTY_MSG_NUMBER session commit
total c String key c getTransportChannel getRemoteAddress key total clientConnectionCounts key count clientConnectionCounts get key count clientConnectionCounts put key count clientConnectionCounts put key Set String keys clientConnectionCounts keySet String key keys count clientConnectionCounts get key percentage count total
addNetworkBridge getBroker BROKER_A_NAME BROKER_B_CLIENT_TC_ADDRESS getBroker BROKER_A_NAME start addBroker BROKER_B_NAME createBroker BROKER_B_NAME TransportConnector connectorB getBroker BROKER_B_NAME addConnector BROKER_B_CLIENT_TC_ADDRESS connectorB setName connectorB setRebalanceClusterClients connectorB setUpdateClusterClients connectorB setUpdateClusterClientsOnRemove addNetworkBridge getBroker BROKER_B_NAME BROKER_A_CLIENT_TC_ADDRESS getBroker BROKER_B_NAME start getBroker BROKER_B_NAME waitUntilStarted Thread sleep setClientUrl BROKER_A_CLIENT_TC_ADDRESS createClients Thread sleep
maxConsumers broker createBroker broker consumerCount context consumerCount maxConsumers context setDontSendReponse
e printStackTrace addConsumer context info broker start ActiveMQConnectionFactory cf ActiveMQConnectionFactory url cf setWatchTopicAdvisories ActiveMQConnection connection ActiveMQConnection cf createConnection connection start Session consumerSession connection createSession Session CLIENT_ACKNOWLEDGE Queue destination consumerSession createQueue QUEUE_NAME prefetch Vector TestConsumer testConsumers Vector TestConsumer TestConsumer testConsumer TestConsumer consumerSession destination connection testConsumer
ActiveMQConnectionFactory cf ActiveMQConnectionFactory url cf setWatchTopicAdvisories ActiveMQConnection connection ActiveMQConnection cf createConnection connection start Session consumerSession connection createSession Session CLIENT_ACKNOWLEDGE Queue destination consumerSession createQueue QUEUE_NAME prefetch Vector TestConsumer testConsumers Vector TestConsumer TestConsumer testConsumer TestConsumer consumerSession destination connection testConsumer message LOG info message getJMSMessageID e e printStackTrace
CountDownLatch shutdownConsumerAdded CountDownLatch LOG info TestConsumer testConsumer TestConsumer consumerSession destination connection testConsumer message LOG info message getJMSMessageID e e printStackTrace testConsumers add testConsumer
message LOG info message getJMSMessageID e e printStackTrace testConsumers add testConsumer shutdownConsumerAdded countDown LOG info e e printStackTrace broker waitUntilStopped broker createBroker url broker start
maxConsumers broker createBroker broker consumerCount context consumerCount maxConsumers context setDontSendReponse
TestConsumer testConsumer testConsumers unconsumed testConsumer unconsumedSize LOG info testConsumer getConsumerId unconsumed totalUnconsumed unconsumed totalUnconsumed maxConsumers prefetch CountDownLatch shutdownConsumerAdded CountDownLatch LOG info testConsumers add TestConsumer consumerSession destination connection shutdownConsumerAdded countDown LOG info
LOG info testConsumers add TestConsumer consumerSession destination connection shutdownConsumerAdded countDown LOG info e e printStackTrace broker waitUntilStopped totalUnconsumed TestConsumer testConsumer testConsumers unconsumed testConsumer unconsumedSize LOG info testConsumer getConsumerId unconsumed
AtomicInteger dispatchedCount AtomicInteger errorAt FailType ON_COMMIT equals failType messageCount broker createBroker broker FailType ON_COMMIT equals failType dispatchedCount errorAt broker
AtomicInteger dispatchedCount AtomicInteger errorAt FailType ON_COMMIT equals failType messageCount broker createBroker broker commitTransaction context xid onePhase FailType ON_COMMIT equals failType dispatchedCount errorAt transportConnection broker LOG error transportConnection transportConnection serviceException IOException commitTransaction context xid onePhase FailType equals failType dispatchedCount errorAt transportConnection broker
transportConnection LOG error transportConnection transportConnection serviceException IOException commitTransaction context xid onePhase acknowledge consumerExchange ack ack transportConnection LOG error transportConnection transportConnection serviceException IOException acknowledge consumerExchange ack postProcessDispatch messageDispatch postProcessDispatch messageDispatch transportConnection
broker createBroker CountDownLatch pullDone CountDownLatch broker context context setDontSendReponse pullDone countDown
Thread sleep
Thread sleep LOG info primaryName stopBroker primaryName LOG info secondaryName stopBroker secondaryName Thread sleep assertAllConnectedTo urls get secondaryName assertBrokerInfo secondaryName assertAllConnectedTo urls get primaryName assertBrokerInfo primaryName
LOG info secondaryName stopBroker secondaryName Thread sleep assertAllConnectedTo urls get secondaryName assertBrokerInfo secondaryName assertAllConnectedTo urls get primaryName assertBrokerInfo primaryName LOG info primaryName createBrokerByName primaryName getBroker primaryName waitUntilStarted
ActiveMQQueue dest ActiveMQQueue messageTextPrefix initMessagePrefix URI tcpBrokerUri URISupport removeQuery broker getTransportConnectors get getConnectUri
LOG info tcpBrokerUri ActiveMQConnectionFactory factory ActiveMQConnectionFactory tcpBrokerUri Connection c factory createConnection c start Session session c createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createConsumer dest SocketProxy proxy SocketProxy proxy setTarget tcpBrokerUri proxy open ActiveMQConnectionFactory pFactory ActiveMQConnectionFactory proxy getUrl ActiveMQConnection pc ActiveMQConnection pFactory createConnection AtomicInteger interruptCounter AtomicInteger pc
interruptCounter incrementAndGet pc start messageCount CountDownLatch sentOne CountDownLatch ExecutorService executorService Executors newCachedThreadPool executorService Session session pc createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer dest i i messageCount i producer send session createTextMessage messageTextPrefix i sentOne countDown
broker waitUntilStopped broker createBroker url setDefaultPersistenceAdapter broker broker start assertTrue commitDoneLatch await TimeUnit SECONDS Message msg consumer receive LOG info msg assertNotNull msg assertNull consumer receive session commit consumer close connection close broker stop broker waitUntilStopped LOG info
setDefaultPersistenceAdapter broker broker setPlugins BrokerPlugin DestinationPathSeparatorBroker broker start assertTrue commitDoneLatch await TimeUnit SECONDS Message msg consumer receive LOG info msg assertNotNull msg assertNull consumer receive session commit consumer close connection close broker stop broker waitUntilStopped LOG info broker createBroker url
setDefaultPersistenceAdapter broker LOG info broker start assertTrue sendDoneLatch await TimeUnit SECONDS Message msg consumer receive LOG info msg assertNotNull msg assertNull consumer receive consumer close connection close assertEquals RegionBroker broker getRegionBroker getDestinationStatistics getEnqueues getCount assertEquals RegionBroker broker getRegionBroker getDestinationStatistics getDequeues getCount broker stop broker waitUntilStopped LOG info
assertTrue proxy waitUntilClosed LOG info proxy open assertTrue sendDoneLatch await TimeUnit SECONDS Message msg consumer receive LOG info msg assertNotNull msg assertNull consumer receive consumer close connection close assertEquals RegionBroker broker getRegionBroker getDestinationStatistics getEnqueues getCount broker stop broker waitUntilStopped LOG info
broker createBroker setDefaultPersistenceAdapter broker broker consumerExchange consumerExchange getConnectionContext setDontSendReponse
Session consumerSession2 connection createSession Session SESSION_TRANSACTED MessageConsumer consumer1 consumerSession1 createConsumer destination MessageConsumer consumer2 consumerSession2 createConsumer destination produceMessage producerSession destination produceMessage producerSession destination Vector Message receivedMessages Vector Message CountDownLatch commitDoneLatch CountDownLatch AtomicBoolean gotTransactionRolledBackException AtomicBoolean LOG info Message msg consumer1 receive LOG info msg receivedMessages add msg
TimeUnit SECONDS sleep random nextInt msg consumer1 receive LOG info msg msg receivedMessages add msg LOG info receivedMessages size consumerSession1 commit expected LOG info expected gotTransactionRolledBackException set commitDoneLatch countDown LOG info e e printStackTrace
msg receivedMessages add msg LOG info receivedMessages size consumerSession1 commit expected LOG info expected gotTransactionRolledBackException set commitDoneLatch countDown LOG info e e printStackTrace broker waitUntilStopped broker createBroker url
setDefaultPersistenceAdapter broker broker start assertTrue commitDoneLatch await TimeUnit SECONDS LOG info receivedMessages size i i i Message msg consumer1 receive LOG info msg consumerSession1 commit msg msg consumer2 receive LOG info msg consumerSession2 commit assertNotNull i msg c c close
broker createBroker setDefaultPersistenceAdapter broker broker count count
connection close connection cf createConnection connection start connections add connection Session consumerSession connection createSession Session CLIENT_ACKNOWLEDGE sessionCount Stack Session sessions Stack Session sessionCount sessions push connection createSession Session AUTO_ACKNOWLEDGE consumerCount Deque MessageConsumer consumers ArrayDeque MessageConsumer consumerCount consumers push consumerSession createConsumer destination ExecutorService executorService Executors newCachedThreadPool FailoverTransport failoverTransport ActiveMQConnection connection getTransport narrow FailoverTransport
transport createTransport assertNotNull failoverTransport assertTrue failoverTransport isBackup assertEquals failoverTransport getBackupPoolSize assertTrue
transport createTransport assertNotNull failoverTransport assertTrue failoverTransport isBackup assertEquals failoverTransport getBackupPoolSize assertTrue
failoverTransport getCurrentBackups assertEquals currentBrokerInfo getBrokerName broker1 stop assertTrue LOG debug failoverTransport getCurrentBackups failoverTransport getCurrentBackups assertTrue transportInterruptions assertTrue transportResumptions assertEquals currentBrokerInfo getBrokerName broker2 stop assertTrue
transport createTransport assertNotNull failoverTransport assertTrue failoverTransport isBackup assertEquals failoverTransport getBackupPoolSize assertTrue
assertEquals failoverTransport getBackupPoolSize LOG debug failoverTransport getCurrentBackups failoverTransport getCurrentBackups broker1 stop LOG debug failoverTransport getCurrentBackups failoverTransport getCurrentBackups broker2 stop
Transport backups String connectionUri broker1 getTransportConnectors get getPublishableConnectString broker2 getTransportConnectors get getPublishableConnectString broker3 getTransportConnectors get getPublishableConnectString backups connectionUri backups Transport transport TransportFactory connect URI connectionUri transport command LOG debug command command BrokerInfo currentBrokerInfo BrokerInfo command LOG info currentBrokerInfo error LOG debug error transportInterruptions
connectionUri backups Transport transport TransportFactory connect URI connectionUri transport command LOG debug command command BrokerInfo currentBrokerInfo BrokerInfo command LOG info currentBrokerInfo error LOG debug error transportInterruptions LOG debug transportInterruptions transportResumptions
BrokerInfo info BrokerInfo
String targetDir getName File targetDir mkdir File updateFile File targetDir
String targetDir getName File targetDir mkdir File updateFile File targetDir LOG info updateFile
String targetDir getName File targetDir mkdir File updateFile File targetDir LOG info updateFile LOG info updateFile toURI
ConnectionInfo connectionInfo3 createConnectionInfo SessionInfo sessionInfo3 createSessionInfo connectionInfo3 ProducerInfo producerInfo3 createProducerInfo sessionInfo3 connection3 send connectionInfo3 connection3 send sessionInfo3 connection3 send producerInfo3 connection3 request createMessage producerInfo3 destination deliveryMode assertNotNull receiveMessage connection1 assertNoMessagesLeft connection1 assertNotNull receiveMessage connection2 assertNoMessagesLeft connection2 CountDownLatch publishDone CountDownLatch MockTransport mt MockTransport connection3 getTransport narrow MockTransport mt mt
BrokerService broker createBroker broker waitUntilStarted ConnectionFactory connectionFactory ActiveMQConnectionFactory TRANSPORT_URL ActiveMQConnection exisitngConnection ActiveMQConnection connectionFactory createConnection ExecutorService executorService Executors newFixedThreadPool NUMBER_OF_PRODUCERS QueueView queueView getQueueView broker DESTINATION_ONE NUMBER_OF_PRODUCERS executorService submit ProducerTask waitForProducerFlowControl broker queueView assertTrue getProducerView broker DESTINATION_ONE isProducerBlocked Session producerSession exisitngConnection createSession Session AUTO_ACKNOWLEDGE
queueView blockingAllSends blockingAllSends queueView getBlockedSends
connection setUseAsyncSend connection setAlwaysSyncSend connection setUseAsyncSend connection start Session producerSession connection createSession Session AUTO_ACKNOWLEDGE MessageProducer jmsProducer producerSession createProducer producerSession createQueue destination Message sendMessage createTextMessage producerSession jmsProducer send sendMessage numberOfMessageSent LOG info numberOfMessageSent numberOfMessageSent
ProducerViewMBean broker ObjectName qProducers broker getAdminView getQueueProducers ObjectName name qProducers ProducerViewMBean proxy ProducerViewMBean broker getManagementContext newProxyInstance name ProducerViewMBean
ActiveMQConnectionFactory factory ActiveMQConnectionFactory connector getConnectUri getPort threadNumber CountDownLatch latch CountDownLatch threadNumber AtomicInteger errors AtomicInteger Random rand Random threadNumber Connection conn conn factory createConnection conn start Session sess conn createSession Session AUTO_ACKNOWLEDGE sleepTime rand nextInt
LOG info getName sleepTime Thread sleep sleepTime e e printStackTrace errors incrementAndGet conn close e LOG info getName i LOG info getName latch countDown thread start latch await TimeUnit MINUTES
sequenceNumbers value Integer MAX_VALUE transport setExpectedCounter value
info setSelector commandId info setCommandId commandId transport onCommand info Queue exceptions listener getExceptions Queue commands listener getCommands exceptions Exception e Exception exceptions remove e printStackTrace fail e assertEquals expectedCount commands size assertEquals transport getBufferedCommandCount assertTrue exceptions size Exception e Exception exceptions remove
writeBuffer writeBuffer flip
broker TransportConnector connector broker getTransportConnectors get URI brokerUri connector getConnectUri SSLContext context SSLContext getInstance CertChainCatcher catcher CertChainCatcher context init TrustManager catcher SSLSocketFactory factory context getSocketFactory
TransportConnector connector broker getTransportConnectors get URI brokerUri connector getConnectUri SSLContext context SSLContext getInstance CertChainCatcher catcher CertChainCatcher context init TrustManager catcher SSLSocketFactory factory context getSocketFactory LOG info broker getBrokerName brokerUri getHost brokerUri getPort SSLSocket socket SSLSocket factory createSocket brokerUri getHost brokerUri getPort socket setSoTimeout socket startHandshake socket close matches catcher serverCerts i i catcher serverCerts i X509Certificate cert catcher serverCerts i
Map String String options HashMap String String j j j optionSettings j getMthNaryDigit i j optionSettings j optionSettings j optionSettings j options put optionNames j optionSettings j StubSSLSocket socketStub StubSSLSocket StubSslTransport transport transport StubSslTransport socketStub e fail e getMessage LOG info
j j j optionSettings j getMthNaryDigit i j optionSettings j optionSettings j optionSettings j options put optionNames j optionSettings j StubSSLSocket socketStub StubSSLSocket StubSslTransport transport transport StubSslTransport socketStub e fail e getMessage LOG info LOG info i
optionSettings j optionSettings j optionSettings j options put optionNames j optionSettings j StubSSLSocket socketStub StubSSLSocket StubSslTransport transport transport StubSslTransport socketStub e fail e getMessage LOG info LOG info i LOG info options optionSettings
transportConnector URI uri transportConnector getPublishableConnectURI Socket socket uri SSLSocket sslSocket SSLSocket SSLSocketFactory getDefault createSocket uri getPort CountDownLatch doneHandShake CountDownLatch sslSocket doneHandShake countDown sslSocket startHandshake assertTrue doneHandShake await TimeUnit SECONDS socket sslSocket socket Socket uri getPort
sslSocket startHandshake assertTrue sslSocket isConnected oops oops printStackTrace assertTrue inactivityMonitorFired await TimeUnit SECONDS assertTrue Thread threads Thread activeCount Thread currentThread getThreadGroup enumerate threads i i activeCount i Thread thread threads i LOG info i thread thread thread Thread LOG info
String uri prefix bindAddress postfix
String options String String uri prefix bindAddress postfix options
String options String String uri prefix bindAddress postfix options
ConsumerInfo expected ConsumerInfo expected setSelector expected setExclusive expected setExclusive expected setPrefetchSize
ConsumerInfo expected ConsumerInfo expected setSelector expected setExclusive expected setExclusive expected setPrefetchSize LOG info expected producer oneway expected Command received assertCommandReceived assertTrue received received ConsumerInfo ConsumerInfo actual ConsumerInfo received assertEquals expected getSelector actual getSelector assertEquals expected isExclusive actual isExclusive assertEquals expected getPrefetchSize actual getPrefetchSize
destination text large ActiveMQTextMessage expected ActiveMQTextMessage expected setText text expected setDestination destination
ActiveMQTextMessage expected ActiveMQTextMessage expected setText text expected setDestination destination LOG info expected getClass producer oneway expected producer oneway ProducerInfo producer oneway ProducerInfo Command received assertCommandReceived assertTrue received received ActiveMQTextMessage ActiveMQTextMessage actual ActiveMQTextMessage received assertEquals expected getDestination actual getDestination assertEquals expected getText actual getText LOG info actual getText length
consumer setTransportListener UdpTestSupport consumer start e RuntimeException e server start consumer createConsumer consumer consumer setTransportListener consumer start producer createProducer producer setTransportListener
consumer start e RuntimeException e server start consumer createConsumer consumer consumer setTransportListener consumer start producer createProducer producer setTransportListener command LOG info command
o Command command Command o command
o Command command Command o command LOG info command command sendResponse command LOG info command getClass command getCommandId LOG info command receivedCommand receivedCommand command
ConsumerInfo expected ConsumerInfo expected setSelector expected setResponseRequired
ConsumerInfo expected ConsumerInfo expected setSelector expected setResponseRequired LOG info expected Response response Response producer request expected
i i i local oneway DummyCommand i Thread t Thread Thread sleep remote stop remote start t start expect remoteReceived size remoteReceived size expect
Thread threads filterDaemonThreads ThreadExplorer listThreads originalThreadCount threads length
broker start cf ActiveMQConnectionFactory connection cf createConnection connection start connection close broker stop broker waitUntilStopped AtomicInteger threadCountAfterStop AtomicInteger LOG info ThreadExplorer show Thread threads filterDaemonThreads ThreadExplorer listThreads threadCountAfterStop set threads length threadCountAfterStop get originalThreadCount
Thread Thread threads List Thread threadList ArrayList Thread Arrays asList threads i i threadList i Thread thread threadList get i
Session sess conn createSession Session AUTO_ACKNOWLEDGE Destination dest sess createQueue getClass getName ProducerThread producer ProducerThread sess dest producer start BaseDestination baseDestination BaseDestination broker getRegionBroker getDestinationMap get dest baseDestination baseDestination getDestinationStatistics getEnqueues getCount BaseDestination baseDestination BaseDestination broker getRegionBroker getDestinationMap get dest LOG info baseDestination getDestinationStatistics getEnqueues sent sent producer getSentCount TimeUnit SECONDS sleep
Thread sleep LOG info restartBroker Thread sleep LOG info sendMessages queue Thread sleep LOG info MessageConsumer consumerA createConsumer queue MessageConsumer consumerB createConsumer queue Thread sleep MessageIdList messagesA getConsumerMessages consumerA MessageIdList messagesB getConsumerMessages consumerB
Thread sleep LOG info restartBroker Thread sleep LOG info sendMessages queue Thread sleep LOG info MessageConsumer consumerA createConsumer queue MessageConsumer consumerB createConsumer queue Thread sleep MessageIdList messagesA getConsumerMessages consumerA MessageIdList messagesB getConsumerMessages consumerB LOG info messagesA
Thread sleep LOG info sendMessages queue Thread sleep LOG info restartBroker Thread sleep LOG info MessageConsumer consumerA createConsumer queue MessageConsumer consumerB createConsumer queue Thread sleep MessageIdList messagesA getConsumerMessages consumerA MessageIdList messagesB getConsumerMessages consumerB
Thread sleep LOG info sendMessages queue Thread sleep LOG info restartBroker Thread sleep LOG info MessageConsumer consumerA createConsumer queue MessageConsumer consumerB createConsumer queue Thread sleep MessageIdList messagesA getConsumerMessages consumerA MessageIdList messagesB getConsumerMessages consumerB LOG info messagesA
File dataDir File IOHelper getDefaultDataDirectory
connection close connection Thread sleep connection createConnection session connection createSession Session CLIENT_ACKNOWLEDGE consumer session createConsumer queue message consumer receive message message acknowledge connection close connection TimeUnit SECONDS sleep ActiveMQDestination dests broker getRegionBroker getDestinations ActiveMQDestination destination dests String name destination getPhysicalName name queue getPhysicalName
connection close connection TimeUnit SECONDS sleep ActiveMQDestination dests broker getRegionBroker getDestinations ActiveMQDestination destination dests String name destination getPhysicalName name queue getPhysicalName LOG info name dests broker getRegionBroker getDestinations dests fail queue getPhysicalName broker getAdminView removeQueue queue getPhysicalName dests broker getRegionBroker getDestinations dests ActiveMQDestination destination dests
MessageConsumer consumer consumerSession createConsumer dest MessageProducer prod producerSession createProducer dest Message message producerSession createMessage prod send message consumer receive connection close connection broker getAdminView removeTopic ActiveMQDestination dest getPhysicalName broker getAdminView removeQueue ActiveMQDestination dest getPhysicalName ActiveMQDestination dests broker getRegionBroker getDestinations matchingDestinations ActiveMQDestination destination dests String name destination getPhysicalName
ActiveMQTopic advisoryTopic ActiveMQTopic createBroker createBroker NetworkConnector networkBridge bridgeBrokers networkBridge addStaticallyIncludedDestination advisoryTopic startAllBrokers verifyPeerBrokerInfo brokers get MessageConsumer consumerA createConsumer advisoryTopic MessageConsumer consumerB createConsumer advisoryTopic sendMessages ActiveMQTopic MessageIdList messagesA getConsumerMessages consumerA MessageIdList messagesB getConsumerMessages consumerB
ActiveMQTopic advisoryTopic ActiveMQTopic createBroker createBroker NetworkConnector networkBridge bridgeBrokers networkBridge addStaticallyIncludedDestination advisoryTopic startAllBrokers verifyPeerBrokerInfo brokers get MessageConsumer consumerA createConsumer advisoryTopic MessageConsumer consumerB createConsumer advisoryTopic sendMessages ActiveMQTopic MessageIdList messagesA getConsumerMessages consumerA MessageIdList messagesB getConsumerMessages consumerB LOG info messagesA
ActiveMQTopic advisoryTopic ActiveMQTopic createBroker createBroker NetworkConnector networkBridge bridgeBrokers networkBridge addStaticallyIncludedDestination advisoryTopic networkBridge setDuplex startAllBrokers verifyPeerBrokerInfo brokers get MessageConsumer consumerA createConsumer advisoryTopic MessageConsumer consumerB createConsumer advisoryTopic sendMessages ActiveMQTopic MessageIdList messagesA getConsumerMessages consumerA MessageIdList messagesB getConsumerMessages consumerB
ActiveMQTopic advisoryTopic ActiveMQTopic createBroker createBroker NetworkConnector networkBridge bridgeBrokers networkBridge addStaticallyIncludedDestination advisoryTopic networkBridge setDuplex startAllBrokers verifyPeerBrokerInfo brokers get MessageConsumer consumerA createConsumer advisoryTopic MessageConsumer consumerB createConsumer advisoryTopic sendMessages ActiveMQTopic MessageIdList messagesA getConsumerMessages consumerA MessageIdList messagesB getConsumerMessages consumerB LOG info messagesA
ActiveMQTopic advisoryTopic ActiveMQTopic createBroker createBroker NetworkConnector networkBridge bridgeBrokers networkBridge addStaticallyIncludedDestination advisoryTopic startAllBrokers verifyPeerBrokerInfo brokers get MessageConsumer consumerA createConsumer advisoryTopic MessageConsumer consumerB createConsumer advisoryTopic createConsumer ActiveMQTopic MessageIdList messagesA getConsumerMessages consumerA MessageIdList messagesB getConsumerMessages consumerB
ActiveMQTopic advisoryTopic ActiveMQTopic createBroker createBroker NetworkConnector networkBridge bridgeBrokers networkBridge addStaticallyIncludedDestination advisoryTopic startAllBrokers verifyPeerBrokerInfo brokers get MessageConsumer consumerA createConsumer advisoryTopic MessageConsumer consumerB createConsumer advisoryTopic createConsumer ActiveMQTopic MessageIdList messagesA getConsumerMessages consumerA MessageIdList messagesB getConsumerMessages consumerB LOG info messagesA
brokerItem BrokerService broker brokerItem broker RegionBroker regionBroker RegionBroker broker getRegionBroker
Session session connection createSession Session AUTO_ACKNOWLEDGE ActiveMQDestination destination createDestination session ActiveMQDestination QUEUE_TYPE MessageProducer producer session createProducer destination producer setPriority sendMessages session producer producer close MessageProducer producer2 session createProducer destination producer2 setPriority sendMessages session producer2 producer2 close session close Session consumerSession connection createSession Session SESSION_TRANSACTED MessageConsumer messageConsumer consumerSession createConsumer destination Message message messageConsumer receive
LOG info TimeUnit SECONDS sleep removeConnection context info error startAllBrokers waitForBridgeFormation socketProxy halfClose sleep numConnections hub broker getTransportConnectors get getConnections size
createBroker URI bridgeBrokers startAllBrokers Destination dest createDestination sendMessages dest MESSAGE_COUNT Thread sleep browsed browseMessages dest Thread sleep MessageConsumer clientA createConsumer dest MessageIdList msgsA getConsumerMessages clientA msgsA waitForMessagesToArrive MESSAGE_COUNT Thread sleep MessageConsumer clientB createConsumer dest MessageIdList msgsB getConsumerMessages clientB msgsB waitForMessagesToArrive MESSAGE_COUNT
browser1 start Browser browser2 Browser composite MESSAGE_COUNT browser2 start LOG info sendMessages composite MESSAGE_COUNT LOG info browser1 getTotalCount MESSAGE_COUNT browser2 getTotalCount MESSAGE_COUNT browser1 join
Browser browser2 Browser composite MESSAGE_COUNT browser2 start LOG info sendMessages composite MESSAGE_COUNT LOG info browser1 getTotalCount MESSAGE_COUNT browser2 getTotalCount MESSAGE_COUNT browser1 join browser2 join
browser Enumeration msgs browser getEnumeration browsedMessage msgs browsedMessage ActiveMQTextMessage message ActiveMQTextMessage msgs nextElement
messages clear Destination destinations getDestinations destIdx i i data i Message message session createTextMessage data i
setUp setUp connectionFactory createConnectionFactory sendConnection createConnection sendConnection start receiveConnection createConnection receiveConnection start
setUp setUp connectionFactory createConnectionFactory sendConnection createConnection sendConnection start receiveConnection createConnection receiveConnection start LOG info sendConnection
setUp setUp connectionFactory createConnectionFactory sendConnection createConnection sendConnection start receiveConnection createConnection receiveConnection start LOG info sendConnection LOG info receiveConnection session sendConnection createSession Session AUTO_ACKNOWLEDGE receiveSession receiveConnection createSession Session AUTO_ACKNOWLEDGE
setUp setUp connectionFactory createConnectionFactory sendConnection createConnection sendConnection start receiveConnection createConnection receiveConnection start LOG info sendConnection LOG info receiveConnection session sendConnection createSession Session AUTO_ACKNOWLEDGE receiveSession receiveConnection createSession Session AUTO_ACKNOWLEDGE LOG info session
setUp setUp connectionFactory createConnectionFactory sendConnection createConnection sendConnection start receiveConnection createConnection receiveConnection start LOG info sendConnection LOG info receiveConnection session sendConnection createSession Session AUTO_ACKNOWLEDGE receiveSession receiveConnection createSession Session AUTO_ACKNOWLEDGE LOG info session LOG info receiveSession producer session createProducer
LOG info sendConnection LOG info receiveConnection session sendConnection createSession Session AUTO_ACKNOWLEDGE receiveSession receiveConnection createSession Session AUTO_ACKNOWLEDGE LOG info session LOG info receiveSession producer session createProducer LOG info producer consumerDestination session createTopic getConsumerSubject producerDestination session createTopic getProducerSubject consumerDestination session createQueue getConsumerSubject producerDestination session createQueue getProducerSubject LOG info consumerDestination consumerDestination getClass
waitForMessagesToBeDelivered size messageLists length size
ConnectionFactory factory createConnectionFactory Connection connection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE j j j MessageProducer producer session createProducer ActiveMQQueue j destinationCount producer send session createMessage connection close allDone countDown LOG info
exceptions add ignored ConnectionFactory factory createConnectionFactory Connection connection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createConsumer ActiveMQQueue consumer receiveNoWait connection close allDone countDown
consumersToActivate Object addConsumerSignal Object Thread r Thread r MessageConsumer consumer i i consumersToActivate i LOG info addConsumerSignal addConsumerSignal wait TimedMessageListener listener TimedMessageListener consumer createDurableSubscriber factory createConnection destination i
Thread r MessageConsumer consumer i i i LOG info addConsumerSignal addConsumerSignal wait TimedMessageListener listener TimedMessageListener consumer createDurableSubscriber factory createConnection destination i LOG info consumer consumer setMessageListener listener consumers put consumer listener
consumer createDurableSubscriber factory createConnection destination i LOG info consumer consumer setMessageListener listener consumers put consumer listener e LOG error e statsWithActive produceMessages destination session producer addConsumerSignal LOG info statsWithActive statsWithActive statsWithActive statsWithActive consumers TimeUnit SECONDS sleep timeToFirstAccumulator listener consumers time listener getFirstReceipt timeToFirstAccumulator time
start System currentTimeMillis j j j singleSendstart System currentTimeMillis TextMessage msg createTextMessage session j priority count producer send msg DeliveryMode PERSISTENT priority max Math max max System currentTimeMillis singleSendstart count addConsumerSignal addConsumerSignal addConsumerSignal notifyAll LOG info count
TextMessage msg createTextMessage session j priority count producer send msg DeliveryMode PERSISTENT priority max Math max max System currentTimeMillis singleSendstart count addConsumerSignal addConsumerSignal addConsumerSignal notifyAll LOG info count LOG info count max duration System currentTimeMillis start batchMax Math max batchMax duration sum duration
consumersToActivate Object addConsumerSignal Object Thread r Thread r MessageConsumer consumer consumersToActivate LOG info addConsumerSignal addConsumerSignal wait TimedMessageListener listener TimedMessageListener consumer createConsumer factory createConnection destination
Thread r MessageConsumer consumer LOG info addConsumerSignal addConsumerSignal wait TimedMessageListener listener TimedMessageListener consumer createConsumer factory createConnection destination LOG info consumer consumer setMessageListener listener consumers put consumer listener
consumers put consumer listener e LOG error e statsWithActive produceMessages destination NUM_MESSAGES ITERATIONS session producer addConsumerSignal expectedQueueDeliveries NUM_MESSAGES ITERATIONS LOG info statsWithActive statsWithActive statsWithActive statsWithActive consumers size consumersToActivate timeToFirstAccumulator listener consumers time listener getFirstReceipt timeToFirstAccumulator time
start System currentTimeMillis j j j singleSendstart System currentTimeMillis TextMessage msg createTextMessage session j priority count producer send msg DeliveryMode PERSISTENT priority max Math max max System currentTimeMillis singleSendstart count addConsumerSignal addConsumerSignal addConsumerSignal notifyAll LOG info count
TextMessage msg createTextMessage session j priority count producer send msg DeliveryMode PERSISTENT priority max Math max max System currentTimeMillis singleSendstart count addConsumerSignal addConsumerSignal addConsumerSignal notifyAll LOG info count LOG info count max duration System currentTimeMillis start batchMax Math max batchMax duration sum duration
makeMessages prefetchSize
messageCount makeMessages messageCount
RegionBroker regionBroker RegionBroker BrokerRegistry getInstance lookup getRegionBroker org apache activemq broker region Destination dest regionBroker org apache activemq broker region Destination target dest dest DestinationStatistics stats target getDestinationStatistics
org apache activemq broker region Destination target dest dest getName DestinationStatistics stats target getDestinationStatistics LOG info target getName stats getInflight getCount stats getInflight getCount expectedCount stats getInflight getCount expectedCount e JMSException e toString DestinationStatistics stats dest getDestinationStatistics
assertTrue connection isUseCompression createProducerAndSendMessages MessageConsumer consumer session createConsumer queue TextMessage message TextMessage consumer receive assertTrue ActiveMQMessage message isCompressed
assertTrue connection isUseCompression createProducerAndSendMessages MessageConsumer consumer session createConsumer queue TextMessage message TextMessage consumer receive assertTrue ActiveMQMessage message isCompressed LOG debug message getText connection setUseCompression MessageProducer producer session createProducer queue producer send message producer close message TextMessage consumer receive
session connection createSession Session CLIENT_ACKNOWLEDGE MessageProducer producer session createProducer queue i i i TextMessage message session createTextMessage i i i
LOG info numberToCreate Session session connection createSession Session AUTO_ACKNOWLEDGE numberToCreate
consumerConnection createConnection consumerConnection start
consumerConnection createConnection consumerConnection start
Consumer consumer Consumer consumerConnection JMSTYPE_EATME Thread consumerThread Thread consumer consumerThread start producerConnection createConnection producerConnection start LOG info producerConnection Thread sleep Producer producer Producer producerConnection Thread producerThread Thread producer producerThread start consumerThread join producer stop consumer
String durableName getName String clientID getSubject
MessageConsumer consumer session createDurableSubscriber topic populateDestination topic producerConnection producerConnection close Wait waitFor broker getBroker getClients length TransportConnector connector broker getTransportConnectors get TransportConnection connection connector getConnections stream findFirst get connection stop Wait waitFor broker getBroker getClients length durableConnection ActiveMQConnection connectionFactory createConnection durableConnection setClientID durableConnection start session durableConnection createSession Session AUTO_ACKNOWLEDGE topic session createTopic topicName consumer session createDurableSubscriber topic Message msg consumer receive
createDurableSub topic publishMesssages topic org apache log4j Logger log4jLogger org apache log4j Logger getLogger AbstractStoreCursor getCanonicalName AtomicBoolean failed AtomicBoolean
LOG info
LOG info toString Connection con openConnection Session sess con createSession Session CLIENT_ACKNOWLEDGE MessageConsumer consumer sess createDurableSubscriber topic SUBSCRIPTION_NAME selector max end System currentTimeMillis max inTransaction max hardEnd System currentTimeMillis max exit Message message consumer receive max message message message acknowledge
LOG info closed ArrayList String sweeped ArrayList String String
message Throwable e Throwable cause RuntimeException message e
LOG info ActiveMQConnectionFactory fact ActiveMQConnectionFactory connector getConnectUri toString Connection conn fact createConnection conn setClientID Session session conn createSession Destination dest session createTopic topicName TopicSubscriber sub session createDurableSubscriber Topic dest subName
ActiveMQConnectionFactory fact ActiveMQConnectionFactory connector getConnectUri toString Connection conn fact createConnection conn setClientID Session session conn createSession Destination dest session createTopic topicName TopicSubscriber sub session createDurableSubscriber Topic dest subName
ActiveMQConnectionFactory fact ActiveMQConnectionFactory connector getConnectUri toString Connection conn fact createConnection conn setClientID Session session conn createSession Destination dest session createTopic topicName TopicSubscriber sub session createDurableSubscriber Topic dest subName LOG info subName TopicSubscriber sub2 session createDurableSubscriber Topic dest subName2
LOG info processLock writeLock lock destroyBroker startBroker restartCount
max end System currentTimeMillis max LOG info toString max hardEnd System currentTimeMillis max exit Message message consumer receive max message onClientMessage message message message acknowledge trans message getIntProperty
LOG info toString max hardEnd System currentTimeMillis max exit Message message consumer receive max message onClientMessage message message message acknowledge trans message getIntProperty LOG info trans transCount inTransaction transCount committing server committingTransaction committing trans
Message message consumer receive max message onClientMessage message message message acknowledge trans message getIntProperty LOG info trans transCount inTransaction transCount committing server committingTransaction committing trans LOG info message getIntProperty inTransaction
LOG info closed ArrayList String sweeped ArrayList String String
message Throwable e Throwable cause RuntimeException message e
LOG info processLock writeLock lock destroyBroker startBroker restartCount
message Throwable e Throwable cause RuntimeException message e
Connection con openConnection Session sess con createSession Session CLIENT_ACKNOWLEDGE MessageConsumer consumer sess createDurableSubscriber topic SUBSCRIPTION_NAME selector max end System currentTimeMillis max inTransaction max hardEnd System currentTimeMillis max exit Message message consumer receive max message onClientMessage message message message acknowledge
LOG info closed ArrayList String sweeped ArrayList String String clientId sweeped add clientId
message Throwable e Throwable log RuntimeException message e log printStackTrace
LOG info processLock writeLock lock destroyBroker startBroker restartCount
Connection con openConnection Session sess con createSession Session CLIENT_ACKNOWLEDGE MessageConsumer consumer sess createDurableSubscriber topic SUBSCRIPTION_NAME selector max end System currentTimeMillis max inTransaction max hardEnd System currentTimeMillis max exit Message message consumer receive max message onClientMessage message message message acknowledge
LOG info closed ArrayList String sweeped ArrayList String String
message Throwable e Throwable cause RuntimeException message e
session close con close CountDownLatch goOn CountDownLatch Connection sendCon createConnection Session sendSession sendCon createSession Session AUTO_ACKNOWLEDGE MessageProducer producer sendSession createProducer i i i filter i Message message sendSession createMessage message setStringProperty filter producer send topic message i i
session createDurableSubscriber topic session close con close Connection sendCon createConnection Session sendSession sendCon createSession Session AUTO_ACKNOWLEDGE MessageProducer producer sendSession createProducer i i i filter i Message message sendSession createMessage message setStringProperty filter producer send topic message i i
String interest LOG info createConsumer interest Thread sleep Producer producer Producer brokerURL interest messageSize ttl producer sendMessages totalMsgCount producer close
String interest LOG info createConsumer interest Thread sleep Producer producer Producer brokerURL interest messageSize ttl producer sendMessages totalMsgCount producer close LOG info totalMsgCount createConsumer interest initialMaxMsgs Thread sleep reconnectSleep createConsumer interest cleanupMsgCount String brokerVersion String mbeanServer getAttribute ObjectName
createConsumer interest Thread sleep Producer producer Producer brokerURL interest messageSize ttl producer sendMessages totalMsgCount producer close LOG info totalMsgCount createConsumer interest initialMaxMsgs Thread sleep reconnectSleep createConsumer interest cleanupMsgCount String brokerVersion String mbeanServer getAttribute ObjectName LOG info brokerVersion String theJmxObject Integer pendingQueueSize Integer mbeanServer getAttribute ObjectName theJmxObject
createConsumer interest initialMaxMsgs Thread sleep reconnectSleep createConsumer interest cleanupMsgCount String brokerVersion String mbeanServer getAttribute ObjectName LOG info brokerVersion String theJmxObject Integer pendingQueueSize Integer mbeanServer getAttribute ObjectName theJmxObject LOG info pendingQueueSize pendingQueueSize intValue Long cursorMemoryUsage Long mbeanServer getAttribute ObjectName theJmxObject
String theJmxObject assertTrue Integer pendingQueueSize Integer mbeanServer getAttribute ObjectName theJmxObject LOG info pendingQueueSize pendingQueueSize intValue assertTrue Long cursorMemoryUsage Long mbeanServer getAttribute ObjectName theJmxObject LOG info cursorMemoryUsage cursorMemoryUsage longValue assertTrue totalMsgReceived initialMaxMsgs cleanupMsgCount
interest messageReceived messagesNotReceived LOG info Consumer consumer consumer Consumer consumerBrokerURL interest clientId Message msg consumer getMessage messageTimeout msg
interest messageReceived messagesNotReceived LOG info Consumer consumer consumer Consumer consumerBrokerURL interest clientId Message msg consumer getMessage messageTimeout msg LOG debug msg toString messageReceived totalMsgReceived
Consumer consumer consumer Consumer consumerBrokerURL interest clientId i i i Message msg consumer getMessage messageTimeout msg LOG debug msg toString messageReceived totalMsgReceived LOG debug i messagesNotReceived Thread sleep sleep
i i i Message msg consumer getMessage messageTimeout msg LOG debug msg toString messageReceived totalMsgReceived LOG debug i messagesNotReceived Thread sleep sleep ie LOG debug ie consumer close LOG info
Message msg consumer getMessage messageTimeout msg LOG debug msg toString messageReceived totalMsgReceived LOG debug i messagesNotReceived Thread sleep sleep ie LOG debug ie consumer close LOG info LOG info messageReceived
msg LOG debug msg toString messageReceived totalMsgReceived LOG debug i messagesNotReceived Thread sleep sleep ie LOG debug ie consumer close LOG info LOG info messageReceived LOG info messagesNotReceived
Connection conSpoke facSpoke createConnection conHub setClientID conSpoke setClientID conHub start conSpoke start Session sesHub conHub createSession Session AUTO_ACKNOWLEDGE Session sesSpoke conSpoke createSession Session AUTO_ACKNOWLEDGE ActiveMQTopic topic ActiveMQTopic String consumerName MessageConsumer remoteConsumer sesSpoke createDurableSubscriber topic consumerName remoteConsumer msg TextMessage textMsg TextMessage msg receivedMsgs
MessageProducer localProducer sesSpoke createProducer topic localProducer setDeliveryMode DeliveryMode PERSISTENT String payloadString String i i i Message test sesSpoke createTextMessage i test setStringProperty payloadString localProducer send test localProducer close String options i i i brokers get SPOKE broker stop sleep createBroker URI SPOKE options bridge SPOKE HUB brokers get SPOKE broker start
broker type timeout expiryTime System currentTimeMillis timeout type type type ObjectName beanName ObjectName broker getBrokerName type Set ObjectName mbeans count timeout Thread sleep mbeans broker getManagementContext queryNames beanName mbeans count mbeans size LOG info count type ObjectName mbeans
broker Set all broker getManagementContext queryNames
broker Set all broker getManagementContext queryNames LOG info all size all
registerDurableSubscription produceExpiredAndOneNonExpiredMessages TimeUnit SECONDS sleep Message message collectMessagesFromDurableSubscriptionForOneMinute
String osName System getProperty
sent Message message session createMessage message setStringProperty producer send topic message Thread sleep session close con close con createConnection session con createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createDurableSubscriber topic DurableSubscriptionOfflineTestListener listener DurableSubscriptionOfflineTestListener consumer setMessageListener listener Thread sleep session close con close
session con createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer sent i i i sent Message message session createMessage producer send topic message session close con close con createConnection session con createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createDurableSubscriber topic i i sent i Message m consumer receive assertNotNull i m
sent i i i sent Message message session createMessage producer send topic message session close con close con createConnection session con createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createDurableSubscriber topic i i sent i Message m consumer receive assertNotNull i m LOG info i m ObjectName activeDurableSubName broker getAdminView getDurableTopicSubscribers
String osName System getProperty
con createConnection session con createSession Session AUTO_ACKNOWLEDGE session createDurableSubscriber topic session close con close con createConnection session con createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer filtered filter Math random filter filtered Message message session createMessage message setStringProperty filter producer send topic message
LOG info filtered Thread sleep session close con close Thread sleep broker stop createBroker con createConnection session con createSession Session AUTO_ACKNOWLEDGE producer session createProducer filter Math random filter filtered Message message session createMessage message setStringProperty filter
Thread sleep session close con close assertEquals sent listener count Thread sleep broker stop createBroker con createConnection session con createSession Session AUTO_ACKNOWLEDGE producer session createProducer sent Message message session createMessage message setStringProperty producer send topic message
session close con close con createConnection session con createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer toSend String payload toString sent i sent i toSend i Message message session createTextMessage payload message setStringProperty message setIntProperty i producer send topic message sent con close
sent con close LOG info sent con createConnection session con createSession Session AUTO_ACKNOWLEDGE session unsubscribe destroyBroker createBroker con createConnection session con createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createDurableSubscriber topic DurableSubscriptionOfflineTestListener listener DurableSubscriptionOfflineTestListener consumer setMessageListener listener
message setStringProperty producer send topic message session close con close ObjectName subs broker getAdminView getInactiveDurableTopicSubscribers assertEquals subs length ObjectName subName subs DurableSubscriptionViewMBean sub DurableSubscriptionViewMBean broker getManagementContext newProxyInstance subName DurableSubscriptionViewMBean CompositeData data sub browse assertNotNull data assertEquals data length LinkedList String idToRemove LinkedList idToRemove add String data get idToRemove add String data get idToRemove add String data get
idToRemove add String data get idToRemove add String data get LOG info idToRemove String id idToRemove sub removeMessage id JDBCPersistenceAdapter broker getPersistenceAdapter cleanup data sub browse assertNotNull data assertEquals data length c data String id String c get String removedId idToRemove assertNotEquals id removedId
Connection con clientFactory createConnection con setClientID id con start Session session con createSession Session CLIENT_ACKNOWLEDGE MessageConsumer consumer session createDurableSubscriber topic nextId runCount i i i Message message consumer receiveNoWait message producerSequenceId MessageId message getJMSMessageID getProducerSequenceId
assertEquals id runCount message getJMSMessageID nextId producerSequenceId LOG info con getClientID i session close con close e e printStackTrace exceptions add e producer String payLoad String Connection con createConnection Session sendSession con createSession Session SESSION_TRANSACTED MessageProducer producer sendSession createProducer topic i i i
session con createSession Session AUTO_ACKNOWLEDGE consumer session createDurableSubscriber topic filter assertNotNull consumer receive assertNotNull consumer receive session close con close con createConnection session con createSession Session AUTO_ACKNOWLEDGE producer session createProducer sent i i i Message message session createMessage message setStringProperty i producer send topic message sent
session con createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer sent Message message session createMessage message setStringProperty message setIntProperty producer send topic message sent i sent i i message session createMessage message setStringProperty message setIntProperty i producer send topic message sent con close
session con createSession Session AUTO_ACKNOWLEDGE session createDurableSubscriber topic filter session close con close destroyBroker createBroker con createConnection session con createSession Session AUTO_ACKNOWLEDGE producer session createProducer i sent i i message session createMessage message setStringProperty message setIntProperty i producer send topic message sent
connection start TopicSession session connection createTopicSession Session AUTO_ACKNOWLEDGE Topic topic session createTopic getDestinationName TopicPublisher publisher session createPublisher topic LOG debug TopicSubscriber subscriber session createSubscriber topic TopicSubscriber durableSub session createDurableSubscriber topic getSubscriptionName LOG debug MSG_COUNT MSG_COUNT publisher publish session createMessage LOG info MSG_COUNT assertNotNull subscriber receive LOG info assertNull durableSub receive
publisher publish session createMessage LOG info MSG_COUNT assertNotNull subscriber receive LOG info assertNull durableSub receive LOG debug MSG_COUNT MSG_COUNT publisher publish session createMessage LOG debug durableSub close LOG debug durableSub session createDurableSubscriber topic getSubscriptionName LOG info assertNull durableSub receive
LOG info MSG_COUNT assertNotNull subscriber receive LOG info MSG_COUNT assertNotNull durableSub receive LOG debug MSG_COUNT MSG_COUNT publisher publish session createMessage LOG debug durableSub close LOG debug durableSub session createDurableSubscriber topic getSubscriptionName LOG info assertNull durableSub receive
connection start TopicSession session connection createTopicSession Session AUTO_ACKNOWLEDGE Topic topic session createTopic getDestinationName TopicPublisher publisher session createPublisher topic LOG debug TopicSubscriber subscriber session createSubscriber topic TopicSubscriber durableSub session createDurableSubscriber topic getSubscriptionName LOG debug MSG_COUNT MSG_COUNT publisher publish session createMessage LOG info MSG_COUNT assertNotNull subscriber receive LOG info assertNull durableSub receive
LOG info assertNull durableSub receive LOG debug MSG_COUNT MSG_COUNT publisher publish session createMessage tearDown createBroker connection factory createTopicConnection connection setClientID getClientId connection start session connection createTopicSession Session AUTO_ACKNOWLEDGE topic session createTopic getDestinationName publisher session createPublisher topic LOG debug durableSub session createDurableSubscriber topic getSubscriptionName
MSG_COUNT assertNotNull durableSub receive LOG debug MSG_COUNT MSG_COUNT publisher publish session createMessage tearDown createBroker connection factory createTopicConnection connection setClientID getClientId connection start session connection createTopicSession Session AUTO_ACKNOWLEDGE topic session createTopic getDestinationName publisher session createPublisher topic LOG debug durableSub session createDurableSubscriber topic getSubscriptionName
broker start broker waitUntilStarted ActiveMQConnectionFactory factory ActiveMQConnectionFactory ActiveMQPrefetchPolicy prefetchPolicy ActiveMQPrefetchPolicy prefetchPolicy setAll factory setPrefetchPolicy prefetchPolicy connection factory createConnection connection start session connection createSession Session AUTO_ACKNOWLEDGE producer session createProducer destination producer setTimeToLive producer setDeliveryMode DeliveryMode PERSISTENT producer send session createTextMessage DeliveryMode PERSISTENT consumer session createConsumer ActiveMQQueue
producer send session createTextMessage ex ex printStackTrace producingThread start consumerThread join producingThread join DestinationStatistics view getDestinationStatistics broker destination view getInflight getCount assertEquals view getInflight getCount LOG info received get view getEnqueues getCount view getDequeues getCount view getDispatched getCount view getInflight getCount view getExpired getCount
ex printStackTrace producingThread start consumerThread join producingThread join DestinationStatistics view getDestinationStatistics broker destination view getInflight getCount assertEquals view getInflight getCount LOG info received get view getEnqueues getCount view getDequeues getCount view getDispatched getCount view getInflight getCount view getExpired getCount oldEnqueues view getEnqueues getCount
connection factory createConnection session connection createSession Session AUTO_ACKNOWLEDGE producer session createProducer destination producer setTimeToLive producer setDeliveryMode DeliveryMode NON_PERSISTENT connection start sendCount i tStamp System currentTimeMillis i sendCount producer send session createTextMessage i
TimeUnit SECONDS sleep ex ex printStackTrace producingThread start producingThread join TimeUnit SECONDS toMillis producingThread isAlive TimeUnit SECONDS sleep DestinationViewMBean view createView destination
ex printStackTrace producingThread start producingThread join TimeUnit SECONDS toMillis producingThread isAlive TimeUnit SECONDS sleep DestinationViewMBean view createView destination LOG info view getEnqueueCount view getDequeueCount view getInFlightCount view getExpiredCount view getQueueSize view getDequeueCount view getDequeueCount view getExpiredCount view getDequeueCount view getEnqueueCount view getQueueSize
ActiveMQConnectionFactory factory ActiveMQConnectionFactory connectionUri connection factory createConnection session connection createSession Session AUTO_ACKNOWLEDGE producer session createProducer destination producer setTimeToLive connection start sendCount i tStamp System currentTimeMillis i sendCount producer send session createTextMessage i
i LOG info i System currentTimeMillis tStamp tStamp System currentTimeMillis ex ex printStackTrace producingThread start producingThread join TimeUnit SECONDS toMillis producingThread isAlive DestinationViewMBean view createView destination
ex ex printStackTrace producingThread start producingThread join TimeUnit SECONDS toMillis producingThread isAlive DestinationViewMBean view createView destination LOG info view getEnqueueCount view getDequeueCount view getInFlightCount view getExpiredCount view getQueueSize sendCount view getExpiredCount
createBroker queuePrefetch ActiveMQConnectionFactory factory ActiveMQConnectionFactory connectionUri queuePrefetch connection factory createConnection session connection createSession Session CLIENT_ACKNOWLEDGE producer session createProducer destination ttl producer setTimeToLive ttl sendCount CountDownLatch receivedOneCondition CountDownLatch CountDownLatch waitCondition CountDownLatch MessageConsumer consumer session createConsumer destination consumer
connection factory createConnection session connection createSession Session CLIENT_ACKNOWLEDGE producer session createProducer destination ttl producer setTimeToLive ttl sendCount CountDownLatch receivedOneCondition CountDownLatch CountDownLatch waitCondition CountDownLatch MessageConsumer consumer session createConsumer destination consumer message LOG info message receivedOneCondition countDown waitCondition await TimeUnit MINUTES
LOG info message message acknowledge e e printStackTrace fail e toString connection start i tStamp System currentTimeMillis i producer send session createTextMessage i
LOG info i System currentTimeMillis tStamp tStamp System currentTimeMillis ex ex printStackTrace producingThread start assertTrue receivedOneCondition await TimeUnit SECONDS assertTrue producingThread join producingThread isAlive DestinationViewMBean view createView destination assertTrue
ex ex printStackTrace producingThread start assertTrue receivedOneCondition await TimeUnit SECONDS assertTrue producingThread join producingThread isAlive DestinationViewMBean view createView destination assertTrue queuePrefetch view getDispatchCount
producingThread start assertTrue receivedOneCondition await TimeUnit SECONDS assertTrue producingThread join producingThread isAlive DestinationViewMBean view createView destination assertTrue queuePrefetch view getDispatchCount assertTrue
ActiveMQConnectionFactory factory ActiveMQConnectionFactory connectionUri queuePrefetch connection factory createConnection session connection createSession Session CLIENT_ACKNOWLEDGE producer session createProducer destination ttl producer setTimeToLive ttl sendCount CountDownLatch receivedOneCondition CountDownLatch CountDownLatch waitCondition CountDownLatch AtomicLong received AtomicLong MessageConsumer consumer session createConsumer destination consumer
producer setTimeToLive ttl sendCount CountDownLatch receivedOneCondition CountDownLatch CountDownLatch waitCondition CountDownLatch AtomicLong received AtomicLong MessageConsumer consumer session createConsumer destination consumer message LOG LOG debug message receivedOneCondition countDown received incrementAndGet waitCondition await TimeUnit MINUTES LOG
LOG LOG debug message message acknowledge e e printStackTrace fail e toString connection start i tStamp System currentTimeMillis i producer send session createTextMessage
producer send session createTextMessage i LOG info i System currentTimeMillis tStamp tStamp System currentTimeMillis ex ex printStackTrace producingThread start assertTrue receivedOneCondition await TimeUnit SECONDS assertTrue producingThread join producingThread isAlive DestinationViewMBean view createView destination
tStamp System currentTimeMillis ex ex printStackTrace producingThread start assertTrue receivedOneCondition await TimeUnit SECONDS assertTrue producingThread join producingThread isAlive DestinationViewMBean view createView destination assertTrue queuePrefetch view getDispatchCount
producingThread start assertTrue receivedOneCondition await TimeUnit SECONDS assertTrue producingThread join producingThread isAlive DestinationViewMBean view createView destination assertTrue queuePrefetch view getDispatchCount assertTrue
connection factory createConnection connection setClientID session connection createSession Session CLIENT_ACKNOWLEDGE connection start Topic destination session createTopic producer session createProducer destination ttl producer setTimeToLive ttl sendCount TopicSubscriber sub session createDurableSubscriber destination sub close sendCount producer send session createTextMessage DestinationViewMBean view createView ActiveMQTopic destination LOG info
Topic destination session createTopic producer session createProducer destination ttl producer setTimeToLive ttl sendCount TopicSubscriber sub session createDurableSubscriber destination sub close sendCount producer send session createTextMessage DestinationViewMBean view createView ActiveMQTopic destination LOG info LOG info view getExpiredCount view getEnqueueCount assertEquals view getExpiredCount assertEquals view getEnqueueCount Thread sleep
assertEquals view getEnqueueCount Thread sleep LOG info view getExpiredCount view getEnqueueCount assertEquals view getExpiredCount assertEquals view getEnqueueCount AtomicLong received AtomicLong sub session createDurableSubscriber destination sub received incrementAndGet LOG info received get sendCount
Thread sleep LOG info view getExpiredCount view getEnqueueCount assertEquals view getExpiredCount assertEquals view getEnqueueCount AtomicLong received AtomicLong sub session createDurableSubscriber destination sub received incrementAndGet LOG info received get sendCount
MessageConsumer firstConsumer registerConsumer produceMessage Message message firstConsumer receive
MessageConsumer firstConsumer registerConsumer produceMessage Message message firstConsumer receive LOG info message assertEquals numberOfMessages firstConsumer close session commit Thread sleep removeQueue Thread sleep MessageConsumer secondConsumer registerConsumer produceMessage message secondConsumer receive
MessageConsumer firstConsumer registerConsumer produceMessage Message message firstConsumer receive
MessageConsumer firstConsumer registerConsumer produceMessage Message message firstConsumer receive LOG info message assertEquals numberOfMessages firstConsumer close session commit Thread sleep removeQueue Thread sleep produceMessage MessageConsumer secondConsumer registerConsumer message secondConsumer receive
TextMessage textMessage session createTextMessage textMessage setText count
MessageProducer producer session createProducer destination i i QUEUE_SIZE i Message message session createMessage message setIntProperty i producer send message session commit conn close Queue queue Queue broker getRegionBroker getDestinationMap get destination ConnectionContext context ConnectionContext context setBroker broker getBroker context getMessageEvaluationContext setDestination destination startTimeMillis System currentTimeMillis Assert assertEquals queue moveMatchingMessagesTo context QUEUE_SIZE createDestination MOVE_TO_DESTINATION_NAME durationMillis System currentTimeMillis startTimeMillis
MessageProducer producer session createProducer destination i i QUEUE_SIZE i Message message session createMessage message setIntProperty i producer send message session commit conn close Queue queue Queue broker getRegionBroker getDestinationMap get destination ConnectionContext context ConnectionContext context setBroker broker getBroker context getMessageEvaluationContext setDestination destination startTimeMillis System currentTimeMillis Assert assertEquals queue copyMatchingMessagesTo context QUEUE_SIZE createDestination MOVE_TO_DESTINATION_NAME durationMillis System currentTimeMillis startTimeMillis
MessageProducer producer session createProducer destination i i QUEUE_SIZE i Message message session createMessage message setIntProperty i producer send message session commit conn close Queue queue Queue broker getRegionBroker getDestinationMap get destination ConnectionContext context ConnectionContext context setBroker broker getBroker context getMessageEvaluationContext setDestination destination startTimeMillis System currentTimeMillis Assert assertEquals queue removeMatchingMessages QUEUE_SIZE durationMillis System currentTimeMillis startTimeMillis
Connection conn factory createConnection conn start Session sess conn createSession Session CLIENT_ACKNOWLEDGE Queue queue sess createQueue producer sess queue BytesMessage bytesMessage session createBytesMessage bytesMessage writeBytes payload bytesMessage producer setMessageCount producer start producer join Thread sleep Destination dest broker getDestination ActiveMQQueue queue
Session session connection createSession Session SESSION_TRANSACTED Queue queue session createQueue queueName MessageProducer prod session createProducer queue i i i j j j seq j j seq Message message generateMessage session Integer toString i seq prod send message session commit messagesSent
Session session connection createSession Session SESSION_TRANSACTED Queue queue session createQueue queueName MessageProducer prod session createProducer queue i i i j j j seq j j seq Message message generateMessage session Integer toString i seq prod send message session commit messagesSent LOG info i seq i
seq Message message generateMessage session Integer toString i seq prod send message session commit messagesSent LOG info i seq i LOG info i setMessageGroupCount getMessageGroupCount LOG info messagesSent latchMessagesCreated countDown prod close session close
LOG error e latchMessagesCreated await LOG info Session session connection createSession Session SESSION_TRANSACTED Queue queue session createQueue queueName MessageConsumer con1 session createConsumer queue Message message con1 receive message LOG info formatMessage message checkMessage message messageGroups1 closedGroups1
e LOG error e latchMessagesCreated await LOG info Session session connection createSession Session SESSION_TRANSACTED Queue queue session createQueue queueName MessageConsumer con2 session createConsumer queue Message message con2 receive message
m String String Integer messageGroups String String groupId m getStringProperty seq m getIntProperty Integer count messageGroups get groupId count m m
seq m getIntProperty Integer count messageGroups get groupId count m m LOG info consumerId groupId seq errorCountFirstForConsumer seq closedGroups add groupId LOG info consumerId groupId errorCountWrongConsumerClose messageGroups put groupId closedGroups groupId closedGroups remove groupId m m
LOG info consumerId groupId seq errorCountFirstForConsumer seq closedGroups add groupId LOG info consumerId groupId errorCountWrongConsumerClose messageGroups put groupId closedGroups groupId closedGroups remove groupId LOG info consumerId groupId seq errorCountFirstForConsumer seq
msga setStringProperty producer send msga Message msgb session createTextMessage msgb setStringProperty producer send msgb Thread worker3 start worker3Started await Message msgc session createTextMessage msgc setStringProperty producer send msgc doneSignal await List String workers ArrayList String messageCount keySet Collections sort workers String workers
msga setStringProperty producer send msga Message msgb session createTextMessage msgb setStringProperty producer send msgb Thread worker2 start worker2Started await perBatch Message msgc session createTextMessage msgc setStringProperty producer send msgc doneSignal await log info messageCount get messageGroups get assertEquals messageCount get messageGroups get perBatch messageCount get intValue assertEquals messageCount get messageGroups get messageGroups get size
Message message generateMessage session group i prod send message session commit messagesSent LOG info i i latchMessagesCreated countDown i LOG info latchGroupsAcquired await Thread sleep LOG info messagesSent prod close session close
Session session connection createSession Session SESSION_TRANSACTED Queue queue session createQueue queueName MessageConsumer con1 session createConsumer queue latchMessagesCreated await Message message con1 receive message LOG info formatMessage message session commit messagesRecvd1 messagesRecvd1
con1 close session close e LOG error e latchGroupsAcquired await LOG info Session session connection createSession Session SESSION_TRANSACTED Queue queue session createQueue queueName MessageConsumer con2 session createConsumer queue
i i i consumedCounters add AtomicLong batchCounters add AtomicLong id i getBatchSize id batchSize Session connectionSession connection createSession Session AUTO_ACKNOWLEDGE batchSize getBatchSize MessageConsumer messageConsumer connectionSession createConsumer destWithPrefetch destination Message message AtomicLong consumed consumedCounters get id AtomicLong batches batchCounters get id
getBatchSize id batchSize Session connectionSession connection createSession Session AUTO_ACKNOWLEDGE batchSize getBatchSize MessageConsumer messageConsumer connectionSession createConsumer destWithPrefetch destination Message message AtomicLong consumed consumedCounters get id AtomicLong batches batchCounters get id LOG info id batchSize totalConsumed get consumed get totalConsumed get message messageConsumer receive message
MessageConsumer consumer createConsumer dest MessageIdList received getConsumerMessages consumer Thread sleep sendMessages dest MESSAGE_COUNT received waitForMessagesToArrive MESSAGE_COUNT
MessageConsumer consumer createConsumer dest MessageIdList received getConsumerMessages consumer Thread sleep sendMessages dest MESSAGE_COUNT received waitForMessagesToArrive MESSAGE_COUNT LOG info received getMessageCount assertEquals MESSAGE_COUNT received getMessageCount brokers get broker stop brokers get broker waitUntilStopped Thread sleep sendMessages dest MESSAGE_COUNT received waitForMessagesToArrive MESSAGE_COUNT
brokerSslContext setTrustStore TRUST_KEYSTORE brokerSslContext setTrustStorePassword PASSWORD brokerSslContext afterPropertiesSet BrokerService brokerC brokers get broker brokerC setSslContext brokerSslContext brokerC addConnector brokerCUri brokerC start BrokerService brokerB brokers get broker brokerB setSslContext brokerSslContext brokerB addConnector brokerBUri brokerB start BrokerService brokerA brokers get broker brokerA setNetworkConnectorStartAsync NetworkConnector networkConnector bridgeBroker brokerA brokerBUri networkConnector setSslContext brokerSslContext
brokerSslContext afterPropertiesSet BrokerService brokerC brokers get broker brokerC setSslContext brokerSslContext brokerC addConnector brokerCUri brokerC start BrokerService brokerB brokers get broker brokerB setSslContext brokerSslContext brokerB addConnector brokerBUri brokerB start BrokerService brokerA brokers get broker brokerA setNetworkConnectorStartAsync NetworkConnector networkConnector bridgeBroker brokerA brokerBUri networkConnector setSslContext brokerSslContext LOG info brokerBUri bridgeBroker brokerA brokerCUri
bridgeBroker brokerA proxyToB getUrl toString bridgeBroker brokerA proxyToB getUrl toString bridgeBroker brokerA proxyToB getUrl toString bridgeBroker brokerA proxyToB getUrl toString bridgeBroker brokerA proxyToB getUrl toString bridgeBroker brokerA proxyToB getUrl toString bridgeBroker brokerA brokerCUri Executor e Executors newCachedThreadPool e LOG info brokerA setNetworkConnectorStartAsync brokerA start e
slowWaitThread slowConsumerLatch await slowConsumerTime set System currentTimeMillis startTimeMillis ex exceptions add ex Assert fail ex getMessage fastWaitThread start slowWaitThread start createConsumer FAST_SHARED_QUEUE fastConsumerLatch MessageConsumer slowConsumer createConsumer SLOW_SHARED_QUEUE slowConsumerLatch MessageIdList messageIdList brokers get consumers get slowConsumer messageIdList setProcessingDelay SLOW_CONSUMER_DELAY_MILLIS
slowConsumerLatch await slowConsumerTime set System currentTimeMillis startTimeMillis ex exceptions add ex Assert fail ex getMessage fastWaitThread start slowWaitThread start createConsumer fastDestination fastConsumerLatch MessageConsumer slowConsumer createConsumer slowDestination slowConsumerLatch MessageIdList messageIdList brokers get consumers get slowConsumer messageIdList setProcessingDelay SLOW_CONSUMER_DELAY_MILLIS persistentDelivery sendMessages fastDestination NUM_MESSAGES sendMessages slowDestination NUM_MESSAGES
slowConsumerLatch await slowConsumerTime set System currentTimeMillis startTimeMillis ex exceptions add ex Assert fail ex getMessage fastWaitThread start slowWaitThread start createConsumer fastDestination fastConsumerLatch MessageConsumer slowConsumer createConsumer slowDestination slowConsumerLatch MessageIdList messageIdList brokers get consumers get slowConsumer messageIdList setProcessingDelay SLOW_CONSUMER_DELAY_MILLIS persistentDelivery sendMessages fastDestination NUM_MESSAGES sendMessages slowDestination NUM_MESSAGES
brokerItem BrokerService broker brokerItem broker RegionBroker regionBroker RegionBroker broker getRegionBroker
String wildcardText getDestinationString substring length wildcard ActiveMQQueue wildcardText
LinkedHashSet Message beforeRollback LinkedHashSet Message LinkedHashSet Message afterRollback LinkedHashSet Message Connection connection connectionFactory createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue destinationName MessageConsumer consumer session createConsumer destination consumer Message message received add message sendMessages session commit connection start
received add message sendMessages session commit connection start MSG_COUNT LOG info received size received size MSG_COUNT beforeRollback addAll received received clear session rollback MSG_COUNT
LinkedHashSet Message beforeRollback LinkedHashSet Message LinkedHashSet Message afterRollback LinkedHashSet Message Connection connection connectionFactory createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue destinationName MessageConsumer consumer session createConsumer destination consumer Message message received add message sendMessages session commit connection start
received add message sendMessages session commit connection start MSG_COUNT LOG info received size received size MSG_COUNT beforeRollback addAll received received clear session rollback MSG_COUNT
LinkedHashSet Message received LinkedHashSet Message LinkedHashSet Message beforeRollback LinkedHashSet Message LinkedHashSet Message afterRollback LinkedHashSet Message Connection connection connectionFactory createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue destinationName MessageConsumer consumer session createConsumer destination consumer Message message received add message sendMessages connection start
received add message sendMessages connection start MSG_COUNT LOG info received size received size MSG_COUNT beforeRollback addAll received received clear session rollback sendMessages MSG_COUNT
LinkedHashSet Message received LinkedHashSet Message ActiveMQConnection connection ActiveMQConnection connectionFactory createConnection connection getRedeliveryPolicy setInitialRedeliveryDelay TimeUnit SECONDS toMillis Session session connection createSession Session AUTO_ACKNOWLEDGE Destination destination session createQueue destinationName MessageConsumer consumer session createConsumer destination consumer Message message received add message sendMessages connection start
count message count session rollback LOG info count e LOG warn e getMessage received add message session commit e LOG warn e getMessage
Destination dlq session createQueue MessageConsumer consumer session createConsumer destination MessageConsumer dlqConsumer session createConsumer dlq dlqConsumer message dlqed add message consumer message received add message sendMessages connection start
ActiveMQConnectionFactory factory ActiveMQConnectionFactory factory setOptimizedMessageDispatch factory setObjectMessageSerializationDefered factory setCopyMessageOnSend Connection connection factory createConnection Session session ActiveMQSession connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createConsumer destination connection start consumerStarted countDown ActiveMQObjectMessage message ActiveMQObjectMessage consumer receive message MyObject object MyObject message getObject
ActiveMQConnectionFactory factory ActiveMQConnectionFactory factory setOptimizedMessageDispatch factory setObjectMessageSerializationDefered factory setCopyMessageOnSend Connection connection factory createConnection Session session ActiveMQSession connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createConsumer destination connection start consumerStarted countDown ActiveMQObjectMessage message ActiveMQObjectMessage consumer receive message MyObject object MyObject message getObject
AtomicBoolean foundLogMessage AtomicBoolean
ConnectionFactory connectionFactory ActiveMQConnectionFactory broker getTransportConnectorByScheme getPublishableConnectString Connection connection connectionFactory createConnection connection start Session producerSession connection createSession Session SESSION_TRANSACTED MessageProducer jmsProducer producerSession createProducer producerSession createQueue DESTINATION Message sendMessage producerSession createTextMessage i i i sendMessage setIntProperty i jmsProducer send sendMessage producerSession commit numberOfMessageSent LOG info numberOfMessageSent numberOfMessageSent
Connection connection connectionFactory createConnection connection start Session producerSession connection createSession Session SESSION_TRANSACTED MessageProducer jmsProducer producerSession createProducer producerSession createQueue DESTINATION Message sendMessage producerSession createTextMessage i i i sendMessage setIntProperty i jmsProducer send sendMessage producerSession commit numberOfMessageSent LOG info numberOfMessageSent numberOfMessageSent ex LOG info ex
numberOfMessage LOG info numberOfMessage numberConsumedMessage ConnectionFactory connectionFactory ActiveMQConnectionFactory broker getTransportConnectorByScheme getPublishableConnectString ActiveMQConnection connection ActiveMQConnection connectionFactory createConnection connection start Session session connection createSession Session SESSION_TRANSACTED MessageConsumer jmsConsumer session createConsumer session createQueue DESTINATION consume consume Message message jmsConsumer receive message
numberConsumedMessage ConnectionFactory connectionFactory ActiveMQConnectionFactory broker getTransportConnectorByScheme getPublishableConnectString ActiveMQConnection connection ActiveMQConnection connectionFactory createConnection connection start Session session connection createSession Session SESSION_TRANSACTED MessageConsumer jmsConsumer session createConsumer session createQueue DESTINATION consume consume Message message jmsConsumer receive message LOG info numberConsumedMessage newAppId message getIntProperty numberConsumedMessage
MessageConsumer jmsConsumer session createConsumer session createQueue DESTINATION consume consume Message message jmsConsumer receive message LOG info numberConsumedMessage newAppId message getIntProperty numberConsumedMessage LOG debug newAppId newAppId consumedAppId fail newAppId consumedAppId consumedAppId newAppId session commit numberConsumedMessage
messages clear i i data i producer producerSession createProducer queue objectMessage producerSession createObjectMessage data i producer send objectMessage producerSession commit
m objectMessage ObjectMessage m consumeMessage objectMessage messages
Connection connection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer queue String data data producer send session createTextMessage data QueueBrowser browser session createBrowser queue Enumeration enumeration browser getEnumeration received enumeration Message m Message enumeration nextElement received
Connection connection factory createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer queue String data data producer send session createTextMessage data QueueBrowser browser session createBrowser queue Enumeration enumeration browser getEnumeration received enumeration Message m Message enumeration nextElement received
MessageProducer producer session createProducer queue String data data producer send session createTextMessage data QueueBrowser browser session createBrowser queue Enumeration enumeration browser getEnumeration received enumeration Message m Message enumeration nextElement received
Session session connection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer queue String data data producer send session createTextMessage data MessageConsumer consumer session createConsumer queue consumer receive QueueBrowser browser session createBrowser queue Enumeration enumeration browser getEnumeration received enumeration Message m Message enumeration nextElement received
MessageConsumer session base MessageConsumer messageConsumer session createConsumer dest i i Message message messageConsumer receive message assertEquals i base message getIntProperty i
ActiveMQConnectionFactory factory ActiveMQConnectionFactory connection factory createConnection queue ActiveMQQueue getClass getName getName producerSession connection createSession Session AUTO_ACKNOWLEDGE consumerSession connection createSession producer producerSession createProducer queue consumer consumerSession createConsumer queue consumer m TextMessage tm TextMessage m receivedText tm getText latch countDown
consumer consumerSession createConsumer queue consumer m TextMessage tm TextMessage m receivedText tm getText latch countDown LOG info receivedText consumerSession commit LOG info consumerSession rollback LOG info
e consumerSession rollback LOG info e1 LOG info e1 toString e1 printStackTrace LOG info e toString e printStackTrace connection start TextMessage tm tm producerSession createTextMessage tm setText Date
produceMessages produceMessages
i i i produceMessages produceMessages LOG info i Thread sleep ArrayList Message consumeList consumeMessages
numToSend produceMessages numToSend Thread sleep produceMessages Thread sleep
numToSend i i i produceMessages numToSend Thread sleep produceMessages Thread sleep LOG info i ArrayList Message consumeList consumeMessages
numToSend ConnectionFactory connectionFactory ActiveMQConnectionFactory broker getTransportConnectorByScheme getPublishableConnectString Connection connection connectionFactory createConnection Session session connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer session createConsumer ActiveMQQueue connection start produceMessages numToSend produceMessages Message message consumer receive assertEquals message getJMSPriority connection close ArrayList Message consumeList consumeMessages
numToSend produceMessages numToSend ArrayList Message browsed browseMessages
numToSend produceMessages numToSend ArrayList Message browsed browseMessages LOG info browsed size produceMessages Thread sleep
numToSend i i i produceMessages numToSend ArrayList Message browsed browseMessages LOG info browsed size produceMessages Thread sleep LOG info i Message message consumeOneMessage assertNotNull message assertEquals message getJMSPriority ArrayList Message consumeList consumeMessages
numToSend produceMessages numToSend ArrayList Message browsed browseMessages
numToSend produceMessages numToSend ArrayList Message browsed browseMessages LOG info browsed size assertEquals browsed size Message message consumeOneMessage Session CLIENT_ACKNOWLEDGE assertNotNull message browsed browseMessages
numToSend produceMessages numToSend ArrayList Message browsed browseMessages LOG info browsed size assertEquals browsed size Message message consumeOneMessage Session CLIENT_ACKNOWLEDGE assertNotNull message browsed browseMessages LOG info browsed size assertEquals browsed size ArrayList Message consumeList consumeMessages
LOG info MessageProducer consumerProducer consumerSession createProducer received getJMSReplyTo consumerProducer send consumerSession createTextMessage received getText consumerConnection close MessageConsumer replyConsumer sendSession createConsumer realReplyQ TextMessage reply TextMessage replyConsumer receive receiveTimeout assertNotNull reply assertEquals reply getText sendConnection close LOG info brokerService RegionBroker regionBroker RegionBroker brokerService getRegionBroker regionBroker Map tempTopics regionBroker getTempTopicRegion getDestinationMap
consumerProducer send consumerSession createTextMessage received getText consumerConnection close MessageConsumer replyConsumer sendSession createConsumer realReplyQ TextMessage reply TextMessage replyConsumer receive receiveTimeout assertNotNull reply assertEquals reply getText sendConnection close LOG info brokerService RegionBroker regionBroker RegionBroker brokerService getRegionBroker regionBroker getBrokerName Map tempTopics regionBroker getTempTopicRegion getDestinationMap LOG info regionBroker getBrokerName tempTopics Map tempQ regionBroker getTempQueueRegion getDestinationMap
respondentThreadPool execute EchoRespondent brokerAFactory ExecutorService senderThreadPool Executors newCachedThreadPool BrokerItem brokerC brokers get BROKER_C ActiveMQConnectionFactory brokerCFactory ActiveMQConnectionFactory brokerC broker getTransportConnectorByScheme getName senderThreadPool execute MessageSender brokerCFactory senderThreadPool shutdown senderThreadPool awaitTermination TimeUnit SECONDS TimeUnit SECONDS sleep LOG info shutdown compareAndSet HashSet NetworkBridge bridgesEnd HashSet NetworkBridge networkConnector bridgesEnd addAll networkConnector activeBridges
TextMessage msg MessageClient cons_client cur tot_expected resp_cons sess createConsumer resp_dest cons_client MessageClient resp_cons num_msg cons_client start cur cur num_msg msg sess createTextMessage cur msg setIntProperty cur msg setStringProperty msg setJMSReplyTo resp_dest cur num_msg msg setBooleanProperty sendWithRetryOnDeletedDest req_prod msg
cur cur num_msg msg sess createTextMessage cur msg setIntProperty cur msg setStringProperty msg setJMSReplyTo resp_dest cur num_msg msg setBooleanProperty sendWithRetryOnDeletedDest req_prod msg LOG debug msg cur cons_client waitShutdown cons_client shutdown LOG debug LOG debug tot_expected num_msg echoResponseFill cons_client tot_expected
msg setStringProperty msg setJMSReplyTo resp_dest cur num_msg msg setBooleanProperty sendWithRetryOnDeletedDest req_prod msg LOG debug msg cur cons_client waitShutdown cons_client shutdown LOG debug LOG debug tot_expected num_msg echoResponseFill cons_client getNumMsgReceived tot_expected LOG debug tot_expected testError cons_client getNumMsgReceived fatalTestError
Connection conn Session sess Destination cons_dest num_msg num_msg
String String num_msg Connection conn Session sess String topic_name Destination cons_dest num_msg
num_msg Connection conn Session sess Destination cons_dest num_msg
String String num_msg Connection conn Session sess String queue_name Destination cons_dest num_msg
Thread start2 Thread start3 Thread start4 ThreadPoolExecutor clientExecPool CountDownLatch clientCompletionLatch iter fatalTestError testError clientExecPool ThreadPoolExecutor CONCURRENT_CLIENT_COUNT CONCURRENT_CLIENT_COUNT TimeUnit SECONDS ArrayBlockingQueue Runnable clientCompletionLatch CountDownLatch TOTAL_CLIENT_ITER Thread edge1 start
testError clientExecPool ThreadPoolExecutor CONCURRENT_CLIENT_COUNT CONCURRENT_CLIENT_COUNT TimeUnit SECONDS ArrayBlockingQueue Runnable clientCompletionLatch CountDownLatch TOTAL_CLIENT_ITER edge1 start ex LOG error ex edge2 start ex
ex LOG error ex edge2 start ex LOG error ex core1 start ex
edge2 start ex LOG error ex core1 start ex LOG error ex
start1 start start2 start start3 start start4 start start1 join start2 join start3 join start4 join traffic_gen TopicTrafficGenerator edge1 getConnectionUrl edge2 getConnectionUrl traffic_gen start echo_svc EchoService edge1 getConnectionUrl echo_svc start LOG info iter
topic session close session t connectionFactory createConnection connection close connection t connection setClientID clientID session connection createSession Session AUTO_ACKNOWLEDGE topic session createTopic topicName subscriber session createDurableSubscriber topic subscriberName connection start LOG info time System currentTimeMillis Message message subscriber receive elapsed System currentTimeMillis time
suppressQueueDuplicateSubscriptions decreaseNetworkConsumerPriority bridgeAllBrokers suppressQueueDuplicateSubscriptions decreaseNetworkConsumerPriority Destination dest createDestination BrokerItem brokerB brokers get brokerB AtomicInteger count AtomicInteger count
BrokerItem brokerA brokers get BROKER_A Connection conn conn brokerA createConnection conn start Session sess conn createSession Session AUTO_ACKNOWLEDGE Destination destination sess createQueue ECHO_QUEUE_NAME MessageProducer producer sess createProducer destination
BrokerItem brokerA brokers get BROKER_A Connection conn conn brokerA createConnection conn start Session sess conn createSession Session AUTO_ACKNOWLEDGE Destination destination sess createQueue ECHO_QUEUE_NAME MessageProducer producer sess createProducer destination
BrokerItem brokerC brokers get BROKER_C Connection conn brokerC createConnection conn start Session sess conn createSession Session AUTO_ACKNOWLEDGE Destination destination sess createQueue ECHO_QUEUE_NAME MessageConsumer consumer sess createConsumer destination consumer Message message TextMessage textMessage TextMessage message Destination replyTo message getJMSReplyTo MessageProducer producer sess createProducer replyTo Message response sess createTextMessage textMessage getText
brokerItem destroy BrokerService restartedBroker createAndConfigureBroker URI bridgeAndConfigureBrokers dynamicOnly networkTTL conduitSubs bridgeAndConfigureBrokers dynamicOnly networkTTL conduitSubs restartedBroker start waitForBridgeFormation clientA createConsumer createDestination LOG info Thread sleep sendMessages dest msgsA getConsumerMessages clientA msgsA waitForMessagesToArrive msgsB waitForMessagesToArrive msgsC waitForMessagesToArrive Thread sleep
assertEquals msgsB getMessageCount assertEquals msgsC getMessageCount LOG info brokerItem brokers remove brokerItem brokerItem destroy restartedBroker createAndConfigureBroker URI bridgeAndConfigureBrokers dynamicOnly networkTTL conduitSubs bridgeAndConfigureBrokers dynamicOnly networkTTL conduitSubs restartedBroker start waitForBridgeFormation clientA createConsumer createDestination LOG info Thread sleep msgsA getConsumerMessages clientA
conduitPlease brokerA newBroker brokerB newBroker brokerB start NetworkConnector networkConnector bridgeBrokers brokerA brokerB conduitPlease brokerA start networkConnector
CountDownLatch consumersRegistered CountDownLatch numConsumers i i numConsumers i id i Connection connection remoteConnectionFactoryForConsumers createConnection connection start Session session connection createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumerWithSelector session createConsumer destination id consumerWithSelector messageCount receivedCount incrementAndGet allReceived countDown messageCount
NetworkConnector localBroker remoteBroker conduitPlease String uri remoteBroker getTransportConnectorByScheme getPublishableConnectString NetworkConnector connector DiscoveryNetworkConnector URI uri connector setName localBroker getBrokerName remoteBroker getBrokerName connector setConduitSubscriptions conduitPlease localBroker addNetworkConnector connector
ObjectName name ObjectName objectName ObjectName name
ObjectName name ObjectName objectName ObjectName name LOG info name objectName
Connection consumerCon createConnection Session consumerSession consumerCon createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer1 consumerSession createDurableSubscriber topic assertNotNull consumer1 DurableSubscriptionViewMBean subscriber1 ObjectName query ObjectName domain getName topic getTopicName java util Set ObjectName set mbeanServer queryNames query ObjectName subscriberObjName1 set iterator next subscriber1 MBeanServerInvocationHandler newProxyInstance mbeanServer subscriberObjName1 DurableSubscriptionViewMBean
Connection consumerCon createConnection Session consumerSession consumerCon createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer1 consumerSession createDurableSubscriber topic assertNotNull consumer1 DurableSubscriptionViewMBean subscriber1 ObjectName query ObjectName domain getName topic getTopicName java util Set ObjectName set mbeanServer queryNames query ObjectName subscriberObjName1 set iterator next subscriber1 MBeanServerInvocationHandler newProxyInstance mbeanServer subscriberObjName1 DurableSubscriptionViewMBean LOG info subscriber1 getPendingQueueSize
producer send topic message producerSessions commit LOG info i producerCon close LOG info subscriber1 getPendingQueueSize assertEquals subscriber1 getPendingQueueSize LOG info Connection con2 createConnection session2 con2 createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer2 session2 createDurableSubscriber topic Listener listener Listener consumer2 setMessageListener listener numMessages listener count
assertEquals subscriber1 getPendingQueueSize LOG info Connection con2 createConnection session2 con2 createSession Session AUTO_ACKNOWLEDGE MessageConsumer consumer2 session2 createDurableSubscriber topic Listener listener Listener consumer2 setMessageListener listener numMessages listener count LOG info listener count pq subscriber1 getPendingQueueSize LOG info pq assertEquals pq
c start Session listenerSession c createSession TopicSubscriber durable listenerSession createDurableSubscriber createDestination durable close durable listenerSession createDurableSubscriber createDestination durable setMessageListener Session session connectionFactory createConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer createDestination producer send session createTextMessage count produced incrementAndGet count
producingThread start ArrayList ObjectName subON ArrayList ArrayList DurableSubscriptionViewMBean subViews ArrayList subON addAll Arrays asList broker getAdminView getInactiveDurableTopicSubscribers subON addAll Arrays asList broker getAdminView getDurableTopicSubscribers assertTrue subON isEmpty ObjectName subName subON subViews add DurableSubscriptionViewMBean broker getManagementContext newProxyInstance subName DurableSubscriptionViewMBean LOG info assertTrue DurableSubscriptionViewMBean sub subViews LOG info sub getSubscriptionName LOG info sub cursorSize
producingThread start ArrayList ObjectName subON ArrayList ArrayList DurableSubscriptionViewMBean subViews ArrayList subON addAll Arrays asList broker getAdminView getInactiveDurableTopicSubscribers subON addAll Arrays asList broker getAdminView getDurableTopicSubscribers assertTrue subON isEmpty ObjectName subName subON subViews add DurableSubscriptionViewMBean broker getManagementContext newProxyInstance subName DurableSubscriptionViewMBean LOG info assertTrue DurableSubscriptionViewMBean sub subViews LOG info sub getSubscriptionName LOG info sub cursorSize
producingThread start ArrayList ObjectName subON ArrayList ArrayList DurableSubscriptionViewMBean subViews ArrayList subON addAll Arrays asList broker getAdminView getInactiveDurableTopicSubscribers subON addAll Arrays asList broker getAdminView getDurableTopicSubscribers assertTrue subON isEmpty ObjectName subName subON subViews add DurableSubscriptionViewMBean broker getManagementContext newProxyInstance subName DurableSubscriptionViewMBean LOG info assertTrue DurableSubscriptionViewMBean sub subViews LOG info sub getSubscriptionName LOG info sub cursorSize
producingThread start ArrayList ObjectName subON ArrayList ArrayList DurableSubscriptionViewMBean subViews ArrayList subON addAll Arrays asList broker getAdminView getInactiveDurableTopicSubscribers subON addAll Arrays asList broker getAdminView getDurableTopicSubscribers assertTrue subON isEmpty ObjectName subName subON subViews add DurableSubscriptionViewMBean broker getManagementContext newProxyInstance subName DurableSubscriptionViewMBean LOG info assertTrue DurableSubscriptionViewMBean sub subViews LOG info sub getSubscriptionName LOG info sub cursorSize
count consumed incrementAndGet count
connectionFactory setAlwaysSyncSend connectionFactory setProducerWindowSize ActiveMQPrefetchPolicy prefetchPolicy ActiveMQPrefetchPolicy prefetchPolicy setAll connectionFactory setPrefetchPolicy prefetchPolicy Connection c connectionFactory createConnection c start Session listenerSession c createSession Destination destination createDestination listenerSession listenerSession createConsumer destination setMessageListener TopicProducerFlowControlTest AtomicInteger blockedCounter AtomicInteger listenerSession createConsumer setMessageListener blockedCounter
connectionFactory setPrefetchPolicy prefetchPolicy Connection c connectionFactory createConnection c start Session listenerSession c createSession Destination destination createDestination listenerSession listenerSession createConsumer destination setMessageListener TopicProducerFlowControlTest AtomicInteger blockedCounter AtomicInteger listenerSession createConsumer AdvisorySupport setMessageListener message blockedCounter get LOG info message getStringProperty AdvisorySupport MSG_PROPERTY_USAGE_NAME message getLongProperty AdvisorySupport MSG_PROPERTY_USAGE_COUNT blockedCounter get blockedCounter incrementAndGet error error printStackTrace
AtomicInteger blockedCounter AtomicInteger AdvisorySupport message blockedCounter get LOG info message getStringProperty AdvisorySupport MSG_PROPERTY_USAGE_NAME message getLongProperty AdvisorySupport MSG_PROPERTY_USAGE_COUNT blockedCounter get blockedCounter incrementAndGet error error printStackTrace LOG error error AtomicInteger warnings AtomicInteger
alwaysSyncSend ActiveMQConnectionFactory connectionFactory ActiveMQConnectionFactory brokerUrl connectionFactory setWatchTopicAdvisories connectionFactory setAlwaysSyncSend alwaysSyncSend Connection c connectionFactory createConnection c start ActiveMQPrefetchPolicy prefetchPolicy ActiveMQPrefetchPolicy prefetchPolicy setAll connectionFactory setPrefetchPolicy prefetchPolicy Session listenerSession c createSession Destination destination createDestination listenerSession AtomicInteger warnings AtomicInteger
LOG info event getMessage warnings incrementAndGet org apache log4j Logger log4jLogger org apache log4j Logger getLogger Topic log4jLogger addAppender appender Session session connectionFactory createConnection createSession Session SESSION_TRANSACTED MessageProducer producer session createProducer destination producer send session createTextMessage count produced incrementAndGet count
producer send session createTextMessage count produced incrementAndGet count LOG info count ex ex printStackTrace producer close session close producingThread start
ActiveMQConnectionFactory connectionFactory ActiveMQConnectionFactory brokerUrl connectionFactory setAlwaysSyncSend connectionFactory setProducerWindowSize ActiveMQPrefetchPolicy prefetchPolicy ActiveMQPrefetchPolicy prefetchPolicy setAll connectionFactory setPrefetchPolicy prefetchPolicy Connection c connectionFactory createConnection c start Session listenerSession c createSession Destination destination createDestination listenerSession listenerSession createConsumer destination setMessageListener TopicProducerToSubFileCursorTest AtomicInteger blockedCounter AtomicInteger listenerSession createConsumer setMessageListener
prefetchPolicy setAll connectionFactory setPrefetchPolicy prefetchPolicy Connection c connectionFactory createConnection c start Session listenerSession c createSession Destination destination createDestination listenerSession listenerSession createConsumer destination setMessageListener TopicProducerToSubFileCursorTest AtomicInteger blockedCounter AtomicInteger listenerSession createConsumer AdvisorySupport setMessageListener message LOG error message getStringProperty AdvisorySupport MSG_PROPERTY_USAGE_NAME message getLongProperty AdvisorySupport MSG_PROPERTY_USAGE_COUNT blockedCounter get blockedCounter incrementAndGet error error printStackTrace
LOG error message getStringProperty AdvisorySupport MSG_PROPERTY_USAGE_NAME message getLongProperty AdvisorySupport MSG_PROPERTY_USAGE_COUNT blockedCounter get blockedCounter incrementAndGet error error printStackTrace LOG error error Session session connectionFactory createConnection createSession Session AUTO_ACKNOWLEDGE MessageProducer producer session createProducer destination producer send session createTextMessage count produced incrementAndGet count
Destination destination createDestination getClass getName Connection connection createConnection AtomicBoolean gotException AtomicBoolean connection
MSG_COUNT AtomicBoolean error AtomicBoolean CountDownLatch done CountDownLatch MSG_COUNT ExecutorService executor Executors newSingleThreadExecutor executor MSG_COUNT Message consumedMessage consumer receive consumedMessage done countDown consumedMessage acknowledge consumerSession commit
Message consumedMessage consumer receive consumedMessage done countDown consumedMessage acknowledge consumerSession commit ex LOG error ex error set consumerSession commit
consumer consumerSession createConsumer queue consumer msgCount msgCommittedCount m msgCount TextMessage tm TextMessage m receivedText tm getText tm getJMSRedelivered msgRedelivered add receivedText LOG info receivedText tm getJMSRedelivered msgCount msgRolledBack add receivedText consumerSession rollback
msgCount TextMessage tm TextMessage m receivedText tm getText tm getJMSRedelivered msgRedelivered add receivedText LOG info receivedText tm getJMSRedelivered msgCount msgRolledBack add receivedText consumerSession rollback LOG info receivedText msgCommittedCount msgCommitted add receivedText consumerSession commit
LOG info receivedText msgCommittedCount msgCommitted add receivedText consumerSession commit LOG info receivedText msgCommittedCount latch countDown consumerSession rollback LOG info e1 LOG info e1 toString e1 printStackTrace
e consumerSession rollback LOG info e1 LOG info e1 toString e1 printStackTrace LOG info e toString e printStackTrace connection start TextMessage tm tm producerSession createTextMessage
ActiveMQConnectionFactory factory ActiveMQConnectionFactory connection factory createConnection queue ActiveMQQueue getClass getName getName producerSession connection createSession Session AUTO_ACKNOWLEDGE consumerSession connection createSession producer producerSession createProducer queue consumer consumerSession createConsumer queue consumer m TextMessage tm TextMessage m receivedText tm getText latch countDown
consumer consumerSession createConsumer queue consumer m TextMessage tm TextMessage m receivedText tm getText latch countDown LOG info receivedText consumerSession commit LOG info consumerSession rollback LOG info
e consumerSession rollback LOG info e1 LOG info e1 toString e1 printStackTrace LOG info e toString e printStackTrace connection start TextMessage tm tm producerSession createTextMessage tm setText Date
messagesFromC getMessageCount LOG info messagesFromC getMessageCount assertEquals messagesFromC getMessageCount destroyBroker sendMessages dest BrokerService broker createBroker URI bridgeBrokerPair broker start messagesFromC getMessageCount
File dataDir File IOHelper getDefaultDataDirectory
bridgeBrokers bridgeBrokers startAllBrokers waitForBridgeFormation Destination dest createDestination MessageConsumer clientA createConsumer dest MessageConsumer clientB createConsumer dest sendMessages dest sendMessages dest MessageIdList msgsA getConsumerMessages clientA MessageIdList msgsB getConsumerMessages clientB msgsA getMessageCount msgsB getMessageCount
bridgeBrokers startAllBrokers waitForBridgeFormation Destination dest createDestination MessageConsumer clientA createConsumer dest MessageConsumer clientB createConsumer dest sendMessages dest sendMessages dest MessageIdList msgsA getConsumerMessages clientA MessageIdList msgsB getConsumerMessages clientB msgsA getMessageCount msgsB getMessageCount LOG info msgsA getMessageCount
applyRateLimitNetworkFilter MESSAGE_COUNT bridgeBrokers broker1 broker2 bridgeBrokers broker2 broker1 startAllBrokers Destination dest createDestination MessageConsumer client1 createConsumer broker1 dest MessageConsumer client2 createConsumer broker2 dest Thread sleep sendMessages dest MESSAGE_COUNT msgsClient1 receiveExactMessages client1 MESSAGE_COUNT msgsClient2 receiveExactMessages client2 MESSAGE_COUNT
applyRateLimitNetworkFilter MESSAGE_COUNT bridgeBrokers broker1 broker2 bridgeBrokers broker2 broker1 startAllBrokers Destination dest createDestination MessageConsumer client1 createConsumer broker1 dest MessageConsumer client2 createConsumer broker2 dest Thread sleep sendMessages dest MESSAGE_COUNT msgsClient1 receiveExactMessages client1 MESSAGE_COUNT msgsClient2 receiveExactMessages client2 MESSAGE_COUNT LOG info msgsClient1
startAllBrokers Destination dest createDestination MessageConsumer client1 createConsumer broker1 dest MessageConsumer client2 createConsumer broker2 dest Thread sleep sendMessages dest MESSAGE_COUNT msgsClient1 receiveExactMessages client1 MESSAGE_COUNT msgsClient2 receiveExactMessages client2 MESSAGE_COUNT LOG info msgsClient1 LOG info msgsClient2 Thread sleep LOG info client1 close LOG info msgsClient2 receiveExactMessages client2 MESSAGE_COUNT
sendMessages dest MESSAGE_COUNT msgsClient1 receiveExactMessages client1 MESSAGE_COUNT msgsClient2 receiveExactMessages client2 MESSAGE_COUNT LOG info msgsClient1 LOG info msgsClient2 Thread sleep LOG info client1 close LOG info msgsClient2 receiveExactMessages client2 MESSAGE_COUNT LOG info msgsClient2 client1 createConsumer broker1 dest Thread sleep msgsClient1 receiveExactMessages client1 MESSAGE_COUNT client1 close
LOG info msgsClient2 Thread sleep LOG info client1 close LOG info msgsClient2 receiveExactMessages client2 MESSAGE_COUNT LOG info msgsClient2 client1 createConsumer broker1 dest Thread sleep msgsClient1 receiveExactMessages client1 MESSAGE_COUNT client1 close LOG info msgsClient1 Thread sleep msgsClient2 receiveExactMessages client2 MESSAGE_COUNT client2 close
consumer Message msg i i i i msg consumer receive msg
LOG info bridgeBrokers bridgeBrokers startAllBrokers waitForBridgeFormation waitForMinTopicRegionConsumerCount waitForMinTopicRegionConsumerCount iterations iterations sendReceiveTempQueueMessage waitForMinTopicRegionConsumerCount waitForMinTopicRegionConsumerCount DestinationViewMBean brokerAView createView ActiveMQDestination TOPIC_TYPE
waitForMinTopicRegionConsumerCount iterations iterations sendReceiveTempQueueMessage waitForMinTopicRegionConsumerCount waitForMinTopicRegionConsumerCount DestinationViewMBean brokerAView createView ActiveMQDestination TOPIC_TYPE LOG info brokerAView getEnqueueCount iterations brokerAView getEnqueueCount DestinationViewMBean brokerBView createView ActiveMQDestination TOPIC_TYPE
clearSelectorCacheFiles startAllBrokers BrokerService brokerA brokers get broker ActiveMQDestination consumerQueue createDestination MessageConsumer consumer1 createConsumer consumerQueue MessageConsumer consumer2 createConsumer consumerQueue ActiveMQTopic virtualTopic ActiveMQTopic ProducerThreadTester producerTester createProducerTester virtualTopic producerTester setRunIndefinitely producerTester setSleep producerTester addMessageProperty producerTester addMessageProperty producerTester start currentCount producerTester getSentCount
producerTester addMessageProperty producerTester addMessageProperty producerTester start currentCount producerTester getSentCount LOG info currentCount producerTester getCountForProperty producerTester getCountForProperty Thread sleep MessageIdList consumer1Messages getConsumerMessages consumer1 consumer1Messages waitForMessagesToArrive consumer1 close consumer1 createConsumer consumerQueue brokerA getDestination ActiveMQQueue getConsumers size currentCount producerTester getSentCount
consumer1 createConsumer consumerQueue brokerA getDestination ActiveMQQueue getConsumers size currentCount producerTester getSentCount LOG info currentCount producerTester getCountForProperty producerTester getCountForProperty Thread sleep consumer2 close consumer2 createConsumer consumerQueue brokerA getDestination ActiveMQQueue getConsumers size currentCount producerTester getSentCount
brokerA getDestination ActiveMQQueue getConsumers size currentCount producerTester getSentCount LOG info currentCount producerTester getCountForProperty producerTester getCountForProperty Thread sleep consumer2 close consumer2 createConsumer consumerQueue brokerA getDestination ActiveMQQueue getConsumers size currentCount producerTester getSentCount LOG info currentCount producerTester getCountForProperty producerTester getCountForProperty Thread sleep currentCount producerTester getSentCount
producer send message ActiveMQConnection replyConnection ActiveMQConnection replyFactory createConnection replyConnection setWatchTopicAdvisories replyConnection start Session replySession replyConnection createSession Session AUTO_ACKNOWLEDGE ActiveMQMessageConsumer replyConsumer ActiveMQMessageConsumer replySession createConsumer requestReplyDest javax jms Message msg replyConsumer receive assertNotNull i msg MessageProducer replyProducer replySession createProducer msg getJMSReplyTo replyProducer send session createTextMessage i replyConnection close javax jms Message reply consumer receive assertNotNull i tempDest consumer getConsumerId reply consumer close tempDest delete
brokerName ManagementContext context brokers get brokerName broker getManagementContext AtomicInteger stability AtomicInteger brokerName QueueViewMBean queueViewMBean QueueViewMBean context newProxyInstance brokers get brokerName broker getAdminView getQueues QueueViewMBean currentCount queueViewMBean getConsumerCount
messageCount maximumDuration LOG info messageCount start System currentTimeMillis messageCount messageCount duration System currentTimeMillis start duration maximumDuration semaphore semaphore wait maximumDuration duration e LOG info e end System currentTimeMillis start
connector connector connect MBeanServerConnection connection connector getMBeanServerConnection ObjectName name ObjectName BrokerViewMBean mbean MBeanServerInvocationHandler newProxyInstance connection name BrokerViewMBean
assertEquals brokerService getBrokerName Topic topic Topic broker addDestination context ActiveMQTopic DispatchPolicy dispatchPolicy topic getDispatchPolicy assertTrue dispatchPolicy dispatchPolicy RoundRobinDispatchPolicy SubscriptionRecoveryPolicy subscriptionRecoveryPolicy topic getSubscriptionRecoveryPolicy subscriptionRecoveryPolicy RetainedMessageSubscriptionRecoveryPolicy subscriptionRecoveryPolicy getWrapped assertTrue subscriptionRecoveryPolicy subscriptionRecoveryPolicy LastImageSubscriptionRecoveryPolicy
assertEquals brokerService getBrokerName Topic topic Topic broker addDestination context ActiveMQTopic DispatchPolicy dispatchPolicy topic getDispatchPolicy assertTrue dispatchPolicy dispatchPolicy RoundRobinDispatchPolicy SubscriptionRecoveryPolicy subscriptionRecoveryPolicy topic getSubscriptionRecoveryPolicy subscriptionRecoveryPolicy RetainedMessageSubscriptionRecoveryPolicy subscriptionRecoveryPolicy getWrapped assertTrue subscriptionRecoveryPolicy subscriptionRecoveryPolicy LastImageSubscriptionRecoveryPolicy LOG info topic
assertEquals brokerService getBrokerName Topic topic Topic broker addDestination context ActiveMQTopic DispatchPolicy dispatchPolicy topic getDispatchPolicy assertTrue dispatchPolicy dispatchPolicy RoundRobinDispatchPolicy SubscriptionRecoveryPolicy subscriptionRecoveryPolicy topic getSubscriptionRecoveryPolicy subscriptionRecoveryPolicy RetainedMessageSubscriptionRecoveryPolicy subscriptionRecoveryPolicy getWrapped assertTrue subscriptionRecoveryPolicy subscriptionRecoveryPolicy LastImageSubscriptionRecoveryPolicy LOG info topic LOG info dispatchPolicy
assertTrue dispatchPolicy dispatchPolicy RoundRobinDispatchPolicy SubscriptionRecoveryPolicy subscriptionRecoveryPolicy topic getSubscriptionRecoveryPolicy subscriptionRecoveryPolicy RetainedMessageSubscriptionRecoveryPolicy subscriptionRecoveryPolicy getWrapped assertTrue subscriptionRecoveryPolicy subscriptionRecoveryPolicy LastImageSubscriptionRecoveryPolicy LOG info topic LOG info dispatchPolicy LOG info subscriptionRecoveryPolicy topic Topic broker addDestination context ActiveMQTopic dispatchPolicy topic getDispatchPolicy assertTrue dispatchPolicy dispatchPolicy StrictOrderDispatchPolicy subscriptionRecoveryPolicy topic getSubscriptionRecoveryPolicy subscriptionRecoveryPolicy RetainedMessageSubscriptionRecoveryPolicy subscriptionRecoveryPolicy getWrapped assertTrue subscriptionRecoveryPolicy subscriptionRecoveryPolicy TimedSubscriptionRecoveryPolicy TimedSubscriptionRecoveryPolicy timedSubscriptionPolicy TimedSubscriptionRecoveryPolicy subscriptionRecoveryPolicy assertEquals timedSubscriptionPolicy getRecoverDuration
SubscriptionRecoveryPolicy subscriptionRecoveryPolicy topic getSubscriptionRecoveryPolicy subscriptionRecoveryPolicy RetainedMessageSubscriptionRecoveryPolicy subscriptionRecoveryPolicy getWrapped assertTrue subscriptionRecoveryPolicy subscriptionRecoveryPolicy LastImageSubscriptionRecoveryPolicy LOG info topic LOG info dispatchPolicy LOG info subscriptionRecoveryPolicy topic Topic broker addDestination context ActiveMQTopic dispatchPolicy topic getDispatchPolicy assertTrue dispatchPolicy dispatchPolicy StrictOrderDispatchPolicy subscriptionRecoveryPolicy topic getSubscriptionRecoveryPolicy subscriptionRecoveryPolicy RetainedMessageSubscriptionRecoveryPolicy subscriptionRecoveryPolicy getWrapped assertTrue subscriptionRecoveryPolicy subscriptionRecoveryPolicy TimedSubscriptionRecoveryPolicy TimedSubscriptionRecoveryPolicy timedSubscriptionPolicy TimedSubscriptionRecoveryPolicy subscriptionRecoveryPolicy assertEquals timedSubscriptionPolicy getRecoverDuration LOG info topic
subscriptionRecoveryPolicy RetainedMessageSubscriptionRecoveryPolicy subscriptionRecoveryPolicy getWrapped assertTrue subscriptionRecoveryPolicy subscriptionRecoveryPolicy LastImageSubscriptionRecoveryPolicy LOG info topic LOG info dispatchPolicy LOG info subscriptionRecoveryPolicy topic Topic broker addDestination context ActiveMQTopic dispatchPolicy topic getDispatchPolicy assertTrue dispatchPolicy dispatchPolicy StrictOrderDispatchPolicy subscriptionRecoveryPolicy topic getSubscriptionRecoveryPolicy subscriptionRecoveryPolicy RetainedMessageSubscriptionRecoveryPolicy subscriptionRecoveryPolicy getWrapped assertTrue subscriptionRecoveryPolicy subscriptionRecoveryPolicy TimedSubscriptionRecoveryPolicy TimedSubscriptionRecoveryPolicy timedSubscriptionPolicy TimedSubscriptionRecoveryPolicy subscriptionRecoveryPolicy assertEquals timedSubscriptionPolicy getRecoverDuration LOG info topic LOG info dispatchPolicy
String uri
event LOG debug String webconsoleType getWebconsoleType ServletContext servletContext event getServletContext WebApplicationContext context createWebapplicationContext servletContext webconsoleType initializeWebClient servletContext context webconsoleType String port System getProperty String host System getProperty host port
event LOG debug String webconsoleType getWebconsoleType ServletContext servletContext event getServletContext WebApplicationContext context createWebapplicationContext servletContext webconsoleType initializeWebClient servletContext context webconsoleType String port System getProperty String host System getProperty host port LOG info host port
String webconsoleType String configuration webconsoleType
QueueViewMBean queueView getQueueView queueView
jobId JobSchedulerViewMBean jobScheduler getBrokerFacade getJobScheduler jobScheduler jobScheduler removeJob jobId
QueueViewMBean queueView getQueueView queueView
QueueViewMBean queueView getQueueView queueView
QueueViewMBean queueView getQueueView queueView
object getApplicationContext getBean handlerName object HandlerExecutionChain HandlerExecutionChain handlerExecutionChain HandlerExecutionChain object object handlerExecutionChain getHandler object object object request getMethod UnsupportedOperationException request getMethod request getRequestURI request request request UnsupportedOperationException ServletRequestDataBinder binder ServletRequestDataBinder object binder bind request binder setIgnoreUnknownFields
httpClient start LOG debug String sessionId subscribe httpClient port LOG debug StringBuffer buf StringBuffer CountDownLatch latch asyncRequest httpClient port buf sessionId LOG debug sendMessages httpClient port getBytes LOG debug latch await String response buf toString StringBuffer buf2 StringBuffer CountDownLatch latch2 asyncRequest httpClient port buf2 sessionId latch2 await String fullResponse response buf2 toString
HttpClient httpClient HttpClient httpClient start LOG debug String sessionId subscribe httpClient port LOG debug StringBuffer buf StringBuffer CountDownLatch latch asyncRequest httpClient port buf sessionId LOG debug sendMessages httpClient port getBytes latch await String response buf toString StringBuffer buf2 StringBuffer CountDownLatch latch2 asyncRequest httpClient port buf2 sessionId latch2 await String fullResponse response buf2 toString
port getPort Message msg session createTextMessage msg setStringProperty producer send msg msg session createTextMessage msg setStringProperty producer send msg HttpClient httpClient HttpClient httpClient start LOG debug String sessionId subscribe httpClient port LOG debug StringBuffer buf StringBuffer CountDownLatch latch asyncRequest httpClient port buf sessionId latch await
port getPort MessageProducer producerA session createProducer session createQueue MessageProducer producerB session createProducer session createQueue producerA send session createTextMessage producerA send session createTextMessage producerB send session createTextMessage producerB send session createTextMessage HttpClient httpClient HttpClient httpClient start LOG debug String sessionId subscribe httpClient port subscribe httpClient port sessionId StringBuffer buf StringBuffer CountDownLatch latch asyncRequest httpClient port buf sessionId latch await
httpClient start LOG debug String sessionId subscribe httpClient port subscribe httpClient port sessionId StringBuffer buf StringBuffer CountDownLatch latch asyncRequest httpClient port buf sessionId latch await LOG debug buf toString String expected1 String expected2 assertContains expected1 buf toString assertContains expected2 buf toString StringBuffer buf2 StringBuffer CountDownLatch latch2 asyncRequest httpClient port buf2 sessionId latch2 await
LOG debug String sessionId subscribe httpClient port LOG debug subscribe httpClient port sessionId StringBuffer buf StringBuffer CountDownLatch latch asyncRequest httpClient port buf sessionId LOG debug sendMessages httpClient port getBytes LOG debug latch await String response buf toString StringBuffer buf2 StringBuffer CountDownLatch latch2 asyncRequest httpClient port buf2 sessionId latch2 await String fullResponse response buf2 toString
port getPort HttpClient httpClient HttpClient httpClient start String correlId RandomStringUtils randomNumeric TextMessage message session createTextMessage correlId message setStringProperty correlId message setJMSCorrelationID correlId
port getPort HttpClient httpClient HttpClient httpClient start String correlId RandomStringUtils randomNumeric TextMessage message session createTextMessage correlId message setStringProperty correlId message setJMSCorrelationID correlId LOG info correlId producer send message StringBuffer buf StringBuffer CountDownLatch latch asyncRequest httpClient port buf latch await
port getPort producer send session createTextMessage HttpClient httpClient HttpClient httpClient start StringBuffer buf StringBuffer CountDownLatch latch asyncRequest httpClient port buf latch await
consumer LOG debug consumer continuation continuation Message message consumer receive
consumer LOG debug consumer continuation continuation Message message consumer receive LOG debug message message continuation
request AjaxWebClient client getAjaxWebClient request String messageIds client
client LOG LOG debug client request getSession getId request getParameter request getPathInfo request getContentType messages String destinationName request getParameter messages messages destinationName destinationName request getHeader String message request getParameter messages messages String type request getParameter messages messages destinationName message type Destination destination getDestination client request destinationName LOG
LOG LOG debug client request getSession getId request getParameter request getPathInfo request getContentType messages String destinationName request getParameter messages messages destinationName destinationName request getHeader String message request getParameter messages messages String type request getParameter messages messages destinationName message type Destination destination getDestination client request destinationName LOG LOG debug messages destinationName message type
Destination destination getDestination client request destinationName LOG LOG debug messages destinationName message type LOG debug destination destination getClass getName messages type AjaxListener listener client getListener Map MessageAvailableConsumer String consumerIdMap client getIdMap Map MessageAvailableConsumer String consumerDestinationNameMap client getDestinationNameMap client closeConsumer destination MessageAvailableConsumer consumer MessageAvailableConsumer client getConsumer destination request getHeader WebClient selectorName consumer setAvailableListener listener consumerIdMap put consumer message
AjaxListener listener client getListener Map MessageAvailableConsumer String consumerIdMap client getIdMap Map MessageAvailableConsumer String consumerDestinationNameMap client getDestinationNameMap client closeConsumer destination MessageAvailableConsumer consumer MessageAvailableConsumer client getConsumer destination request getHeader WebClient selectorName consumer setAvailableListener listener consumerIdMap put consumer message consumerDestinationNameMap put consumer destinationName LOG LOG debug consumer destination message Map MessageAvailableConsumer String consumerIdMap client getIdMap Map MessageAvailableConsumer String consumerDestinationNameMap client getDestinationNameMap MessageAvailableConsumer consumer MessageAvailableConsumer client getConsumer destination request getHeader WebClient selectorName consumer setAvailableListener
consumerDestinationNameMap put consumer destinationName LOG LOG debug consumer destination message Map MessageAvailableConsumer String consumerIdMap client getIdMap Map MessageAvailableConsumer String consumerDestinationNameMap client getDestinationNameMap MessageAvailableConsumer consumer MessageAvailableConsumer client getConsumer destination request getHeader WebClient selectorName consumer setAvailableListener consumerIdMap remove consumer consumerDestinationNameMap remove consumer client closeConsumer destination LOG LOG debug consumer TextMessage text client getSession createTextMessage message
appendParametersToMessage request text client send destination text messageIds text getJMSMessageID LOG LOG debug message destination LOG warn type e LOG warn e request doMessages client request response e ServletException e e
request AjaxWebClient client getAjaxWebClient request
request messages timeout getReadTimeout request
Message message undelivered_message UndeliveredAjaxMessage request getAttribute undelivered_message message undelivered_message getMessage client List MessageConsumer consumers client getConsumers MessageAvailableConsumer consumer undelivered_message consumer MessageAvailableConsumer undelivered_message getConsumer message i message i consumers i consumer MessageAvailableConsumer consumers get i consumer message consumer receive
message i message i consumers i consumer MessageAvailableConsumer consumers get i consumer message consumer receive LOG LOG debug message consumer response setContentType response setHeader message Continuation continuation ContinuationSupport getContinuation request continuation Continuation LOG
Continuation continuation ContinuationSupport getContinuation request continuation Continuation cont LOG LOG debug cont toString Continuation cont LOG LOG debug cont toString continuation response setStatus HttpServletResponse SC_OK StringWriter swriter StringWriter PrintWriter writer PrintWriter swriter writer println
LOG debug continuation AjaxListener listener client getListener listener access listener setContinuation continuation StringWriter swriter StringWriter PrintWriter writer PrintWriter swriter Map MessageAvailableConsumer String consumerIdMap client getIdMap Map MessageAvailableConsumer String consumerDestinationNameMap client getDestinationNameMap response setStatus HttpServletResponse SC_OK writer println String id consumerIdMap get consumer String destinationName consumerDestinationNameMap get consumer LOG debug
request String action request getParameter String clientId request getParameter clientId action
String action request getParameter String clientId request getParameter clientId action LOG info clientId WebClient client getWebClient request client close clients remove clientId WebClient client getWebClient request String text getPostedMessageBody request Destination destination getDestination client request destination NoDestinationSuppliedException LOG
destination NoDestinationSuppliedException consumer MessageAvailableConsumer client getConsumer destination request getHeader WebClient selectorName Continuation continuation ContinuationSupport getContinuation request continuation consumer ServletException Message message deadline getReadDeadline request timeout deadline System currentTimeMillis consumer Listener listener Listener consumer getAvailableListener listener listener Listener consumer consumer setAvailableListener listener
response setContentType defaultContentType message response setContentType response setContentType PrintWriter writer response getWriter message response setStatus HttpServletResponse SC_NO_CONTENT messages response setStatus HttpServletResponse SC_OK setResponseHeaders response message writeMessageResponse writer message writer flush
request String clientId request getParameter clientId
String request String answer request getParameter bodyParameter String contentType request getContentType answer contentType
send destination message getProducer send destination message
send destination message persistent priority timeToLive deliveryMode persistent DeliveryMode PERSISTENT DeliveryMode NON_PERSISTENT getProducer send destination message deliveryMode priority timeToLive
String List String configUrls ArrayList String configUrls add String String osName System getProperty
BrokerService broker LOG info configUrl System err println configUrl broker BrokerFactory createBroker configUrl broker start broker start transport broker URI UriToConnectTo URISupport removeQuery transport getConnectUri UriToConnectTo
broker start broker start transport broker URI UriToConnectTo URISupport removeQuery transport getConnectUri UriToConnectTo LOG info UriToConnectTo StompConnection connection StompConnection connection open UriToConnectTo getHost UriToConnectTo getPort connection close UriToConnectTo
broker start transport broker URI UriToConnectTo URISupport removeQuery transport getConnectUri UriToConnectTo LOG info UriToConnectTo StompConnection connection StompConnection connection open UriToConnectTo getHost UriToConnectTo getPort connection close UriToConnectTo LOG info UriToConnectTo ActiveMQConnectionFactory connectionFactory ActiveMQConnectionFactory UriToConnectTo Connection connection connectionFactory createConnection secProps getProperty secProps getProperty connection start
